<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>MultiFit: /home/marc/cea-epfl/trunk/multifit_package/multifit/multifit.py Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript">
$(document).ready(initResizable);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.7.3 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">MultiFit&#160;<span id="projectnumber">1.0.2</span></div>
   <div id="projectbrief">MultiFit - MulTipurpose Fitting Frawework</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Packages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('multifit_8py.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<h1>multifit.py</h1>  </div>
</div>
<div class="contents">
<a href="multifit_8py.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a><a class="code" href="namespacemultifit_1_1multifit.html">00001</a> <span class="stringliteral">&quot;&quot;&quot;! </span>
<a name="l00002"></a>00002 <span class="stringliteral">   @package multifit.multifit Model and Method-independent Fitting</span>
<a name="l00003"></a>00003 <span class="stringliteral">   @author Marc Gentile</span>
<a name="l00004"></a>00004 <span class="stringliteral">   @file multifit.py</span>
<a name="l00005"></a>00005 <span class="stringliteral">   Model and Method-independent Fitting</span>
<a name="l00006"></a>00006 <span class="stringliteral">&quot;&quot;&quot;</span> 
<a name="l00007"></a>00007 
<a name="l00008"></a>00008 <span class="comment"># -- Python imports</span>
<a name="l00009"></a>00009 <span class="keyword">import</span> os, sys
<a name="l00010"></a>00010 <span class="keyword">import</span> math
<a name="l00011"></a>00011 <span class="keyword">import</span> string
<a name="l00012"></a>00012 <span class="keyword">import</span> time
<a name="l00013"></a>00013 <span class="keyword">import</span> imp
<a name="l00014"></a>00014 <span class="keyword">import</span> numpy
<a name="l00015"></a>00015 
<a name="l00016"></a>00016 <span class="comment"># --- External imports</span>
<a name="l00017"></a>00017 <span class="keyword">from</span> sconfig <span class="keyword">import</span> SConfig
<a name="l00018"></a>00018 
<a name="l00019"></a>00019 
<a name="l00020"></a>00020 <span class="comment"># -------------------------------------------------------------------------------------------------</span>
<a name="l00021"></a><a class="code" href="classmultifit_1_1multifit_1_1ModelParam.html">00021</a> <span class="keyword">class </span><a class="code" href="classmultifit_1_1multifit_1_1ModelParam.html" title="Represents a parameter in the model.">ModelParam</a>(<a class="code" href="classobject.html">object</a>):
<a name="l00022"></a>00022    <span class="stringliteral">&quot;&quot;&quot;! Represents a parameter in the model &quot;&quot;&quot;</span>
<a name="l00023"></a>00023 
<a name="l00024"></a><a class="code" href="classmultifit_1_1multifit_1_1ModelParam.html#a202e80586d22ae4b962e3987dbff0275">00024</a>    <span class="keyword">def </span><a class="code" href="classmultifit_1_1multifit_1_1ModelParam.html#a202e80586d22ae4b962e3987dbff0275" title="Construct a ModelParam object.">__init__</a>(self, name, guess, bounds=[None, None]):
<a name="l00025"></a>00025       <span class="stringliteral">&quot;&quot;&quot;!</span>
<a name="l00026"></a>00026 <span class="stringliteral">         Construct a ModelParam object</span>
<a name="l00027"></a>00027 <span class="stringliteral">         @param name name of the model</span>
<a name="l00028"></a>00028 <span class="stringliteral">         @param guess guess value</span>
<a name="l00029"></a>00029 <span class="stringliteral">         @param bounds parameter min and max bounds in the form of list [min, max]   </span>
<a name="l00030"></a>00030 <span class="stringliteral">         @note the minimum, maximum values or both may be set to @c None </span>
<a name="l00031"></a>00031 <span class="stringliteral">      &quot;&quot;&quot;</span>
<a name="l00032"></a>00032 
<a name="l00033"></a>00033       self.<a class="code" href="classmultifit_1_1multifit_1_1ModelParam.html#aa070c36fa83637e96117e134b8812a4f">_name</a> = name             <span class="comment"># name of parameter</span>
<a name="l00034"></a>00034       self.<a class="code" href="classmultifit_1_1multifit_1_1ModelParam.html#a5f6f75886de39890150e88d4d83dee2b">_bounds</a> = bounds         <span class="comment"># allowed range (&lt;min value&gt;, &lt;max value&gt;)</span>
<a name="l00035"></a>00035       self.<a class="code" href="classmultifit_1_1multifit_1_1ModelParam.html#a03a05d394a404ad1b0dd943fc4b1ab31">_guess_value</a> = guess     <span class="comment"># guess value</span>
<a name="l00036"></a>00036       self.<a class="code" href="classmultifit_1_1multifit_1_1ModelParam.html#ab8b53b6befebb9f63012da0cd2ff6489">_fitted_value</a> = guess    <span class="comment"># fitted value (initially equal to guess)</span>
<a name="l00037"></a>00037 
<a name="l00038"></a><a class="code" href="classmultifit_1_1multifit_1_1ModelParam.html#afe75e53aed0e10efe60c53536dbefcd0">00038</a>    <span class="keyword">def </span><a class="code" href="classmultifit_1_1multifit_1_1ModelParam.html#afe75e53aed0e10efe60c53536dbefcd0" title="String representation of a ModelParam object.">__str__</a>(self):
<a name="l00039"></a>00039       <span class="stringliteral">&quot;&quot;&quot;! </span>
<a name="l00040"></a>00040 <span class="stringliteral">         String representation of a ModelParam object </span>
<a name="l00041"></a>00041 <span class="stringliteral">         @return a Python String describing the ModelParam object</span>
<a name="l00042"></a>00042 <span class="stringliteral">      &quot;&quot;&quot;</span>
<a name="l00043"></a>00043       <span class="keywordflow">return</span> <span class="stringliteral">&quot;&lt;{0}, {1}, {2}, {3}&gt;&quot;</span>.format(self.<a class="code" href="classmultifit_1_1multifit_1_1ModelParam.html#aa070c36fa83637e96117e134b8812a4f">_name</a>, 
<a name="l00044"></a>00044                                         self.<a class="code" href="classmultifit_1_1multifit_1_1ModelParam.html#a03a05d394a404ad1b0dd943fc4b1ab31">_guess_value</a>, self.<a class="code" href="classmultifit_1_1multifit_1_1ModelParam.html#a5f6f75886de39890150e88d4d83dee2b">_bounds</a>, self.<a class="code" href="classmultifit_1_1multifit_1_1ModelParam.html#ab8b53b6befebb9f63012da0cd2ff6489">_fitted_value</a>)
<a name="l00045"></a>00045 
<a name="l00046"></a>00046    <span class="comment"># ~~~~~~~~~~~</span>
<a name="l00047"></a>00047    <span class="comment"># Properties </span>
<a name="l00048"></a>00048    <span class="comment"># ~~~~~~~~~~~   </span>
<a name="l00049"></a>00049 
<a name="l00050"></a>00050    <span class="comment"># --- Getters</span>
<a name="l00051"></a>00051 
<a name="l00052"></a>00052    @property
<a name="l00053"></a><a class="code" href="classmultifit_1_1multifit_1_1ModelParam.html#aab128c8bbc170de5a088c2b04718c16e">00053</a>    <span class="keyword">def </span><a class="code" href="classmultifit_1_1multifit_1_1ModelParam.html#aab128c8bbc170de5a088c2b04718c16e">name</a>(self):
<a name="l00054"></a>00054       <span class="stringliteral">&quot;&quot;&quot;! @return the name of the parameter &quot;&quot;&quot;</span>   
<a name="l00055"></a>00055       <span class="keywordflow">return</span> self.<a class="code" href="classmultifit_1_1multifit_1_1ModelParam.html#aa070c36fa83637e96117e134b8812a4f">_name</a>
<a name="l00056"></a>00056 
<a name="l00057"></a>00057    @property
<a name="l00058"></a><a class="code" href="classmultifit_1_1multifit_1_1ModelParam.html#a8433ddbcacff6426da5ac716e56d9cd1">00058</a>    <span class="keyword">def </span><a class="code" href="classmultifit_1_1multifit_1_1ModelParam.html#a8433ddbcacff6426da5ac716e56d9cd1">bounds</a>(self):
<a name="l00059"></a>00059       <span class="stringliteral">&quot;&quot;&quot;! @return the bounds of the parameter &quot;&quot;&quot;</span>   
<a name="l00060"></a>00060       <span class="keywordflow">return</span> self.<a class="code" href="classmultifit_1_1multifit_1_1ModelParam.html#a5f6f75886de39890150e88d4d83dee2b">_bounds</a>
<a name="l00061"></a>00061 
<a name="l00062"></a>00062    @property
<a name="l00063"></a><a class="code" href="classmultifit_1_1multifit_1_1ModelParam.html#a22e11d8ab8a3b9226df304151f3d0b5c">00063</a>    <span class="keyword">def </span><a class="code" href="classmultifit_1_1multifit_1_1ModelParam.html#a22e11d8ab8a3b9226df304151f3d0b5c">guess_value</a>(self):
<a name="l00064"></a>00064       <span class="stringliteral">&quot;&quot;&quot;! @return the guess value of the parameter &quot;&quot;&quot;</span>   
<a name="l00065"></a>00065       <span class="keywordflow">return</span> self.<a class="code" href="classmultifit_1_1multifit_1_1ModelParam.html#a03a05d394a404ad1b0dd943fc4b1ab31">_guess_value</a>
<a name="l00066"></a>00066 
<a name="l00067"></a>00067    @property
<a name="l00068"></a><a class="code" href="classmultifit_1_1multifit_1_1ModelParam.html#a979c0e1116065e048d077e1be3405af2">00068</a>    <span class="keyword">def </span><a class="code" href="classmultifit_1_1multifit_1_1ModelParam.html#a979c0e1116065e048d077e1be3405af2">fitted_value</a>(self):
<a name="l00069"></a>00069       <span class="stringliteral">&quot;&quot;&quot;! </span>
<a name="l00070"></a>00070 <span class="stringliteral">         @return the fitted value of the parameter once fitting is complete </span>
<a name="l00071"></a>00071 <span class="stringliteral">         @note the initial value of fitted_value() is the same as that returned by guess_value()</span>
<a name="l00072"></a>00072 <span class="stringliteral">      &quot;&quot;&quot;</span>   
<a name="l00073"></a>00073       <span class="keywordflow">return</span> self.<a class="code" href="classmultifit_1_1multifit_1_1ModelParam.html#ab8b53b6befebb9f63012da0cd2ff6489">_fitted_value</a>
<a name="l00074"></a>00074 
<a name="l00075"></a>00075    <span class="comment"># --- Setters</span>
<a name="l00076"></a>00076 
<a name="l00077"></a>00077    @name.setter 
<a name="l00078"></a><a class="code" href="classmultifit_1_1multifit_1_1ModelParam.html#aab128c8bbc170de5a088c2b04718c16e">00078</a>    <span class="keyword">def </span><a class="code" href="classmultifit_1_1multifit_1_1ModelParam.html#aab128c8bbc170de5a088c2b04718c16e">name</a>(self, name):
<a name="l00079"></a>00079       <span class="stringliteral">&quot;&quot;&quot;!     </span>
<a name="l00080"></a>00080 <span class="stringliteral">         Set the name of the model parameter </span>
<a name="l00081"></a>00081 <span class="stringliteral">         @param name parameter name</span>
<a name="l00082"></a>00082 <span class="stringliteral">      &quot;&quot;&quot;</span>
<a name="l00083"></a>00083       self.<a class="code" href="classmultifit_1_1multifit_1_1ModelParam.html#aa070c36fa83637e96117e134b8812a4f">_name</a> = name     
<a name="l00084"></a>00084 
<a name="l00085"></a>00085    @bounds.setter 
<a name="l00086"></a><a class="code" href="classmultifit_1_1multifit_1_1ModelParam.html#a8433ddbcacff6426da5ac716e56d9cd1">00086</a>    <span class="keyword">def </span><a class="code" href="classmultifit_1_1multifit_1_1ModelParam.html#a8433ddbcacff6426da5ac716e56d9cd1">bounds</a>(self, bounds):
<a name="l00087"></a>00087       <span class="stringliteral">&quot;&quot;&quot;!     </span>
<a name="l00088"></a>00088 <span class="stringliteral">         Set the bounds of the model parameter </span>
<a name="l00089"></a>00089 <span class="stringliteral">         @param bounds parameter min and max bounds in the form of list [min, max]   </span>
<a name="l00090"></a>00090 <span class="stringliteral">         @note the minimum, maximum values or both may be set to @c None</span>
<a name="l00091"></a>00091 <span class="stringliteral">      &quot;&quot;&quot;</span>
<a name="l00092"></a>00092       self.<a class="code" href="classmultifit_1_1multifit_1_1ModelParam.html#a5f6f75886de39890150e88d4d83dee2b">_bounds</a> = bounds     
<a name="l00093"></a>00093 
<a name="l00094"></a>00094    @guess_value.setter 
<a name="l00095"></a><a class="code" href="classmultifit_1_1multifit_1_1ModelParam.html#a22e11d8ab8a3b9226df304151f3d0b5c">00095</a>    <span class="keyword">def </span><a class="code" href="classmultifit_1_1multifit_1_1ModelParam.html#a22e11d8ab8a3b9226df304151f3d0b5c">guess_value</a>(self, guess_value):
<a name="l00096"></a>00096       <span class="stringliteral">&quot;&quot;&quot;!     </span>
<a name="l00097"></a>00097 <span class="stringliteral">         Set the guess value of the model parameter </span>
<a name="l00098"></a>00098 <span class="stringliteral">         @param guess_value guess value</span>
<a name="l00099"></a>00099 <span class="stringliteral">      &quot;&quot;&quot;</span>
<a name="l00100"></a>00100       self.<a class="code" href="classmultifit_1_1multifit_1_1ModelParam.html#a03a05d394a404ad1b0dd943fc4b1ab31">_guess_value</a> = guess_value     
<a name="l00101"></a>00101 
<a name="l00102"></a>00102    @fitted_value.setter 
<a name="l00103"></a><a class="code" href="classmultifit_1_1multifit_1_1ModelParam.html#a979c0e1116065e048d077e1be3405af2">00103</a>    <span class="keyword">def </span><a class="code" href="classmultifit_1_1multifit_1_1ModelParam.html#a979c0e1116065e048d077e1be3405af2">fitted_value</a>(self, fitted_value):
<a name="l00104"></a>00104       <span class="stringliteral">&quot;&quot;&quot;! </span>
<a name="l00105"></a>00105 <span class="stringliteral">         Set the fitted value of the model parameter</span>
<a name="l00106"></a>00106 <span class="stringliteral">         @param fitted_value fitted value</span>
<a name="l00107"></a>00107 <span class="stringliteral">      &quot;&quot;&quot;</span>  
<a name="l00108"></a>00108       self.<a class="code" href="classmultifit_1_1multifit_1_1ModelParam.html#ab8b53b6befebb9f63012da0cd2ff6489">_fitted_value</a> = fitted_value     
<a name="l00109"></a>00109 
<a name="l00110"></a>00110 
<a name="l00111"></a>00111 <span class="comment"># --------------------------------------------------------------------------------------------------</span>
<a name="l00112"></a><a class="code" href="classmultifit_1_1multifit_1_1FittingElement.html">00112</a> <span class="keyword">class </span><a class="code" href="classmultifit_1_1multifit_1_1FittingElement.html" title="A fitting model or algorithm/method.">FittingElement</a>(<a class="code" href="classobject.html">object</a>):
<a name="l00113"></a>00113    <span class="stringliteral">&quot;&quot;&quot;! </span>
<a name="l00114"></a>00114 <span class="stringliteral">      A fitting model or algorithm/method. </span>
<a name="l00115"></a>00115 <span class="stringliteral">      @note this is the base class for a fitting method or model</span>
<a name="l00116"></a>00116 <span class="stringliteral">   &quot;&quot;&quot;</span>
<a name="l00117"></a>00117 
<a name="l00118"></a>00118    <span class="keyword">def </span>__init__(self, name, config_dir, config_filename):
<a name="l00119"></a>00119       <span class="stringliteral">&quot;&quot;&quot;!</span>
<a name="l00120"></a>00120 <span class="stringliteral">         Construct a FittingElement object</span>
<a name="l00121"></a>00121 <span class="stringliteral">         @name name of the element</span>
<a name="l00122"></a>00122 <span class="stringliteral">         @config_dir directory of the configuration file for the element </span>
<a name="l00123"></a>00123 <span class="stringliteral">         @config_filename name of the configuration file for the element </span>
<a name="l00124"></a>00124 <span class="stringliteral">      &quot;&quot;&quot;</span>   
<a name="l00125"></a>00125       self._name = name  <span class="comment"># name of the model</span>
<a name="l00126"></a>00126       <span class="keywordflow">if</span> name <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:
<a name="l00127"></a>00127          self._config = self.<a class="code" href="classmultifit_1_1multifit_1_1FittingElement.html#accb8cf3a1532ba4c4afd11deaff2da48">_load_config</a>(config_dir, config_filename)            <span class="comment"># SConfig object</span>
<a name="l00128"></a>00128          self._default_config = self.<a class="code" href="classmultifit_1_1multifit_1_1FittingElement.html#accb8cf3a1532ba4c4afd11deaff2da48">_load_config</a>(config_dir, self.<a class="code" href="classmultifit_1_1multifit_1_1FittingElement.html#aa7ddef3e53f936d9c5ffbc0a1fbcfc38">name</a> + <span class="stringliteral">&quot;.cfg&quot;</span>) <span class="comment"># SConfig object</span>
<a name="l00129"></a>00129       <span class="keywordflow">else</span>:
<a name="l00130"></a>00130          self._config = <span class="keywordtype">None</span>
<a name="l00131"></a>00131          self._default_config = <span class="keywordtype">None</span>
<a name="l00132"></a>00132 
<a name="l00133"></a>00133    <span class="comment"># ~~~~~~~~~~~</span>
<a name="l00134"></a>00134    <span class="comment"># Properties </span>
<a name="l00135"></a>00135    <span class="comment"># ~~~~~~~~~~~   </span>
<a name="l00136"></a>00136 
<a name="l00137"></a>00137    <span class="comment"># --- Getters   </span>
<a name="l00138"></a>00138 
<a name="l00139"></a>00139    @property
<a name="l00140"></a><a class="code" href="classmultifit_1_1multifit_1_1FittingElement.html#aa7ddef3e53f936d9c5ffbc0a1fbcfc38">00140</a>    <span class="keyword">def </span><a class="code" href="classmultifit_1_1multifit_1_1FittingElement.html#aa7ddef3e53f936d9c5ffbc0a1fbcfc38">name</a>(self):
<a name="l00141"></a>00141       <span class="stringliteral">&quot;&quot;&quot;! @return the name of the element &quot;&quot;&quot;</span>   
<a name="l00142"></a>00142       <span class="keywordflow">return</span> self._name
<a name="l00143"></a>00143       
<a name="l00144"></a>00144    @property
<a name="l00145"></a><a class="code" href="classmultifit_1_1multifit_1_1FittingElement.html#ab388414ce5652dd60d3e6cc64f8b18db">00145</a>    <span class="keyword">def </span><a class="code" href="classmultifit_1_1multifit_1_1FittingElement.html#ab388414ce5652dd60d3e6cc64f8b18db">config</a>(self):
<a name="l00146"></a>00146       <span class="stringliteral">&quot;&quot;&quot;! @return the directory of the default configuration file for the element &quot;&quot;&quot;</span>   
<a name="l00147"></a>00147       <span class="keywordflow">return</span> self._config
<a name="l00148"></a>00148 
<a name="l00149"></a>00149    @property
<a name="l00150"></a><a class="code" href="classmultifit_1_1multifit_1_1FittingElement.html#a3c15f0fbcb5877191d71b8f4f973d450">00150</a>    <span class="keyword">def </span><a class="code" href="classmultifit_1_1multifit_1_1FittingElement.html#a3c15f0fbcb5877191d71b8f4f973d450">default_config</a>(self):
<a name="l00151"></a>00151       <span class="stringliteral">&quot;&quot;&quot;! @return the directory of the default configuration file for the element &quot;&quot;&quot;</span>   
<a name="l00152"></a>00152       <span class="keywordflow">return</span> self._default_config
<a name="l00153"></a>00153 
<a name="l00154"></a>00154    <span class="comment"># ~~~~~~~~~~~~~~~</span>
<a name="l00155"></a>00155    <span class="comment"># Private Methods </span>
<a name="l00156"></a>00156    <span class="comment"># ~~~~~~~~~~~~~~~</span>
<a name="l00157"></a>00157 
<a name="l00158"></a>00158    <span class="comment"># -----------------------------------------------------------------------------------------------</span>
<a name="l00159"></a>00159    <span class="keyword">def </span>_load_config(self, config_dir, config_filename):
<a name="l00160"></a>00160 
<a name="l00161"></a>00161       config_file = <span class="keywordtype">None</span>
<a name="l00162"></a>00162 
<a name="l00163"></a>00163       <span class="comment"># --- Config name is derived from name FittingElement          </span>
<a name="l00164"></a>00164       config_filepath = os.path.join(config_dir, config_filename)   
<a name="l00165"></a>00165       default_config_filepath = os.path.join(config_dir, self.<a class="code" href="classmultifit_1_1multifit_1_1FittingElement.html#aa7ddef3e53f936d9c5ffbc0a1fbcfc38">name</a>) + <span class="stringliteral">&#39;.cfg&#39;</span>   
<a name="l00166"></a>00166       <span class="keywordflow">try</span>:
<a name="l00167"></a>00167          config_file = SConfig(config_filepath)
<a name="l00168"></a>00168          <span class="keywordflow">if</span> config_filepath != default_config_filepath:
<a name="l00169"></a>00169             <span class="keywordflow">print</span>(<span class="stringliteral">&quot;MultiFit *** Note *** using configuration file {0}&quot;</span>.format(config_filepath))
<a name="l00170"></a>00170 
<a name="l00171"></a>00171       <span class="keywordflow">except</span>:
<a name="l00172"></a>00172          <span class="comment"># No configuration file found =&gt; Try the default configuration name</span>
<a name="l00173"></a>00173          <span class="keywordflow">try</span>:
<a name="l00174"></a>00174             <span class="keywordflow">print</span>(<span class="stringliteral">&quot;MultiFit *** Note *** using default configuration file {0}&quot;</span>.format(
<a name="l00175"></a>00175                                                                           default_config_filepath))
<a name="l00176"></a>00176             config_file = SConfig(default_config_filepath)         
<a name="l00177"></a>00177          <span class="keywordflow">except</span>:
<a name="l00178"></a>00178             <span class="comment"># No configuration file found =&gt; The user must manually provide the relevant information</span>
<a name="l00179"></a>00179             <span class="keywordflow">print</span>(<span class="stringliteral">&quot;MultiFit *** Warning ***: error reading configuration file {0}.&quot;</span>.format(
<a name="l00180"></a>00180                                                                          default_config_filepath))
<a name="l00181"></a>00181       <span class="keywordflow">return</span> config_file
<a name="l00182"></a>00182 
<a name="l00183"></a>00183 <span class="comment"># -------------------------------------------------------------------------------------------------</span>
<a name="l00184"></a><a class="code" href="classmultifit_1_1multifit_1_1BaseFittingModel.html">00184</a> <span class="keyword">class </span><a class="code" href="classmultifit_1_1multifit_1_1BaseFittingModel.html" title="Represents a parametric model to which the data must be fitted.">BaseFittingModel</a>(<a class="code" href="classmultifit_1_1multifit_1_1FittingElement.html" title="A fitting model or algorithm/method.">FittingElement</a>):
<a name="l00185"></a>00185    <span class="stringliteral">&quot;&quot;&quot;! </span>
<a name="l00186"></a>00186 <span class="stringliteral">      Represents a parametric model to which the data must be fitted</span>
<a name="l00187"></a>00187 <span class="stringliteral">      @note this is the base class for all fitting models</span>
<a name="l00188"></a>00188 <span class="stringliteral">   &quot;&quot;&quot;</span>
<a name="l00189"></a>00189 
<a name="l00190"></a><a class="code" href="classmultifit_1_1multifit_1_1BaseFittingModel.html#a17b439926b81e560ef5008fb78c493c7">00190</a>    <span class="keyword">def </span><a class="code" href="classmultifit_1_1multifit_1_1BaseFittingModel.html#a17b439926b81e560ef5008fb78c493c7" title="Construct BaseFittingModel object.">__init__</a>(self, name, config_dir, config_filename):
<a name="l00191"></a>00191       <span class="stringliteral">&quot;&quot;&quot;!</span>
<a name="l00192"></a>00192 <span class="stringliteral">         Construct BaseFittingModel object</span>
<a name="l00193"></a>00193 <span class="stringliteral">         @param name name of the model   </span>
<a name="l00194"></a>00194 <span class="stringliteral">         @param config_dir configuration directory of the model</span>
<a name="l00195"></a>00195 <span class="stringliteral">         @param config_filename configuration filename of the model</span>
<a name="l00196"></a>00196 <span class="stringliteral">      &quot;&quot;&quot;</span>
<a name="l00197"></a>00197 
<a name="l00198"></a>00198       FittingElement.__init__(self, name, config_dir, config_filename) <span class="comment"># initialize parent class</span>
<a name="l00199"></a>00199 
<a name="l00200"></a>00200 <span class="comment">#      self._model_options = model_options    # options influencing how the model should be fitted</span>
<a name="l00201"></a>00201 <span class="comment">#      self._model_options = diag_options     # diagnose directives (logging, stats, etc.)</span>
<a name="l00202"></a>00202 
<a name="l00203"></a>00203       <span class="comment"># --- Private attributes (should not be accessed directly)</span>
<a name="l00204"></a>00204       self.<a class="code" href="classmultifit_1_1multifit_1_1BaseFittingModel.html#a607cc246fe9b940f84066acffe0f2a28">__params</a> = []         <span class="comment"># the model parameters</span>
<a name="l00205"></a>00205       self.<a class="code" href="classmultifit_1_1multifit_1_1BaseFittingModel.html#a49ef1a723ec06ac7919744f45bc155ab">__param_dico</a> = {}     <span class="comment"># to access parameter by names instead of indice</span>
<a name="l00206"></a>00206 
<a name="l00207"></a>00207       self.<a class="code" href="classmultifit_1_1multifit_1_1BaseFittingModel.html#a17e70d1204fdbfb0750c844f6aee1bc4">_numerical_error_handler</a> = <span class="keywordtype">None</span>   <span class="comment"># numerical error handler method</span>
<a name="l00208"></a>00208       self.<a class="code" href="classmultifit_1_1multifit_1_1BaseFittingModel.html#aba056fd6c0b2166d2035494ae433385b">_out_of_bound_handler</a> = <span class="keywordtype">None</span>      <span class="comment"># out-of-bound handler function</span>
<a name="l00209"></a>00209 
<a name="l00210"></a>00210       <span class="comment"># --- Model Parameters list: set from configuration or otherwise, manually</span>
<a name="l00211"></a>00211       model_params = self.<a class="code" href="classmultifit_1_1multifit_1_1BaseFittingModel.html#aaa1f17dbba06b3550eb6730ff3df38ec">get_params_from_config</a>()
<a name="l00212"></a>00212 
<a name="l00213"></a>00213       <span class="keywordflow">if</span> len(model_params) &gt; 0:
<a name="l00214"></a>00214          self.<a class="code" href="classmultifit_1_1multifit_1_1BaseFittingModel.html#a594bd005366e12ff7135cbfa70a89834" title="Set the model parameters in the form of a list of ModelParam objects.">set_params</a>(model_params)        <span class="comment"># set parameters based on configuration          </span>
<a name="l00215"></a>00215 
<a name="l00216"></a>00216       <span class="comment"># --- Model function for evaluating the model given parameters</span>
<a name="l00217"></a>00217       self.<a class="code" href="classmultifit_1_1multifit_1_1BaseFittingModel.html#ac4d3d3ff52e3db25af8b97f6581973c2">_func</a> = self.<a class="code" href="classmultifit_1_1multifit_1_1BaseFittingModel.html#aa5ba0d4ca84257dcfc5d74464f0144e6">get_model_func_from_config</a>() <span class="comment"># function for evaluating the model</span>
<a name="l00218"></a>00218 
<a name="l00219"></a>00219       <span class="comment"># --- Read catalog column mapping iformation if available</span>
<a name="l00220"></a>00220       self.<a class="code" href="classmultifit_1_1multifit_1_1BaseFittingModel.html#a6621e006ffc2f4d1e266ef9b29e4553d">_col_mapping_dico</a> = {}
<a name="l00221"></a>00221       <span class="keywordflow">if</span> self.config.has_section(<span class="stringliteral">&quot;MODEL.GUESS&quot;</span>):
<a name="l00222"></a>00222 
<a name="l00223"></a>00223          <span class="comment"># Read catalog column mapping information</span>
<a name="l00224"></a>00224          <span class="keywordflow">if</span> self.config.has_key(<span class="stringliteral">&quot;guess_col_mapping&quot;</span>, <span class="stringliteral">&quot;MODEL.GUESS&quot;</span>):
<a name="l00225"></a>00225             self.<a class="code" href="classmultifit_1_1multifit_1_1BaseFittingModel.html#a6621e006ffc2f4d1e266ef9b29e4553d">_col_mapping_dico</a> = self.config.get_as_dict(<span class="stringliteral">&quot;guess_col_mapping&quot;</span>, <span class="stringliteral">&quot;MODEL.GUESS&quot;</span>) 
<a name="l00226"></a>00226 
<a name="l00227"></a>00227       <span class="comment"># --- Model check section if available</span>
<a name="l00228"></a>00228       <span class="keywordflow">if</span> self.config.has_section(<span class="stringliteral">&quot;MODEL.CHECK&quot;</span>):
<a name="l00229"></a>00229 
<a name="l00230"></a>00230          <span class="comment"># Read catalog column mapping information</span>
<a name="l00231"></a>00231          self.<a class="code" href="classmultifit_1_1multifit_1_1BaseFittingModel.html#a777ccecd4ae5d43d339ea4cecb9a2345">_check_centroids</a> = <span class="keyword">False</span>
<a name="l00232"></a>00232          self.<a class="code" href="classmultifit_1_1multifit_1_1BaseFittingModel.html#ab583cb73ab864640ed94deeaf70f9191">_max_centroid_shift</a> = 2.0
<a name="l00233"></a>00233          <span class="keywordflow">if</span> self.config.has_key(<span class="stringliteral">&quot;check_centroids&quot;</span>, <span class="stringliteral">&quot;MODEL.CHECK&quot;</span>):
<a name="l00234"></a>00234             self.<a class="code" href="classmultifit_1_1multifit_1_1BaseFittingModel.html#a777ccecd4ae5d43d339ea4cecb9a2345">_check_centroids</a> = self.config.get_as_boolean(<span class="stringliteral">&quot;check_centroids&quot;</span>, <span class="stringliteral">&quot;MODEL.CHECK&quot;</span>)
<a name="l00235"></a>00235 
<a name="l00236"></a>00236             <span class="keywordflow">if</span> self.<a class="code" href="classmultifit_1_1multifit_1_1BaseFittingModel.html#a777ccecd4ae5d43d339ea4cecb9a2345">_check_centroids</a>:
<a name="l00237"></a>00237                <span class="keywordflow">if</span> self.config.has_key(<span class="stringliteral">&quot;max_centroid_shift&quot;</span>, <span class="stringliteral">&quot;MODEL.CHECK&quot;</span>):
<a name="l00238"></a>00238                   self.<a class="code" href="classmultifit_1_1multifit_1_1BaseFittingModel.html#ab583cb73ab864640ed94deeaf70f9191">_max_centroid_shift</a> = self.config.get_as_int(<span class="stringliteral">&quot;max_centroid_shift&quot;</span>, 
<a name="l00239"></a>00239                                                                      <span class="stringliteral">&quot;MODEL.CHECK&quot;</span>)
<a name="l00240"></a>00240 
<a name="l00241"></a>00241 <span class="comment">#      #print &quot;BaseFittingModel:&quot;, [(p.name, p.bounds, p.guess_value) for p in model_params]</span>
<a name="l00242"></a>00242 
<a name="l00243"></a>00243 
<a name="l00244"></a><a class="code" href="classmultifit_1_1multifit_1_1BaseFittingModel.html#a3734eaa2202b086b701cb67c028792ca">00244</a>    <span class="keyword">def </span><a class="code" href="classmultifit_1_1multifit_1_1BaseFittingModel.html#a3734eaa2202b086b701cb67c028792ca" title="String representation of a BaseFittingModel object.">__str__</a>(self):
<a name="l00245"></a>00245       <span class="stringliteral">&quot;&quot;&quot;! </span>
<a name="l00246"></a>00246 <span class="stringliteral">         String representation of a BaseFittingModel object </span>
<a name="l00247"></a>00247 <span class="stringliteral">         @return a Python String describing the BaseFittingModel object</span>
<a name="l00248"></a>00248 <span class="stringliteral">      &quot;&quot;&quot;</span>
<a name="l00249"></a>00249       descr = <span class="stringliteral">&quot;Fitting Model:\n&quot;</span>
<a name="l00250"></a>00250       descr += <span class="stringliteral">&quot;- name: {0}\n&quot;</span>.format(self.name)
<a name="l00251"></a>00251       <span class="keywordflow">if</span> self.<a class="code" href="classmultifit_1_1multifit_1_1BaseFittingModel.html#a8e90e611b0c143fbf6d4b914133a789b">func</a> <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:
<a name="l00252"></a>00252          descr += <span class="stringliteral">&quot;- func: {0}\n&quot;</span>.format(self.<a class="code" href="classmultifit_1_1multifit_1_1BaseFittingModel.html#a8e90e611b0c143fbf6d4b914133a789b">func</a>.__name__)
<a name="l00253"></a>00253       <span class="keywordflow">if</span> len(self.<a class="code" href="classmultifit_1_1multifit_1_1BaseFittingModel.html#aa04d4c52e254a949e7b42f4380493324">params</a>) &gt; 0:
<a name="l00254"></a>00254          descr += <span class="stringliteral">&quot;- params: {0}\n&quot;</span>.format([str(p) <span class="keywordflow">for</span> p <span class="keywordflow">in</span> self.<a class="code" href="classmultifit_1_1multifit_1_1BaseFittingModel.html#aa04d4c52e254a949e7b42f4380493324">params</a>])
<a name="l00255"></a>00255 
<a name="l00256"></a>00256       <span class="keywordflow">return</span> descr
<a name="l00257"></a>00257 
<a name="l00258"></a>00258    <span class="comment"># ~~~~~~~~~~~</span>
<a name="l00259"></a>00259    <span class="comment"># Properties </span>
<a name="l00260"></a>00260    <span class="comment"># ~~~~~~~~~~~   </span>
<a name="l00261"></a>00261 
<a name="l00262"></a>00262    <span class="comment"># --- Getters  </span>
<a name="l00263"></a>00263 
<a name="l00264"></a>00264    @property
<a name="l00265"></a><a class="code" href="classmultifit_1_1multifit_1_1BaseFittingModel.html#aa04d4c52e254a949e7b42f4380493324">00265</a>    <span class="keyword">def </span><a class="code" href="classmultifit_1_1multifit_1_1BaseFittingModel.html#aa04d4c52e254a949e7b42f4380493324">params</a>(self):
<a name="l00266"></a>00266       <span class="stringliteral">&quot;&quot;&quot;! @return the model parameters in the form of a list of ModelParam objects &quot;&quot;&quot;</span>
<a name="l00267"></a>00267       <span class="keywordflow">return</span> self.<a class="code" href="classmultifit_1_1multifit_1_1BaseFittingModel.html#a5e87d84f55bed11f61d475ea4bc10d97">get_params</a>()
<a name="l00268"></a>00268 
<a name="l00269"></a>00269    @property
<a name="l00270"></a><a class="code" href="classmultifit_1_1multifit_1_1BaseFittingModel.html#a8e90e611b0c143fbf6d4b914133a789b">00270</a>    <span class="keyword">def </span><a class="code" href="classmultifit_1_1multifit_1_1BaseFittingModel.html#a8e90e611b0c143fbf6d4b914133a789b">func</a>(self):
<a name="l00271"></a>00271       <span class="stringliteral">&quot;&quot;&quot;! @return the model function that builds a model given ModelParam objects &quot;&quot;&quot;</span>
<a name="l00272"></a>00272       <span class="keywordflow">return</span> self.<a class="code" href="classmultifit_1_1multifit_1_1BaseFittingModel.html#a6176beccb1a3bbaf3ce6bcde2b35f24e">get_func</a>()
<a name="l00273"></a>00273 
<a name="l00274"></a>00274    @property
<a name="l00275"></a><a class="code" href="classmultifit_1_1multifit_1_1BaseFittingModel.html#aaa3e32cf645161c83413d2bb223b9640">00275</a>    <span class="keyword">def </span><a class="code" href="classmultifit_1_1multifit_1_1BaseFittingModel.html#aaa3e32cf645161c83413d2bb223b9640" title="Return the dictionary for mapping catalog columns containing guess data (like SExtractor)">col_mapping_dico</a>(self):
<a name="l00276"></a>00276       <span class="stringliteral">&quot;&quot;&quot;! </span>
<a name="l00277"></a>00277 <span class="stringliteral">         Return the dictionary for mapping catalog columns containing guess data (like SExtractor) </span>
<a name="l00278"></a>00278 <span class="stringliteral">         @return the dictionary for mapping catalog columns containing guess data</span>
<a name="l00279"></a>00279 <span class="stringliteral">      &quot;&quot;&quot;</span>
<a name="l00280"></a>00280       <span class="keywordflow">return</span> self.<a class="code" href="classmultifit_1_1multifit_1_1BaseFittingModel.html#a6621e006ffc2f4d1e266ef9b29e4553d">_col_mapping_dico</a>
<a name="l00281"></a>00281 
<a name="l00282"></a>00282    @property
<a name="l00283"></a><a class="code" href="classmultifit_1_1multifit_1_1BaseFittingModel.html#a4cc0bff8efa8e31133849bf9ad025a38">00283</a>    <span class="keyword">def </span><a class="code" href="classmultifit_1_1multifit_1_1BaseFittingModel.html#a4cc0bff8efa8e31133849bf9ad025a38" title="Return whether fitted centroids should be checked or not.">check_centroids</a>(self):
<a name="l00284"></a>00284       <span class="stringliteral">&quot;&quot;&quot;! </span>
<a name="l00285"></a>00285 <span class="stringliteral">         Return whether fitted centroids should be checked or not</span>
<a name="l00286"></a>00286 <span class="stringliteral">         @return True if fitted centroids must be checked </span>
<a name="l00287"></a>00287 <span class="stringliteral">      &quot;&quot;&quot;</span>
<a name="l00288"></a>00288       <span class="keywordflow">return</span> self.<a class="code" href="classmultifit_1_1multifit_1_1BaseFittingModel.html#a777ccecd4ae5d43d339ea4cecb9a2345">_check_centroids</a>
<a name="l00289"></a>00289 
<a name="l00290"></a>00290    @property
<a name="l00291"></a><a class="code" href="classmultifit_1_1multifit_1_1BaseFittingModel.html#a276df2d569fce68685a38e4d9d472955">00291</a>    <span class="keyword">def </span><a class="code" href="classmultifit_1_1multifit_1_1BaseFittingModel.html#a276df2d569fce68685a38e4d9d472955" title="Return maximum allowed centroid shift if checking centroids.">max_centroid_shift</a>(self):
<a name="l00292"></a>00292       <span class="stringliteral">&quot;&quot;&quot;! </span>
<a name="l00293"></a>00293 <span class="stringliteral">         Return maximum allowed centroid shift if checking centroids</span>
<a name="l00294"></a>00294 <span class="stringliteral">         @return the maximum allowed centroid shift if checking centroids</span>
<a name="l00295"></a>00295 <span class="stringliteral">      &quot;&quot;&quot;</span>
<a name="l00296"></a>00296       <span class="keywordflow">return</span> self.<a class="code" href="classmultifit_1_1multifit_1_1BaseFittingModel.html#ab583cb73ab864640ed94deeaf70f9191">_max_centroid_shift</a>
<a name="l00297"></a>00297 
<a name="l00298"></a>00298    @property
<a name="l00299"></a><a class="code" href="classmultifit_1_1multifit_1_1BaseFittingModel.html#a2a71e94512954eff0fff12402d484f9e">00299</a>    <span class="keyword">def </span><a class="code" href="classmultifit_1_1multifit_1_1BaseFittingModel.html#a2a71e94512954eff0fff12402d484f9e" title="Return the callback handler function to notify a parameter value came outside the allowed range of va...">out_of_bound_handler</a>(self):
<a name="l00300"></a>00300       <span class="stringliteral">&quot;&quot;&quot;! </span>
<a name="l00301"></a>00301 <span class="stringliteral">         Return the callback handler function to notify a parameter value came outside the </span>
<a name="l00302"></a>00302 <span class="stringliteral">                 allowed range of varation specified by Param.guess_value</span>
<a name="l00303"></a>00303 <span class="stringliteral">         @return the callback handler function</span>
<a name="l00304"></a>00304 <span class="stringliteral">      &quot;&quot;&quot;</span>
<a name="l00305"></a>00305       <span class="comment">#print &quot;***MFIT: multifit, getting  out_of_bound_handler...&quot;</span>
<a name="l00306"></a>00306 
<a name="l00307"></a>00307       <span class="keywordflow">return</span> self.<a class="code" href="classmultifit_1_1multifit_1_1BaseFittingModel.html#aba056fd6c0b2166d2035494ae433385b">_out_of_bound_handler</a>
<a name="l00308"></a>00308 
<a name="l00309"></a>00309    @property
<a name="l00310"></a><a class="code" href="classmultifit_1_1multifit_1_1BaseFittingModel.html#a958ab2bd10c6461cd55b9e10cb95f0e7">00310</a>    <span class="keyword">def </span><a class="code" href="classmultifit_1_1multifit_1_1BaseFittingModel.html#a958ab2bd10c6461cd55b9e10cb95f0e7" title="Return the callback function to notify a numerical error that occurred while computing the parameter ...">numerical_error_handler</a>(self):
<a name="l00311"></a>00311       <span class="stringliteral">&quot;&quot;&quot;! </span>
<a name="l00312"></a>00312 <span class="stringliteral">         Return the callback function to notify a numerical error that occurred while computing </span>
<a name="l00313"></a>00313 <span class="stringliteral">                 the parameter value</span>
<a name="l00314"></a>00314 <span class="stringliteral">         @return the callback function to notify a numerical error</span>
<a name="l00315"></a>00315 <span class="stringliteral">      &quot;&quot;&quot;</span>
<a name="l00316"></a>00316 
<a name="l00317"></a>00317       <span class="comment">#print &quot;***MFIT: multifit, getting  numerical_error_handler...&quot;</span>
<a name="l00318"></a>00318 
<a name="l00319"></a>00319       <span class="keywordflow">return</span> self.<a class="code" href="classmultifit_1_1multifit_1_1BaseFittingModel.html#a17e70d1204fdbfb0750c844f6aee1bc4">_numerical_error_handler</a>
<a name="l00320"></a>00320 
<a name="l00321"></a>00321 
<a name="l00322"></a>00322    <span class="comment"># --- Setters  </span>
<a name="l00323"></a>00323 
<a name="l00324"></a>00324    @params.setter
<a name="l00325"></a><a class="code" href="classmultifit_1_1multifit_1_1BaseFittingModel.html#aa04d4c52e254a949e7b42f4380493324">00325</a>    <span class="keyword">def </span><a class="code" href="classmultifit_1_1multifit_1_1BaseFittingModel.html#aa04d4c52e254a949e7b42f4380493324">params</a>(self, params):
<a name="l00326"></a>00326       <span class="stringliteral">&quot;&quot;&quot;!  </span>
<a name="l00327"></a>00327 <span class="stringliteral">         Set the model parameters in the form of a list of ModelParam objects </span>
<a name="l00328"></a>00328 <span class="stringliteral">         @param params a list of ModelParam object</span>
<a name="l00329"></a>00329 <span class="stringliteral">      &quot;&quot;&quot;</span> 
<a name="l00330"></a>00330       self.<a class="code" href="classmultifit_1_1multifit_1_1BaseFittingModel.html#a594bd005366e12ff7135cbfa70a89834" title="Set the model parameters in the form of a list of ModelParam objects.">set_params</a>(params)
<a name="l00331"></a>00331 
<a name="l00332"></a>00332    @func.setter
<a name="l00333"></a><a class="code" href="classmultifit_1_1multifit_1_1BaseFittingModel.html#a8e90e611b0c143fbf6d4b914133a789b">00333</a>    <span class="keyword">def </span><a class="code" href="classmultifit_1_1multifit_1_1BaseFittingModel.html#a8e90e611b0c143fbf6d4b914133a789b">func</a>(self, func):
<a name="l00334"></a>00334       <span class="stringliteral">&quot;&quot;&quot;!  </span>
<a name="l00335"></a>00335 <span class="stringliteral">         Set the model function that builds a model given ModelParam objects </span>
<a name="l00336"></a>00336 <span class="stringliteral">         @param func the model function that builds a model given ModelParam objects</span>
<a name="l00337"></a>00337 <span class="stringliteral">      &quot;&quot;&quot;</span>
<a name="l00338"></a>00338       self.<a class="code" href="classmultifit_1_1multifit_1_1BaseFittingModel.html#ac4d3d3ff52e3db25af8b97f6581973c2">_func</a> = func
<a name="l00339"></a>00339 
<a name="l00340"></a>00340 
<a name="l00341"></a>00341    @out_of_bound_handler.setter
<a name="l00342"></a><a class="code" href="classmultifit_1_1multifit_1_1BaseFittingModel.html#a2a71e94512954eff0fff12402d484f9e">00342</a>    <span class="keyword">def </span><a class="code" href="classmultifit_1_1multifit_1_1BaseFittingModel.html#a2a71e94512954eff0fff12402d484f9e" title="Return the callback handler function to notify a parameter value came outside the allowed range of va...">out_of_bound_handler</a>(self, out_of_bound_handler):
<a name="l00343"></a>00343       <span class="stringliteral">&quot;&quot;&quot;! </span>
<a name="l00344"></a>00344 <span class="stringliteral">         Set the callback handler function to notify a parameter value came outside the </span>
<a name="l00345"></a>00345 <span class="stringliteral">             allowed range of varation specified by Param.guess_value       </span>
<a name="l00346"></a>00346 <span class="stringliteral">         @param out_of_bound_handler the out-of-bound callback function</span>
<a name="l00347"></a>00347 <span class="stringliteral">      &quot;&quot;&quot;</span>
<a name="l00348"></a>00348       self.<a class="code" href="classmultifit_1_1multifit_1_1BaseFittingModel.html#aba056fd6c0b2166d2035494ae433385b">_out_of_bound_handler</a> = out_of_bound_handler
<a name="l00349"></a>00349 
<a name="l00350"></a>00350 
<a name="l00351"></a>00351    @numerical_error_handler.setter
<a name="l00352"></a><a class="code" href="classmultifit_1_1multifit_1_1BaseFittingModel.html#a958ab2bd10c6461cd55b9e10cb95f0e7">00352</a>    <span class="keyword">def </span><a class="code" href="classmultifit_1_1multifit_1_1BaseFittingModel.html#a958ab2bd10c6461cd55b9e10cb95f0e7" title="Return the callback function to notify a numerical error that occurred while computing the parameter ...">numerical_error_handler</a>(self, numerical_error_handler):
<a name="l00353"></a>00353       <span class="stringliteral">&quot;&quot;&quot;! </span>
<a name="l00354"></a>00354 <span class="stringliteral">         Set the callback function to notify a numerical error that occurred while computing </span>
<a name="l00355"></a>00355 <span class="stringliteral">             the parameter value       </span>
<a name="l00356"></a>00356 <span class="stringliteral">         @param numerical_error_handler the numerical error callback function</span>
<a name="l00357"></a>00357 <span class="stringliteral">      &quot;&quot;&quot;</span>
<a name="l00358"></a>00358       self.<a class="code" href="classmultifit_1_1multifit_1_1BaseFittingModel.html#a17e70d1204fdbfb0750c844f6aee1bc4">_numerical_error_handler</a> = numerical_error_handler
<a name="l00359"></a>00359 
<a name="l00360"></a>00360 
<a name="l00361"></a>00361    <span class="comment"># ~~~~~~~~~~~~~~</span>
<a name="l00362"></a>00362    <span class="comment"># Public Methods </span>
<a name="l00363"></a>00363    <span class="comment"># ~~~~~~~~~~~~~~</span>
<a name="l00364"></a>00364 
<a name="l00365"></a>00365    <span class="comment"># -----------------------------------------------------------------------------------------------</span>
<a name="l00366"></a><a class="code" href="classmultifit_1_1multifit_1_1BaseFittingModel.html#a6176beccb1a3bbaf3ce6bcde2b35f24e">00366</a>    <span class="keyword">def </span><a class="code" href="classmultifit_1_1multifit_1_1BaseFittingModel.html#a6176beccb1a3bbaf3ce6bcde2b35f24e">get_func</a>(self):
<a name="l00367"></a>00367       <span class="stringliteral">&quot;&quot;&quot;! @return the model function that builds a model given ModelParam objects &quot;&quot;&quot;</span>
<a name="l00368"></a>00368       <span class="keywordflow">return</span> self.<a class="code" href="classmultifit_1_1multifit_1_1BaseFittingModel.html#ac4d3d3ff52e3db25af8b97f6581973c2">_func</a>
<a name="l00369"></a>00369 
<a name="l00370"></a>00370    <span class="comment"># -----------------------------------------------------------------------------------------------</span>
<a name="l00371"></a><a class="code" href="classmultifit_1_1multifit_1_1BaseFittingModel.html#a5e87d84f55bed11f61d475ea4bc10d97">00371</a>    <span class="keyword">def </span><a class="code" href="classmultifit_1_1multifit_1_1BaseFittingModel.html#a5e87d84f55bed11f61d475ea4bc10d97">get_params</a>(self):
<a name="l00372"></a>00372       <span class="stringliteral">&quot;&quot;&quot;! @return the model parameters in the form of a list of ModelParam objects  </span>
<a name="l00373"></a>00373 <span class="stringliteral">           (natural order &quot;&quot;&quot;</span>
<a name="l00374"></a>00374       <span class="keywordflow">return</span> self.<a class="code" href="classmultifit_1_1multifit_1_1BaseFittingModel.html#a607cc246fe9b940f84066acffe0f2a28">__params</a>
<a name="l00375"></a>00375 
<a name="l00376"></a>00376    <span class="comment"># -----------------------------------------------------------------------------------------------</span>
<a name="l00377"></a><a class="code" href="classmultifit_1_1multifit_1_1BaseFittingModel.html#a594bd005366e12ff7135cbfa70a89834">00377</a>    <span class="keyword">def </span><a class="code" href="classmultifit_1_1multifit_1_1BaseFittingModel.html#a594bd005366e12ff7135cbfa70a89834" title="Set the model parameters in the form of a list of ModelParam objects.">set_params</a>(self, params):
<a name="l00378"></a>00378       <span class="stringliteral">&quot;&quot;&quot;! </span>
<a name="l00379"></a>00379 <span class="stringliteral">         Set the model parameters in the form of a list of ModelParam objects  </span>
<a name="l00380"></a>00380 <span class="stringliteral">         @param params list of ModelParam objects</span>
<a name="l00381"></a>00381 <span class="stringliteral">      &quot;&quot;&quot;</span>
<a name="l00382"></a>00382       self.<a class="code" href="classmultifit_1_1multifit_1_1BaseFittingModel.html#a607cc246fe9b940f84066acffe0f2a28">__params</a> = params
<a name="l00383"></a>00383       <span class="keywordflow">for</span> p <span class="keywordflow">in</span> params:
<a name="l00384"></a>00384          self.<a class="code" href="classmultifit_1_1multifit_1_1BaseFittingModel.html#a49ef1a723ec06ac7919744f45bc155ab">__param_dico</a>[p.name] = p
<a name="l00385"></a>00385       self.<a class="code" href="classmultifit_1_1multifit_1_1BaseFittingModel.html#a37e5c7ebc5903b65abe6e3324417d90c">__param_names</a> = [p.name <span class="keywordflow">for</span> p <span class="keywordflow">in</span> params]
<a name="l00386"></a>00386 
<a name="l00387"></a>00387    <span class="comment"># -----------------------------------------------------------------------------------------------</span>
<a name="l00388"></a><a class="code" href="classmultifit_1_1multifit_1_1BaseFittingModel.html#a28c4b121896ef1949e7f0eacdf2ccb51">00388</a>    <span class="keyword">def </span><a class="code" href="classmultifit_1_1multifit_1_1BaseFittingModel.html#a28c4b121896ef1949e7f0eacdf2ccb51" title="Reset parameters from configuration data.">reset_params_from_config</a>(self):
<a name="l00389"></a>00389       <span class="stringliteral">&quot;&quot;&quot;! Reset parameters from configuration data &quot;&quot;&quot;</span>
<a name="l00390"></a>00390 
<a name="l00391"></a>00391       model_params = self.<a class="code" href="classmultifit_1_1multifit_1_1BaseFittingModel.html#aaa1f17dbba06b3550eb6730ff3df38ec">get_params_from_config</a>()
<a name="l00392"></a>00392       <span class="keywordflow">if</span> len(model_params) &gt; 0:
<a name="l00393"></a>00393          self.<a class="code" href="classmultifit_1_1multifit_1_1BaseFittingModel.html#a594bd005366e12ff7135cbfa70a89834" title="Set the model parameters in the form of a list of ModelParam objects.">set_params</a>(model_params)        <span class="comment"># set parameters based on configuration     </span>
<a name="l00394"></a>00394  
<a name="l00395"></a>00395    <span class="comment"># -----------------------------------------------------------------------------------------------</span>
<a name="l00396"></a><a class="code" href="classmultifit_1_1multifit_1_1BaseFittingModel.html#a2d4effe502cab1ac5830b2ff2d003fc1">00396</a>    <span class="keyword">def </span><a class="code" href="classmultifit_1_1multifit_1_1BaseFittingModel.html#a2d4effe502cab1ac5830b2ff2d003fc1">get_param_names</a>(self):
<a name="l00397"></a>00397       <span class="stringliteral">&quot;&quot;&quot;! @return the name of the model parameters (natural order) &quot;&quot;&quot;</span>
<a name="l00398"></a>00398       <span class="keywordflow">return</span> [p.name <span class="keywordflow">for</span> p <span class="keywordflow">in</span> self.<a class="code" href="classmultifit_1_1multifit_1_1BaseFittingModel.html#a607cc246fe9b940f84066acffe0f2a28">__params</a>]   
<a name="l00399"></a>00399 
<a name="l00400"></a>00400    <span class="comment"># -----------------------------------------------------------------------------------------------</span>
<a name="l00401"></a><a class="code" href="classmultifit_1_1multifit_1_1BaseFittingModel.html#a8da743145817a516d3fc8bcdc0bd31f3">00401</a>    <span class="keyword">def </span><a class="code" href="classmultifit_1_1multifit_1_1BaseFittingModel.html#a8da743145817a516d3fc8bcdc0bd31f3" title="Access a model parameter by name.">get_param_by_name</a>(self, name):
<a name="l00402"></a>00402       <span class="stringliteral">&quot;&quot;&quot;! </span>
<a name="l00403"></a>00403 <span class="stringliteral">         Access a model parameter by name </span>
<a name="l00404"></a>00404 <span class="stringliteral">         @param name the name of the parameter</span>
<a name="l00405"></a>00405 <span class="stringliteral">       &quot;&quot;&quot;</span>
<a name="l00406"></a>00406       <span class="keywordflow">return</span> self.<a class="code" href="classmultifit_1_1multifit_1_1BaseFittingModel.html#a49ef1a723ec06ac7919744f45bc155ab">__param_dico</a>.get(name)
<a name="l00407"></a>00407       
<a name="l00408"></a>00408    <span class="comment"># -----------------------------------------------------------------------------------------------</span>
<a name="l00409"></a><a class="code" href="classmultifit_1_1multifit_1_1BaseFittingModel.html#a2a26a075a94f1151c8c5d6b667ba0c01">00409</a>    <span class="keyword">def </span><a class="code" href="classmultifit_1_1multifit_1_1BaseFittingModel.html#a2a26a075a94f1151c8c5d6b667ba0c01" title="Register a parameter in the form of a ModelParam object.">add_param</a>(self, param):
<a name="l00410"></a>00410       <span class="stringliteral">&quot;&quot;&quot;!  </span>
<a name="l00411"></a>00411 <span class="stringliteral">         Register a parameter in the form of a ModelParam object</span>
<a name="l00412"></a>00412 <span class="stringliteral">         @param param a ModelParam object</span>
<a name="l00413"></a>00413 <span class="stringliteral">      &quot;&quot;&quot;</span>
<a name="l00414"></a>00414       self.<a class="code" href="classmultifit_1_1multifit_1_1BaseFittingModel.html#a607cc246fe9b940f84066acffe0f2a28">__params</a>.append(param)
<a name="l00415"></a>00415       self.<a class="code" href="classmultifit_1_1multifit_1_1BaseFittingModel.html#a49ef1a723ec06ac7919744f45bc155ab">__param_dico</a>[param.name] = param
<a name="l00416"></a>00416 
<a name="l00417"></a>00417    <span class="comment"># -----------------------------------------------------------------------------------------------</span>
<a name="l00418"></a><a class="code" href="classmultifit_1_1multifit_1_1BaseFittingModel.html#a8fea63ff646026d3eabb9b4d2c42f511">00418</a>    <span class="keyword">def </span><a class="code" href="classmultifit_1_1multifit_1_1BaseFittingModel.html#a8fea63ff646026d3eabb9b4d2c42f511" title="Register a parameter in the form of a Mo(&amp;#39;re&amp;#39;, [3.0, None], 0.0)delParam object.">del_param</a>(self, param):
<a name="l00419"></a>00419       <span class="stringliteral">&quot;&quot;&quot;! </span>
<a name="l00420"></a>00420 <span class="stringliteral">         Register a parameter in the form of a Mo(&#39;re&#39;, [3.0, None], 0.0)delParam object </span>
<a name="l00421"></a>00421 <span class="stringliteral">         @param param a ModelParameter object</span>
<a name="l00422"></a>00422 <span class="stringliteral">      &quot;&quot;&quot;</span>
<a name="l00423"></a>00423       self.<a class="code" href="classmultifit_1_1multifit_1_1BaseFittingModel.html#a607cc246fe9b940f84066acffe0f2a28">__params</a>.remove(param)
<a name="l00424"></a>00424       <span class="keywordflow">if</span> param <span class="keywordflow">in</span> self.<a class="code" href="classmultifit_1_1multifit_1_1BaseFittingModel.html#a49ef1a723ec06ac7919744f45bc155ab">__param_dico</a>:
<a name="l00425"></a>00425          del self.<a class="code" href="classmultifit_1_1multifit_1_1BaseFittingModel.html#a49ef1a723ec06ac7919744f45bc155ab">__param_dico</a>[param.name]
<a name="l00426"></a>00426 
<a name="l00427"></a>00427    <span class="comment"># -----------------------------------------------------------------------------------------------</span>
<a name="l00428"></a><a class="code" href="classmultifit_1_1multifit_1_1BaseFittingModel.html#aefc0c0f09deb22d71a93a06d322054a5">00428</a>    <span class="keyword">def </span><a class="code" href="classmultifit_1_1multifit_1_1BaseFittingModel.html#aefc0c0f09deb22d71a93a06d322054a5">get_param_values</a>(self):
<a name="l00429"></a>00429       <span class="stringliteral">&quot;&quot;&quot;! @return the parameter initial guess values &quot;&quot;&quot;</span>     
<a name="l00430"></a>00430       <span class="keywordflow">return</span> [p.guess_value <span class="keywordflow">for</span> p <span class="keywordflow">in</span> self.<a class="code" href="classmultifit_1_1multifit_1_1BaseFittingModel.html#a607cc246fe9b940f84066acffe0f2a28">__params</a>]
<a name="l00431"></a>00431 
<a name="l00432"></a>00432    <span class="comment"># -----------------------------------------------------------------------------------------------</span>
<a name="l00433"></a><a class="code" href="classmultifit_1_1multifit_1_1BaseFittingModel.html#a717d99cabb42419d48ec7fa52e4c6067">00433</a>    <span class="keyword">def </span><a class="code" href="classmultifit_1_1multifit_1_1BaseFittingModel.html#a717d99cabb42419d48ec7fa52e4c6067">get_bounds</a>(self):
<a name="l00434"></a>00434       <span class="stringliteral">&quot;&quot;&quot;! @return the parameter bounds in the form of a list [min, max] &quot;&quot;&quot;</span>     
<a name="l00435"></a>00435       <span class="keywordflow">return</span> [p.bounds <span class="keywordflow">for</span> p <span class="keywordflow">in</span> self.<a class="code" href="classmultifit_1_1multifit_1_1BaseFittingModel.html#a607cc246fe9b940f84066acffe0f2a28">__params</a>]
<a name="l00436"></a>00436 
<a name="l00437"></a>00437    <span class="comment"># -----------------------------------------------------------------------------------------------</span>
<a name="l00438"></a><a class="code" href="classmultifit_1_1multifit_1_1BaseFittingModel.html#a715f11cd7146fae106a989359422f4a8">00438</a>    <span class="keyword">def </span><a class="code" href="classmultifit_1_1multifit_1_1BaseFittingModel.html#a715f11cd7146fae106a989359422f4a8" title="Invoke a model function func with parameter list *params and arguments keywords **kwargs.">compute_model_func</a>(self, func, params, kwargs):
<a name="l00439"></a>00439       <span class="stringliteral">&quot;&quot;&quot;! </span>
<a name="l00440"></a>00440 <span class="stringliteral">         Invoke a model function @c func with parameter list @c *params and arguments keywords</span>
<a name="l00441"></a>00441 <span class="stringliteral">         @c **kwargs</span>
<a name="l00442"></a>00442 <span class="stringliteral"></span>
<a name="l00443"></a>00443 <span class="stringliteral">         @param func the model function that builds a model given the ModelParam objects</span>
<a name="l00444"></a>00444 <span class="stringliteral">         @param params a list of ModelParam objects</span>
<a name="l00445"></a>00445 <span class="stringliteral">         @param kwargs a dictionary of parameter (key, value) pairs  </span>
<a name="l00446"></a>00446 <span class="stringliteral">      &quot;&quot;&quot;</span>
<a name="l00447"></a>00447       <span class="keywordflow">return</span> func(*params, **kwargs) 
<a name="l00448"></a>00448 
<a name="l00449"></a>00449    <span class="comment"># -----------------------------------------------------------------------------------------------</span>
<a name="l00450"></a><a class="code" href="classmultifit_1_1multifit_1_1BaseFittingModel.html#aa5ba0d4ca84257dcfc5d74464f0144e6">00450</a>    <span class="keyword">def </span><a class="code" href="classmultifit_1_1multifit_1_1BaseFittingModel.html#aa5ba0d4ca84257dcfc5d74464f0144e6">get_model_func_from_config</a>(self):
<a name="l00451"></a>00451       <span class="stringliteral">&quot;&quot;&quot;! @return the model function from configuration &quot;&quot;&quot;</span>
<a name="l00452"></a>00452 
<a name="l00453"></a>00453       <span class="keywordflow">raise</span>(ModelFitter.FittingError(
<a name="l00454"></a>00454                 <span class="stringliteral">&quot;The method get_model_func_from_config() must be implemented in a derived class&quot;</span>))
<a name="l00455"></a>00455             
<a name="l00456"></a>00456    <span class="comment"># -----------------------------------------------------------------------------------------------</span>
<a name="l00457"></a><a class="code" href="classmultifit_1_1multifit_1_1BaseFittingModel.html#aaa1f17dbba06b3550eb6730ff3df38ec">00457</a>    <span class="keyword">def </span><a class="code" href="classmultifit_1_1multifit_1_1BaseFittingModel.html#aaa1f17dbba06b3550eb6730ff3df38ec">get_params_from_config</a>(self):
<a name="l00458"></a>00458       <span class="stringliteral">&quot;&quot;&quot;! @return the list of model parameters from the model configuration, assuming a key with</span>
<a name="l00459"></a>00459 <span class="stringliteral">          name @c &quot;params&quot; has been defined in a section called @c &quot;MODEL&quot;.</span>
<a name="l00460"></a>00460 <span class="stringliteral">      &quot;&quot;&quot;</span>
<a name="l00461"></a>00461       params = []
<a name="l00462"></a>00462 
<a name="l00463"></a>00463       <span class="comment"># --- Read default config to make sure all parameters get defined</span>
<a name="l00464"></a>00464       <span class="keywordflow">if</span> <span class="keywordflow">not</span> self.default_config <span class="keywordflow">is</span> <span class="keywordtype">None</span>: 
<a name="l00465"></a>00465          <span class="keywordflow">if</span> self.default_config.has_section(<span class="stringliteral">&quot;MODEL.PARAMS&quot;</span>):
<a name="l00466"></a>00466 
<a name="l00467"></a>00467             <span class="keywordflow">for</span> subsection <span class="keywordflow">in</span> self.default_config.get_subsections(<span class="stringliteral">&quot;MODEL.PARAMS&quot;</span>): 
<a name="l00468"></a>00468 
<a name="l00469"></a>00469                <span class="comment"># --- Check if subsection defined in the custom configuration, if not, take</span>
<a name="l00470"></a>00470                <span class="comment">#     the valeus in the default one  </span>
<a name="l00471"></a>00471                <span class="keywordflow">if</span> subsection <span class="keywordflow">in</span> self.config.get_subsections(<span class="stringliteral">&quot;MODEL.PARAMS&quot;</span>): 
<a name="l00472"></a>00472 
<a name="l00473"></a>00473                   <span class="comment"># --- Param name if not defined yet</span>
<a name="l00474"></a>00474                   name = self.config.get_as_string(<span class="stringliteral">&quot;name&quot;</span>, subsection)
<a name="l00475"></a>00475 
<a name="l00476"></a>00476                   <span class="comment"># --- Param value range</span>
<a name="l00477"></a>00477                   bounds = self.config.get_as_list(<span class="stringliteral">&quot;range&quot;</span>, subsection)
<a name="l00478"></a>00478                   <span class="keywordflow">if</span> bounds <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:
<a name="l00479"></a>00479 
<a name="l00480"></a>00480                      <span class="comment"># --- Param guess value</span>
<a name="l00481"></a>00481                      <span class="keywordflow">if</span> bounds[0] != bounds[1]: 
<a name="l00482"></a>00482                         guess_str = self.config.get_as_string(<span class="stringliteral">&quot;guess&quot;</span>, subsection)
<a name="l00483"></a>00483                         <span class="keywordflow">if</span> eval(guess_str) <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:
<a name="l00484"></a>00484                            guess = float(guess_str)
<a name="l00485"></a>00485                         <span class="keywordflow">else</span>:
<a name="l00486"></a>00486                            guess = <span class="keywordtype">None</span>    
<a name="l00487"></a>00487                      <span class="keywordflow">else</span>:
<a name="l00488"></a>00488                         <span class="keywordflow">if</span> <span class="keywordflow">not</span> bounds[0] <span class="keywordflow">is</span> <span class="keywordtype">None</span>:
<a name="l00489"></a>00489                            <span class="comment"># --- Identical bounds: fix guess value to that of the boundary</span>
<a name="l00490"></a>00490                            guess = bounds[0]     
<a name="l00491"></a>00491                            <span class="keywordflow">if</span> bounds[0] <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:
<a name="l00492"></a>00492                               <span class="keywordflow">print</span>(<span class="stringliteral">&quot;MultiFit *** Note *** parameter {0} &quot;</span> \
<a name="l00493"></a>00493                                     <span class="stringliteral">&quot;will remain constant during fitting with value {1:.2f}&quot;</span>.format(
<a name="l00494"></a>00494                                                                                   name, bounds[0]))
<a name="l00495"></a>00495                         <span class="keywordflow">else</span>:
<a name="l00496"></a>00496                            guess_str = self.config.get_as_string(<span class="stringliteral">&quot;guess&quot;</span>, subsection)
<a name="l00497"></a>00497                            <span class="keywordflow">if</span> eval(guess_str) <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:
<a name="l00498"></a>00498                               guess = float(guess_str)
<a name="l00499"></a>00499                            <span class="keywordflow">else</span>:
<a name="l00500"></a>00500                               guess = <span class="keywordtype">None</span>    
<a name="l00501"></a>00501 
<a name="l00502"></a>00502                <span class="keywordflow">else</span>:
<a name="l00503"></a>00503 
<a name="l00504"></a>00504                   <span class="comment"># --- Take the default definition from the default configuration</span>
<a name="l00505"></a>00505 
<a name="l00506"></a>00506                   <span class="comment"># --- Param name if not defined yet</span>
<a name="l00507"></a>00507                   name = self.default_config.get_as_string(<span class="stringliteral">&quot;name&quot;</span>, subsection)
<a name="l00508"></a>00508 
<a name="l00509"></a>00509                   <span class="comment"># --- Param value range</span>
<a name="l00510"></a>00510                   bounds = self.default_config.get_as_list(<span class="stringliteral">&quot;range&quot;</span>, subsection)
<a name="l00511"></a>00511                   <span class="keywordflow">if</span> bounds <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:
<a name="l00512"></a>00512 
<a name="l00513"></a>00513                      <span class="comment"># --- Param guess value</span>
<a name="l00514"></a>00514                      <span class="keywordflow">if</span> bounds[0] != bounds[1]: 
<a name="l00515"></a>00515                         guess_str = self.default_config.get_as_string(<span class="stringliteral">&quot;guess&quot;</span>, subsection)
<a name="l00516"></a>00516                         <span class="keywordflow">if</span> <span class="keywordflow">not</span> eval(guess_str) <span class="keywordflow">is</span> <span class="keywordtype">None</span>:
<a name="l00517"></a>00517                            guess = float(guess_str)
<a name="l00518"></a>00518                         <span class="keywordflow">else</span>:
<a name="l00519"></a>00519                            guess = <span class="keywordtype">None</span>    
<a name="l00520"></a>00520                      <span class="keywordflow">else</span>:
<a name="l00521"></a>00521                         <span class="comment"># --- Identical bounds: fix guess value to that of the boundary</span>
<a name="l00522"></a>00522                         guess = bounds[0]      
<a name="l00523"></a>00523                         <span class="keywordflow">if</span> guess <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:
<a name="l00524"></a>00524                            <span class="keywordflow">print</span>(<span class="stringliteral">&quot;MultiFit *** Note *** parameter {0} &quot;</span> \
<a name="l00525"></a>00525                                  <span class="stringliteral">&quot;will remain constant during fitting with value {1:.2f}&quot;</span>.format(
<a name="l00526"></a>00526                                                                                   name, bounds[0]))
<a name="l00527"></a>00527                params.append(ModelParam(name, guess, bounds)) 
<a name="l00528"></a>00528 
<a name="l00529"></a>00529       <span class="keywordflow">return</span> params
<a name="l00530"></a>00530 
<a name="l00531"></a>00531 
<a name="l00532"></a>00532    <span class="comment"># -----------------------------------------------------------------------------------------------</span>
<a name="l00533"></a><a class="code" href="classmultifit_1_1multifit_1_1BaseFittingModel.html#aaad1a40234dc6b2f2869cedd09a9906f">00533</a>    <span class="keyword">def </span><a class="code" href="classmultifit_1_1multifit_1_1BaseFittingModel.html#aaad1a40234dc6b2f2869cedd09a9906f" title="Check that the parameter values param_values are within the allowed bounds.">check_fitted_params</a>(self, (x, y), actual_galaxy_image, 
<a name="l00534"></a>00534                                          galaxy_info_dico, se_galaxy_info_dico, 
<a name="l00535"></a>00535                                          guess_values, param_values):
<a name="l00536"></a>00536 
<a name="l00537"></a>00537 
<a name="l00538"></a>00538       <span class="stringliteral">&quot;&quot;&quot;!</span>
<a name="l00539"></a>00539 <span class="stringliteral">         Check that the parameter values  @c param_values are within the allowed bounds</span>
<a name="l00540"></a>00540 <span class="stringliteral">         @param param_values values of the parameters to check against the bounds</span>
<a name="l00541"></a>00541 <span class="stringliteral">      &quot;&quot;&quot;</span>
<a name="l00542"></a>00542       
<a name="l00543"></a>00543       <span class="comment"># --- Check parameter ranges</span>
<a name="l00544"></a>00544       lower_valid = [ v &gt;= p.bounds[0] <span class="keywordflow">for</span> (p, v) <span class="keywordflow">in</span> zip(self.<a class="code" href="classmultifit_1_1multifit_1_1BaseFittingModel.html#aa04d4c52e254a949e7b42f4380493324">params</a>, param_values) \
<a name="l00545"></a>00545                                        <span class="keywordflow">if</span> p.bounds[0] <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span> ]
<a name="l00546"></a>00546       upper_valid = [ v &lt;= p.bounds[1] <span class="keywordflow">for</span> (p, v) <span class="keywordflow">in</span> zip(self.<a class="code" href="classmultifit_1_1multifit_1_1BaseFittingModel.html#aa04d4c52e254a949e7b42f4380493324">params</a>, param_values) \
<a name="l00547"></a>00547                                        <span class="keywordflow">if</span> p.bounds[1] <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span> ]
<a name="l00548"></a>00548       valid = numpy.logical_and(numpy.all(lower_valid), numpy.all(upper_valid))
<a name="l00549"></a>00549       <span class="keywordflow">if</span> valid:
<a name="l00550"></a>00550          <span class="keywordflow">if</span> self.<a class="code" href="classmultifit_1_1multifit_1_1BaseFittingModel.html#a4cc0bff8efa8e31133849bf9ad025a38" title="Return whether fitted centroids should be checked or not.">check_centroids</a>:
<a name="l00551"></a>00551             <span class="comment"># --- Check parameter centroid shifts</span>
<a name="l00552"></a>00552             x0 = (actual_galaxy_image.shape[1]-1.0)/2.0
<a name="l00553"></a>00553             y0 = (actual_galaxy_image.shape[0]-1.0)/2.0
<a name="l00554"></a>00554             xc = param_values[self.<a class="code" href="classmultifit_1_1multifit_1_1BaseFittingModel.html#a2d4effe502cab1ac5830b2ff2d003fc1">get_param_names</a>().index(<span class="stringliteral">&quot;xc&quot;</span>)]
<a name="l00555"></a>00555             yc = param_values[self.<a class="code" href="classmultifit_1_1multifit_1_1BaseFittingModel.html#a2d4effe502cab1ac5830b2ff2d003fc1">get_param_names</a>().index(<span class="stringliteral">&quot;yc&quot;</span>)]
<a name="l00556"></a>00556             valid = (math.fabs(xc - x0) &lt;= self.<a class="code" href="classmultifit_1_1multifit_1_1BaseFittingModel.html#a276df2d569fce68685a38e4d9d472955" title="Return maximum allowed centroid shift if checking centroids.">max_centroid_shift</a>) <span class="keywordflow">and</span> \
<a name="l00557"></a>00557                     (math.fabs(yc - y0) &lt;= self.<a class="code" href="classmultifit_1_1multifit_1_1BaseFittingModel.html#a276df2d569fce68685a38e4d9d472955" title="Return maximum allowed centroid shift if checking centroids.">max_centroid_shift</a>) 
<a name="l00558"></a>00558 
<a name="l00559"></a>00559       <span class="keywordflow">return</span> numpy.all(numpy.asarray(valid))
<a name="l00560"></a>00560 
<a name="l00561"></a>00561 
<a name="l00562"></a>00562    <span class="comment"># -----------------------------------------------------------------------------------------------</span>
<a name="l00563"></a><a class="code" href="classmultifit_1_1multifit_1_1BaseFittingModel.html#a42eabc5b2e9be92233a82653d9c91c51">00563</a>    <span class="keyword">def </span><a class="code" href="classmultifit_1_1multifit_1_1BaseFittingModel.html#a42eabc5b2e9be92233a82653d9c91c51" title="Pick a guess value for a parameter using the data of a galaxy catalog.">get_guess_value</a>(self, coords, galaxy_info_dico, se_galaxy_info_dico, 
<a name="l00564"></a>00564                               param_name, guess_col_name, default_value):
<a name="l00565"></a>00565       <span class="stringliteral">&quot;&quot;&quot;! Pick a guess value for a parameter using the data of a galaxy catalog &quot;&quot;&quot;</span>
<a name="l00566"></a>00566 
<a name="l00567"></a>00567       col_name = self.<a class="code" href="classmultifit_1_1multifit_1_1BaseFittingModel.html#aaa3e32cf645161c83413d2bb223b9640" title="Return the dictionary for mapping catalog columns containing guess data (like SExtractor)">col_mapping_dico</a>.get(guess_col_name, <span class="keywordtype">None</span>)
<a name="l00568"></a>00568       <span class="keywordflow">if</span> <span class="keywordflow">not</span> col_name <span class="keywordflow">is</span> <span class="keywordtype">None</span>:
<a name="l00569"></a>00569 
<a name="l00570"></a>00570          <span class="comment"># --- Determine source dictionary</span>
<a name="l00571"></a>00571          <span class="keywordflow">if</span> col_name.startswith(<span class="stringliteral">&quot;SE_&quot;</span>):
<a name="l00572"></a>00572             data_dico = se_galaxy_info_dico
<a name="l00573"></a>00573          <span class="keywordflow">else</span>:
<a name="l00574"></a>00574             data_dico = galaxy_info_dico
<a name="l00575"></a>00575 
<a name="l00576"></a>00576          <span class="keywordflow">try</span>:
<a name="l00577"></a>00577             guess_value = data_dico[col_name][coords]
<a name="l00578"></a>00578          <span class="keywordflow">except</span> Exception <span class="keyword">as</span> detail:
<a name="l00579"></a>00579             <span class="comment"># --- Could not get guess value =&gt; will abort the fitting process</span>
<a name="l00580"></a>00580             <span class="keywordflow">print</span>(<span class="stringliteral">&quot;*** Multifit: {0} model *** Could not retrieve guess value for {1} &quot;</span>\
<a name="l00581"></a>00581                   <span class="stringliteral">&quot;from guess_column {2} at coordinates {3} - {4}&quot;</span>.format(
<a name="l00582"></a>00582                      self.name, param_name, col_name, coords, detail))
<a name="l00583"></a>00583             <span class="keywordflow">print</span>(<span class="stringliteral">&quot;*** Multifit: {0} model *** Using &#39;{2}&#39; as default calue...&quot;</span>.format(
<a name="l00584"></a>00584                                                       self.name, param_name, default_value))
<a name="l00585"></a>00585             guess_value = default_value
<a name="l00586"></a>00586       <span class="keywordflow">else</span>:
<a name="l00587"></a>00587          <span class="keywordflow">print</span>(<span class="stringliteral">&quot;*** Multifit: {0} model *** No mappped guess column found for {1} - &quot;</span>\
<a name="l00588"></a>00588                <span class="stringliteral">&quot;Using &#39;{2}&#39; as default value...&quot;</span>.format(
<a name="l00589"></a>00589                                                    self.name, param_name, default_value))
<a name="l00590"></a>00590          guess_value = default_value
<a name="l00591"></a>00591 
<a name="l00592"></a>00592       <span class="keywordflow">return</span> guess_value 
<a name="l00593"></a>00593 
<a name="l00594"></a>00594 
<a name="l00595"></a>00595    <span class="comment"># ~~~~~~~~~~~~~~~</span>
<a name="l00596"></a>00596    <span class="comment"># Private Methods </span>
<a name="l00597"></a>00597    <span class="comment"># ~~~~~~~~~~~~~~~</span>
<a name="l00598"></a>00598 
<a name="l00599"></a>00599    <span class="comment"># -----------------------------------------------------------------------------------------------</span>
<a name="l00600"></a>00600    <span class="keyword">def </span>_import_module(self, module_name, module_dir):
<a name="l00601"></a>00601       <span class="stringliteral">&quot;&quot;&quot;! Find and load a module &lt;module_name&gt; from a directory &lt;module_dir&gt; &quot;&quot;&quot;</span>
<a name="l00602"></a>00602 
<a name="l00603"></a>00603       <span class="keywordflow">try</span>:
<a name="l00604"></a>00604 
<a name="l00605"></a>00605          file_obj, filename, data = imp.find_module(module_name, [module_dir])
<a name="l00606"></a>00606          imp.load_module(module_name, file_obj, filename, data)
<a name="l00607"></a>00607          <span class="keywordflow">return</span> imp.load_module(module_name, file_obj, filename, data)
<a name="l00608"></a>00608 
<a name="l00609"></a>00609       <span class="keywordflow">except</span>:
<a name="l00610"></a>00610          <span class="keywordflow">raise</span>(ModelFitter.FittingError(<span class="stringliteral">&quot;Could not load module {0}.&quot;</span>.format(module_name)))
<a name="l00611"></a>00611 
<a name="l00612"></a>00612 
<a name="l00613"></a>00613 
<a name="l00614"></a>00614 <span class="comment"># -------------------------------------------------------------------------------------------------</span>
<a name="l00615"></a><a class="code" href="classmultifit_1_1multifit_1_1BaseFittingMethod.html">00615</a> <span class="keyword">class </span><a class="code" href="classmultifit_1_1multifit_1_1BaseFittingMethod.html" title="Represent a fitting method/algorithm (like Levenberg-Marquardt)">BaseFittingMethod</a>(<a class="code" href="classmultifit_1_1multifit_1_1FittingElement.html" title="A fitting model or algorithm/method.">FittingElement</a>):
<a name="l00616"></a>00616 
<a name="l00617"></a>00617    <span class="stringliteral">&quot;&quot;&quot;! </span>
<a name="l00618"></a>00618 <span class="stringliteral">      Represent a fitting method/algorithm (like Levenberg-Marquardt) </span>
<a name="l00619"></a>00619 <span class="stringliteral">      @note this is the base class for all fitting methods</span>
<a name="l00620"></a>00620 <span class="stringliteral">   &quot;&quot;&quot;</span>
<a name="l00621"></a>00621 
<a name="l00622"></a><a class="code" href="classmultifit_1_1multifit_1_1BaseFittingMethod.html#a7fbac624b593ef5b763178e4185f84db">00622</a>    <span class="keyword">def </span><a class="code" href="classmultifit_1_1multifit_1_1BaseFittingMethod.html#a7fbac624b593ef5b763178e4185f84db" title="Construct a BaseFittingMethod object.">__init__</a>(self, name, 
<a name="l00623"></a>00623                       method_config_dir=<span class="keywordtype">None</span>, 
<a name="l00624"></a>00624                       fitting_config_dir=<span class="keywordtype">None</span>, 
<a name="l00625"></a>00625                       method_config_filename=<span class="keywordtype">None</span>):
<a name="l00626"></a>00626       <span class="stringliteral">&quot;&quot;&quot;!  </span>
<a name="l00627"></a>00627 <span class="stringliteral">         Construct a BaseFittingMethod object</span>
<a name="l00628"></a>00628 <span class="stringliteral">         @param name name of the method   </span>
<a name="l00629"></a>00629 <span class="stringliteral">         @param method_config_dir configuration directory of the method</span>
<a name="l00630"></a>00630 <span class="stringliteral">         @param fitting_config_dir directory of extra configuration files for the method</span>
<a name="l00631"></a>00631 <span class="stringliteral">         @param method_config_filename name of method configuration file</span>
<a name="l00632"></a>00632 <span class="stringliteral">      &quot;&quot;&quot;</span>
<a name="l00633"></a>00633 
<a name="l00634"></a>00634       FittingElement.__init__(self, name, method_config_dir, method_config_filename)
<a name="l00635"></a>00635 
<a name="l00636"></a>00636       self.<a class="code" href="classmultifit_1_1multifit_1_1BaseFittingMethod.html#a0706c67161cc527ec0c10126f8b8badf">_objective_func</a>  = <span class="keywordtype">None</span>     <span class="comment"># must be defined in the derived method class</span>
<a name="l00637"></a>00637       <span class="comment">#self._model_fitting_func = None  # f(model) component of the objective function</span>
<a name="l00638"></a>00638       self.<a class="code" href="classmultifit_1_1multifit_1_1BaseFittingMethod.html#aabb26444555b41799bbc729b344c0205">_fitting_options</a> = <span class="keywordtype">None</span>     <span class="comment"># options influencing fitting (maxfev, etc.)</span>
<a name="l00639"></a>00639       self.<a class="code" href="classmultifit_1_1multifit_1_1BaseFittingMethod.html#a363a95a1da54086a43a51ece94811e8c">_diag_options</a> = <span class="keywordtype">None</span>        <span class="comment"># diagnose directives (logging, stats, etc.)</span>
<a name="l00640"></a>00640 
<a name="l00641"></a>00641       self.<a class="code" href="classmultifit_1_1multifit_1_1BaseFittingMethod.html#aa94c823d7ee2d20fc803839d34865f56">_fitting_status</a> = BaseFittingMethod.FittingStatus(self) <span class="comment"># method-indep. fitting status</span>
<a name="l00642"></a>00642       self.<a class="code" href="classmultifit_1_1multifit_1_1BaseFittingMethod.html#a1a23774b64b2e02ea61dabcf366ae16b">_fitting_info</a>  = <span class="keywordtype">None</span>       <span class="comment"># method-specific fitting information (meta-data like maxfev)       </span>
<a name="l00643"></a>00643       self.<a class="code" href="classmultifit_1_1multifit_1_1BaseFittingMethod.html#a34c0daba9a632204cb5b435bff17a488">_fitting_data</a>  = <span class="keywordtype">None</span>       <span class="comment"># method-specific collected fitting data if any collected      </span>
<a name="l00644"></a>00644       self.<a class="code" href="classmultifit_1_1multifit_1_1BaseFittingMethod.html#a7a070a582295255802f612f3808d5e97">_fitting_stats</a> = <span class="keywordtype">None</span>       <span class="comment"># method-specific collected statistics if any computed      </span>
<a name="l00645"></a>00645       self.<a class="code" href="classmultifit_1_1multifit_1_1BaseFittingMethod.html#a6e4935adf6397c092d5f854d9aab2baf">_fitted_params</a> = <span class="keywordtype">None</span>       <span class="comment"># hold fitted value once fitting is complete</span>
<a name="l00646"></a>00646 
<a name="l00647"></a>00647       self.<a class="code" href="classmultifit_1_1multifit_1_1BaseFittingMethod.html#aaa8c6c2e10973bdee85b9eab46aec5bc">_fitting_config</a> = <span class="keywordtype">None</span>      <span class="comment"># fitting config object if any</span>
<a name="l00648"></a>00648 
<a name="l00649"></a>00649       self.<a class="code" href="classmultifit_1_1multifit_1_1BaseFittingMethod.html#a128ad6553eb7aa2b53542c27a5930298">_fitting_config_dir</a> = fitting_config_dir   <span class="comment"># fitting directives</span>
<a name="l00650"></a>00650 
<a name="l00651"></a><a class="code" href="classmultifit_1_1multifit_1_1BaseFittingMethod.html#a42b36418590c1b8bef4e5b2796e25d21">00651</a>    <span class="keyword">def </span><a class="code" href="classmultifit_1_1multifit_1_1BaseFittingMethod.html#a42b36418590c1b8bef4e5b2796e25d21" title="String representation of a BaseFittingMethod object.">__str__</a>(self):
<a name="l00652"></a>00652       <span class="stringliteral">&quot;&quot;&quot;! </span>
<a name="l00653"></a>00653 <span class="stringliteral">         String representation of a BaseFittingMethod object </span>
<a name="l00654"></a>00654 <span class="stringliteral">         @return a Python String describing the BaseFittingMethod object</span>
<a name="l00655"></a>00655 <span class="stringliteral">      &quot;&quot;&quot;</span>
<a name="l00656"></a>00656       descr = <span class="stringliteral">&quot;Fitting Method {0}:\n&quot;</span>.format(self.name)
<a name="l00657"></a>00657       <span class="keywordflow">if</span> self.<a class="code" href="classmultifit_1_1multifit_1_1BaseFittingMethod.html#af382ffad1056d0bf91f11acf5003a5ec">fitting_options</a> <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:
<a name="l00658"></a>00658          descr += str(self.<a class="code" href="classmultifit_1_1multifit_1_1BaseFittingMethod.html#af382ffad1056d0bf91f11acf5003a5ec">fitting_options</a>)
<a name="l00659"></a>00659       <span class="keywordflow">if</span> self.<a class="code" href="classmultifit_1_1multifit_1_1BaseFittingMethod.html#a2f632152d5a65d017b120f3c31e8fcdc">diag_options</a> <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:
<a name="l00660"></a>00660          descr += str(self.<a class="code" href="classmultifit_1_1multifit_1_1BaseFittingMethod.html#a2f632152d5a65d017b120f3c31e8fcdc">diag_options</a>)
<a name="l00661"></a>00661       descr += str(self.<a class="code" href="classmultifit_1_1multifit_1_1BaseFittingMethod.html#a55c4ca0fd7c2cc9e2c491ab7820ffea4">fitting_status</a>)
<a name="l00662"></a>00662       <span class="keywordflow">if</span> self.<a class="code" href="classmultifit_1_1multifit_1_1BaseFittingMethod.html#a8a77647eed3ea668faef7ea5b68ff92a">fitting_info</a> <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:
<a name="l00663"></a>00663          descr += str(self.<a class="code" href="classmultifit_1_1multifit_1_1BaseFittingMethod.html#a8a77647eed3ea668faef7ea5b68ff92a">fitting_info</a>)
<a name="l00664"></a>00664       <span class="keywordflow">if</span> self.<a class="code" href="classmultifit_1_1multifit_1_1BaseFittingMethod.html#ab6293b03fd6bb41644f2d5cb09c474a1">fitted_params</a> <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:
<a name="l00665"></a>00665         descr += str(self.<a class="code" href="classmultifit_1_1multifit_1_1BaseFittingMethod.html#ab6293b03fd6bb41644f2d5cb09c474a1">fitted_params</a>)
<a name="l00666"></a>00666 
<a name="l00667"></a>00667       <span class="keywordflow">return</span> descr
<a name="l00668"></a>00668 
<a name="l00669"></a>00669    <span class="comment"># ~~~~~~~~~~~</span>
<a name="l00670"></a>00670    <span class="comment"># Properties </span>
<a name="l00671"></a>00671    <span class="comment"># ~~~~~~~~~~~</span>
<a name="l00672"></a>00672    
<a name="l00673"></a>00673    <span class="comment"># --- Getters </span>
<a name="l00674"></a>00674 
<a name="l00675"></a>00675    @property
<a name="l00676"></a><a class="code" href="classmultifit_1_1multifit_1_1BaseFittingMethod.html#a5d1ce4444d782647aba7688d7354a44d">00676</a>    <span class="keyword">def </span><a class="code" href="classmultifit_1_1multifit_1_1BaseFittingMethod.html#a5d1ce4444d782647aba7688d7354a44d">fitting_config</a>(self):
<a name="l00677"></a>00677       <span class="stringliteral">&quot;&quot;&quot;! @return configuration object for fitting &quot;&quot;&quot;</span>
<a name="l00678"></a>00678       <span class="keywordflow">return</span> self.<a class="code" href="classmultifit_1_1multifit_1_1BaseFittingMethod.html#aaa8c6c2e10973bdee85b9eab46aec5bc">_fitting_config</a>
<a name="l00679"></a>00679 
<a name="l00680"></a>00680    @property
<a name="l00681"></a><a class="code" href="classmultifit_1_1multifit_1_1BaseFittingMethod.html#ae9795a59a57b02339238f79a20561038">00681</a>    <span class="keyword">def </span><a class="code" href="classmultifit_1_1multifit_1_1BaseFittingMethod.html#ae9795a59a57b02339238f79a20561038">fitting_config_dir</a>(self):
<a name="l00682"></a>00682       <span class="stringliteral">&quot;&quot;&quot;! @return configuration directory for fitting &quot;&quot;&quot;</span>
<a name="l00683"></a>00683       <span class="keywordflow">return</span> self.<a class="code" href="classmultifit_1_1multifit_1_1BaseFittingMethod.html#a128ad6553eb7aa2b53542c27a5930298">_fitting_config_dir</a>
<a name="l00684"></a>00684 
<a name="l00685"></a>00685    @property
<a name="l00686"></a><a class="code" href="classmultifit_1_1multifit_1_1BaseFittingMethod.html#ac69202404cae574cc31c4ca1065532cc">00686</a>    <span class="keyword">def </span><a class="code" href="classmultifit_1_1multifit_1_1BaseFittingMethod.html#ac69202404cae574cc31c4ca1065532cc">objective_func</a>(self):
<a name="l00687"></a>00687       <span class="stringliteral">&quot;&quot;&quot;! @return the objective function used for fitting &quot;&quot;&quot;</span>
<a name="l00688"></a>00688       <span class="keywordflow">return</span> self.<a class="code" href="classmultifit_1_1multifit_1_1BaseFittingMethod.html#a0706c67161cc527ec0c10126f8b8badf">_objective_func</a>
<a name="l00689"></a>00689 
<a name="l00690"></a>00690 <span class="comment">#   @property</span>
<a name="l00691"></a>00691 <span class="comment">#   def model_fitting_func(self):</span>
<a name="l00692"></a>00692 <span class="comment">#      &quot;&quot;&quot;! @return the model fiting function &quot;&quot;&quot;</span>
<a name="l00693"></a>00693 <span class="comment">#      return self._model_fitting_func</span>
<a name="l00694"></a>00694 
<a name="l00695"></a>00695    @property
<a name="l00696"></a><a class="code" href="classmultifit_1_1multifit_1_1BaseFittingMethod.html#ab6293b03fd6bb41644f2d5cb09c474a1">00696</a>    <span class="keyword">def </span><a class="code" href="classmultifit_1_1multifit_1_1BaseFittingMethod.html#ab6293b03fd6bb41644f2d5cb09c474a1">fitted_params</a>(self):
<a name="l00697"></a>00697       <span class="stringliteral">&quot;&quot;&quot;! @return the fitted values or all parameters in the form of a list of ModelParam objects,</span>
<a name="l00698"></a>00698 <span class="stringliteral">           once fitting is complete &quot;&quot;&quot;</span>
<a name="l00699"></a>00699       <span class="keywordflow">return</span> self.<a class="code" href="classmultifit_1_1multifit_1_1BaseFittingMethod.html#a6e4935adf6397c092d5f854d9aab2baf">_fitted_params</a>
<a name="l00700"></a>00700 
<a name="l00701"></a>00701    @property
<a name="l00702"></a><a class="code" href="classmultifit_1_1multifit_1_1BaseFittingMethod.html#af382ffad1056d0bf91f11acf5003a5ec">00702</a>    <span class="keyword">def </span><a class="code" href="classmultifit_1_1multifit_1_1BaseFittingMethod.html#af382ffad1056d0bf91f11acf5003a5ec">fitting_options</a>(self):
<a name="l00703"></a>00703       <span class="stringliteral">&quot;&quot;&quot;! </span>
<a name="l00704"></a>00704 <span class="stringliteral">         @return fiting options influencing the fitting process (max iterations, accuracy, etc.)</span>
<a name="l00705"></a>00705 <span class="stringliteral">         @note the returned objects will be derived from BaseFittingOptions, the exact type</span>
<a name="l00706"></a>00706 <span class="stringliteral">               depending on the fitting method chosen  </span>
<a name="l00707"></a>00707 <span class="stringliteral">      &quot;&quot;&quot;</span>
<a name="l00708"></a>00708       <span class="keywordflow">return</span> self.<a class="code" href="classmultifit_1_1multifit_1_1BaseFittingMethod.html#aabb26444555b41799bbc729b344c0205">_fitting_options</a>
<a name="l00709"></a>00709 
<a name="l00710"></a>00710    @property
<a name="l00711"></a><a class="code" href="classmultifit_1_1multifit_1_1BaseFittingMethod.html#a2f632152d5a65d017b120f3c31e8fcdc">00711</a>    <span class="keyword">def </span><a class="code" href="classmultifit_1_1multifit_1_1BaseFittingMethod.html#a2f632152d5a65d017b120f3c31e8fcdc">diag_options</a>(self):
<a name="l00712"></a>00712       <span class="stringliteral">&quot;&quot;&quot;! @return diagnostic options for monitoring the fitting process (logs, stats, etc.). &quot;&quot;&quot;</span>
<a name="l00713"></a>00713       <span class="keywordflow">return</span> self.<a class="code" href="classmultifit_1_1multifit_1_1BaseFittingMethod.html#a363a95a1da54086a43a51ece94811e8c">_diag_options</a>
<a name="l00714"></a>00714 
<a name="l00715"></a>00715    @property
<a name="l00716"></a><a class="code" href="classmultifit_1_1multifit_1_1BaseFittingMethod.html#a55c4ca0fd7c2cc9e2c491ab7820ffea4">00716</a>    <span class="keyword">def </span><a class="code" href="classmultifit_1_1multifit_1_1BaseFittingMethod.html#a55c4ca0fd7c2cc9e2c491ab7820ffea4">fitting_status</a>(self):
<a name="l00717"></a>00717       <span class="stringliteral">&quot;&quot;&quot;! </span>
<a name="l00718"></a>00718 <span class="stringliteral">         @return the status of the fitting process (errno, messages, warnings) in the form of a </span>
<a name="l00719"></a>00719 <span class="stringliteral">                 BaseFittingMethod.FittingStatus object</span>
<a name="l00720"></a>00720 <span class="stringliteral">      &quot;&quot;&quot;</span>
<a name="l00721"></a>00721       <span class="keywordflow">return</span> self.<a class="code" href="classmultifit_1_1multifit_1_1BaseFittingMethod.html#aa94c823d7ee2d20fc803839d34865f56">_fitting_status</a>
<a name="l00722"></a>00722 
<a name="l00723"></a>00723    @property
<a name="l00724"></a><a class="code" href="classmultifit_1_1multifit_1_1BaseFittingMethod.html#a8a77647eed3ea668faef7ea5b68ff92a">00724</a>    <span class="keyword">def </span><a class="code" href="classmultifit_1_1multifit_1_1BaseFittingMethod.html#a8a77647eed3ea668faef7ea5b68ff92a">fitting_info</a>(self):
<a name="l00725"></a>00725       <span class="stringliteral">&quot;&quot;&quot;! @return method-specific fitting information in the form of an object derived from </span>
<a name="l00726"></a>00726 <span class="stringliteral">           BaseFittingInfo object once fitting is completed</span>
<a name="l00727"></a>00727 <span class="stringliteral">         @note the exact class of the object returned will depend on the chosen method </span>
<a name="l00728"></a>00728 <span class="stringliteral">      &quot;&quot;&quot;</span>
<a name="l00729"></a>00729       <span class="keywordflow">return</span> self.<a class="code" href="classmultifit_1_1multifit_1_1BaseFittingMethod.html#a1a23774b64b2e02ea61dabcf366ae16b">_fitting_info</a>
<a name="l00730"></a>00730 
<a name="l00731"></a>00731    @property
<a name="l00732"></a><a class="code" href="classmultifit_1_1multifit_1_1BaseFittingMethod.html#ae28296d789c4d791cb4c14aa25eac77e">00732</a>    <span class="keyword">def </span><a class="code" href="classmultifit_1_1multifit_1_1BaseFittingMethod.html#ae28296d789c4d791cb4c14aa25eac77e">fitting_data</a>(self):
<a name="l00733"></a>00733       <span class="stringliteral">&quot;&quot;&quot;! </span>
<a name="l00734"></a>00734 <span class="stringliteral">         @return method-specific collected fitting data if any, collected once fitting is </span>
<a name="l00735"></a>00735 <span class="stringliteral">                complete </span>
<a name="l00736"></a>00736 <span class="stringliteral">         @note return @c None if no fitting data available   </span>
<a name="l00737"></a>00737 <span class="stringliteral">      &quot;&quot;&quot;</span>
<a name="l00738"></a>00738       <span class="keywordflow">return</span> self.<a class="code" href="classmultifit_1_1multifit_1_1BaseFittingMethod.html#a34c0daba9a632204cb5b435bff17a488">_fitting_data</a>
<a name="l00739"></a>00739 
<a name="l00740"></a>00740    @property
<a name="l00741"></a><a class="code" href="classmultifit_1_1multifit_1_1BaseFittingMethod.html#a7ba6241ab0d28a56dbcecccb3d95049c">00741</a>    <span class="keyword">def </span><a class="code" href="classmultifit_1_1multifit_1_1BaseFittingMethod.html#a7ba6241ab0d28a56dbcecccb3d95049c">fitting_stats</a>(self):
<a name="l00742"></a>00742       <span class="stringliteral">&quot;&quot;&quot;! </span>
<a name="l00743"></a>00743 <span class="stringliteral">         @return method-specific collected statistics if any, computed once fitting is completed. </span>
<a name="l00744"></a>00744 <span class="stringliteral">         @note return @c None if no fitting statistics available   </span>
<a name="l00745"></a>00745 <span class="stringliteral">      &quot;&quot;&quot;</span>
<a name="l00746"></a>00746       <span class="keywordflow">return</span> self.<a class="code" href="classmultifit_1_1multifit_1_1BaseFittingMethod.html#a7a070a582295255802f612f3808d5e97">_fitting_stats</a>
<a name="l00747"></a>00747 
<a name="l00748"></a>00748    <span class="comment"># --- Setters  </span>
<a name="l00749"></a>00749 
<a name="l00750"></a>00750    @fitting_config.setter
<a name="l00751"></a><a class="code" href="classmultifit_1_1multifit_1_1BaseFittingMethod.html#a5d1ce4444d782647aba7688d7354a44d">00751</a>    <span class="keyword">def </span><a class="code" href="classmultifit_1_1multifit_1_1BaseFittingMethod.html#a5d1ce4444d782647aba7688d7354a44d">fitting_config</a>(self, fitting_config):
<a name="l00752"></a>00752       <span class="stringliteral">&quot;&quot;&quot;! </span>
<a name="l00753"></a>00753 <span class="stringliteral">         Set the configuration object for fitting</span>
<a name="l00754"></a>00754 <span class="stringliteral">         @param fitting_config configuration object for fitting</span>
<a name="l00755"></a>00755 <span class="stringliteral">      &quot;&quot;&quot;</span>
<a name="l00756"></a>00756       self.<a class="code" href="classmultifit_1_1multifit_1_1BaseFittingMethod.html#aaa8c6c2e10973bdee85b9eab46aec5bc">_fitting_config</a> = fitting_config
<a name="l00757"></a>00757 
<a name="l00758"></a>00758    @objective_func.setter
<a name="l00759"></a><a class="code" href="classmultifit_1_1multifit_1_1BaseFittingMethod.html#ac69202404cae574cc31c4ca1065532cc">00759</a>    <span class="keyword">def </span><a class="code" href="classmultifit_1_1multifit_1_1BaseFittingMethod.html#ac69202404cae574cc31c4ca1065532cc">objective_func</a>(self, objective_func):
<a name="l00760"></a>00760       <span class="stringliteral">&quot;&quot;&quot;! </span>
<a name="l00761"></a>00761 <span class="stringliteral">         Set the objective function used for fitting</span>
<a name="l00762"></a>00762 <span class="stringliteral">         @param objective_func objective function</span>
<a name="l00763"></a>00763 <span class="stringliteral">      &quot;&quot;&quot;</span>
<a name="l00764"></a>00764       self.<a class="code" href="classmultifit_1_1multifit_1_1BaseFittingMethod.html#a0706c67161cc527ec0c10126f8b8badf">_objective_func</a> = objective_func
<a name="l00765"></a>00765 
<a name="l00766"></a>00766 <span class="comment">#   @model_fitting_func.setter</span>
<a name="l00767"></a>00767 <span class="comment">#   def model_fitting_func(self, model_fitting_func):</span>
<a name="l00768"></a>00768 <span class="comment">#      &quot;&quot;&quot;! </span>
<a name="l00769"></a>00769 <span class="comment">#         Set the model_fitting function</span>
<a name="l00770"></a>00770 <span class="comment">#         @param model_fitting_func model_fitting function</span>
<a name="l00771"></a>00771 <span class="comment">#      &quot;&quot;&quot;</span>
<a name="l00772"></a>00772 <span class="comment">#      self._model_fitting_func = model_fitting_func</span>
<a name="l00773"></a>00773 
<a name="l00774"></a>00774    @fitting_status.setter
<a name="l00775"></a><a class="code" href="classmultifit_1_1multifit_1_1BaseFittingMethod.html#a55c4ca0fd7c2cc9e2c491ab7820ffea4">00775</a>    <span class="keyword">def </span><a class="code" href="classmultifit_1_1multifit_1_1BaseFittingMethod.html#a55c4ca0fd7c2cc9e2c491ab7820ffea4">fitting_status</a>(self, fitting_status):
<a name="l00776"></a>00776       <span class="stringliteral">&quot;&quot;&quot;! </span>
<a name="l00777"></a>00777 <span class="stringliteral">         Set the status of the fitting process (errno, messages, warnings) in the form of a </span>
<a name="l00778"></a>00778 <span class="stringliteral">         BaseFittingMethod.FittingStatus object </span>
<a name="l00779"></a>00779 <span class="stringliteral">         @param fitting_status a BaseFittingMethod.FittingStatus object</span>
<a name="l00780"></a>00780 <span class="stringliteral">      &quot;&quot;&quot;</span>
<a name="l00781"></a>00781       self.<a class="code" href="classmultifit_1_1multifit_1_1BaseFittingMethod.html#aa94c823d7ee2d20fc803839d34865f56">_fitting_status</a> = fitting_status
<a name="l00782"></a>00782 
<a name="l00783"></a>00783    @fitting_options.setter
<a name="l00784"></a><a class="code" href="classmultifit_1_1multifit_1_1BaseFittingMethod.html#af382ffad1056d0bf91f11acf5003a5ec">00784</a>    <span class="keyword">def </span><a class="code" href="classmultifit_1_1multifit_1_1BaseFittingMethod.html#af382ffad1056d0bf91f11acf5003a5ec">fitting_options</a>(self, fitting_options):
<a name="l00785"></a>00785       <span class="stringliteral">&quot;&quot;&quot;!  </span>
<a name="l00786"></a>00786 <span class="stringliteral">         Set fitting options influencing the fitting process (max iterations, accuracy, etc.)</span>
<a name="l00787"></a>00787 <span class="stringliteral">         @param fitting_options  </span>
<a name="l00788"></a>00788 <span class="stringliteral">         @note the parameter must of a type derived from BaseFittingOption </span>
<a name="l00789"></a>00789 <span class="stringliteral">      &quot;&quot;&quot;</span> 
<a name="l00790"></a>00790       self.<a class="code" href="classmultifit_1_1multifit_1_1BaseFittingMethod.html#aabb26444555b41799bbc729b344c0205">_fitting_options</a> = fitting_options
<a name="l00791"></a>00791 
<a name="l00792"></a>00792    @diag_options.setter
<a name="l00793"></a><a class="code" href="classmultifit_1_1multifit_1_1BaseFittingMethod.html#a2f632152d5a65d017b120f3c31e8fcdc">00793</a>    <span class="keyword">def </span><a class="code" href="classmultifit_1_1multifit_1_1BaseFittingMethod.html#a2f632152d5a65d017b120f3c31e8fcdc">diag_options</a>(self, diag_options):
<a name="l00794"></a>00794       <span class="stringliteral">&quot;&quot;&quot;! </span>
<a name="l00795"></a>00795 <span class="stringliteral">         Set diagnostic options for monitoring the fitting process (logs, stats, etc.) </span>
<a name="l00796"></a>00796 <span class="stringliteral">         @param diag_options  </span>
<a name="l00797"></a>00797 <span class="stringliteral">         @note the parameter must of a type derived from BaseDiagOption </span>
<a name="l00798"></a>00798 <span class="stringliteral">      &quot;&quot;&quot;</span>
<a name="l00799"></a>00799       self.<a class="code" href="classmultifit_1_1multifit_1_1BaseFittingMethod.html#a363a95a1da54086a43a51ece94811e8c">_diag_options</a> = diag_options
<a name="l00800"></a>00800 
<a name="l00801"></a>00801 
<a name="l00802"></a>00802    <span class="comment"># ~~~~~~~~~~~~~</span>
<a name="l00803"></a>00803    <span class="comment"># Inner Classes</span>
<a name="l00804"></a>00804    <span class="comment"># ~~~~~~~~~~~~~</span>
<a name="l00805"></a>00805    
<a name="l00806"></a>00806    <span class="comment"># -----------------------------------------------------------------------------------------------</span>
<a name="l00807"></a><a class="code" href="classmultifit_1_1multifit_1_1BaseFittingMethod_1_1FittingStatus.html">00807</a>    <span class="keyword">class </span><a class="code" href="classmultifit_1_1multifit_1_1BaseFittingMethod_1_1FittingStatus.html" title="Hold the status of a fitting operation.">FittingStatus</a>(<a class="code" href="classobject.html">object</a>):
<a name="l00808"></a>00808       <span class="stringliteral">&quot;&quot;&quot;! </span>
<a name="l00809"></a>00809 <span class="stringliteral">         Hold the status of a fitting operation</span>
<a name="l00810"></a>00810 <span class="stringliteral">         @note this class is independent of the fitting method selected</span>
<a name="l00811"></a>00811 <span class="stringliteral">      &quot;&quot;&quot;</span>
<a name="l00812"></a>00812 
<a name="l00813"></a><a class="code" href="classmultifit_1_1multifit_1_1BaseFittingMethod_1_1FittingStatus.html#a1b975835a36b973539e95d873fd5ec8a">00813</a>       <span class="keyword">def </span><a class="code" href="classmultifit_1_1multifit_1_1BaseFittingMethod_1_1FittingStatus.html#a1b975835a36b973539e95d873fd5ec8a" title="Construct a FittingStatus object for a given method.">__init__</a>(self, method, residuals=None, errno=0, msg=&quot;&quot;, warn_msgs=[], custom_data=None):
<a name="l00814"></a>00814          <span class="stringliteral">&quot;&quot;&quot;!</span>
<a name="l00815"></a>00815 <span class="stringliteral">            Construct a FittingStatus object for a given method</span>
<a name="l00816"></a>00816 <span class="stringliteral">            @param method an object derived from BaseFittingMethod</span>
<a name="l00817"></a>00817 <span class="stringliteral">            @param residuals fitting residuals</span>
<a name="l00818"></a>00818 <span class="stringliteral">            @param errno an error code</span>
<a name="l00819"></a>00819 <span class="stringliteral">            @param msg an error message </span>
<a name="l00820"></a>00820 <span class="stringliteral">            @param warn_msgs a list of warning messages</span>
<a name="l00821"></a>00821 <span class="stringliteral">            @param custom_data custom data</span>
<a name="l00822"></a><a class="code" href="classmultifit_1_1multifit_1_1BaseFittingMethod_1_1FittingStatus.html#a4319bd200aa12de9ac84cfde28d5f309">00822</a> <span class="stringliteral">            @note @c errno will be negative in case of error, zero otherwise</span>
<a name="l00823"></a>00823 <span class="stringliteral">         &quot;&quot;&quot;</span>
<a name="l00824"></a>00824 
<a name="l00825"></a>00825          self.<a class="code" href="classmultifit_1_1multifit_1_1BaseFittingMethod_1_1FittingStatus.html#af572c41061747861101a242491747245">_method</a> = method   <span class="comment"># owner method instance </span>
<a name="l00826"></a>00826          self.<a class="code" href="classmultifit_1_1multifit_1_1BaseFittingMethod_1_1FittingStatus.html#ac37e5e037e6f7ac50cd0948dee1d98d5">_errno</a> = errno     <span class="comment"># execution status: 0: success, &lt; 0:failure</span>
<a name="l00827"></a>00827          self.<a class="code" href="classmultifit_1_1multifit_1_1BaseFittingMethod_1_1FittingStatus.html#a6be538e8bfc85a47d2ef0ee4fad62f52">_msg</a> = msg         <span class="comment"># execution status message</span>
<a name="l00828"></a>00828          self.<a class="code" href="classmultifit_1_1multifit_1_1BaseFittingMethod_1_1FittingStatus.html#afaab2d6ba10bd6ed21e95fdaef25c93b">_warn_msgs</a> = warn_msgs      <span class="comment"># warning messages, if any</span>
<a name="l00829"></a>00829          self.<a class="code" href="classmultifit_1_1multifit_1_1BaseFittingMethod_1_1FittingStatus.html#a4319bd200aa12de9ac84cfde28d5f309">residuals</a> = residuals       <span class="comment"># flattened residuals</span>
<a name="l00830"></a>00830          self.<a class="code" href="classmultifit_1_1multifit_1_1BaseFittingMethod_1_1FittingStatus.html#ac88ed21c27a9ffc883bdc7e1ec1b0897">_custom_data</a> = custom_data  <span class="comment"># custom data, if any </span>
<a name="l00831"></a>00831 
<a name="l00832"></a><a class="code" href="classmultifit_1_1multifit_1_1BaseFittingMethod_1_1FittingStatus.html#ab74905812a55340fc6b01c4c342fdde8">00832</a>       <span class="keyword">def </span><a class="code" href="classmultifit_1_1multifit_1_1BaseFittingMethod_1_1FittingStatus.html#ab74905812a55340fc6b01c4c342fdde8" title="String representation of a FittingStatus object.">__str__</a>(self):
<a name="l00833"></a>00833          <span class="stringliteral">&quot;&quot;&quot;! </span>
<a name="l00834"></a>00834 <span class="stringliteral">            String representation of a FittingStatus object </span>
<a name="l00835"></a>00835 <span class="stringliteral">            @return a Python String describing the FittingStatus object</span>
<a name="l00836"></a>00836 <span class="stringliteral">         &quot;&quot;&quot;</span>
<a name="l00837"></a>00837          descr = <span class="stringliteral">&quot;Fitting Status for {0}:\n&quot;</span>.format(self.<a class="code" href="classmultifit_1_1multifit_1_1BaseFittingMethod_1_1FittingStatus.html#a68ab9be5d6c865eb8e53f63e647a99c1">method</a>.name)
<a name="l00838"></a>00838          descr += <span class="stringliteral">&quot;- errno: {0}\n&quot;</span>.format(self.<a class="code" href="classmultifit_1_1multifit_1_1BaseFittingMethod_1_1FittingStatus.html#a0809930f7783d7b9528bab5ded4dc8db" title="Returns the fitting execution error code.">errno</a>)
<a name="l00839"></a>00839          descr += <span class="stringliteral">&quot;- message: {0}\n&quot;</span>.format(self.<a class="code" href="classmultifit_1_1multifit_1_1BaseFittingMethod_1_1FittingStatus.html#abc00ced1c70952491ac6ac6188f46530">msg</a>)
<a name="l00840"></a>00840          descr += <span class="stringliteral">&quot;- warnings: {0}\n&quot;</span>.format([w <span class="keywordflow">for</span> w <span class="keywordflow">in</span> self.<a class="code" href="classmultifit_1_1multifit_1_1BaseFittingMethod_1_1FittingStatus.html#a9979599318b5395e3e1de2d38730df43">warn_msgs</a>])
<a name="l00841"></a>00841          descr += <span class="stringliteral">&quot;- residuals: {0}\n&quot;</span>.format(self.<a class="code" href="classmultifit_1_1multifit_1_1BaseFittingMethod_1_1FittingStatus.html#a4319bd200aa12de9ac84cfde28d5f309">residuals</a>)
<a name="l00842"></a>00842          <span class="keywordflow">if</span> self.<a class="code" href="classmultifit_1_1multifit_1_1BaseFittingMethod_1_1FittingStatus.html#a13c09d5be07d6a791ec8dc9ddc81488c">custom_data</a> <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:
<a name="l00843"></a>00843             descr += <span class="stringliteral">&quot;- custom data: {0}\n&quot;</span>.format(self.<a class="code" href="classmultifit_1_1multifit_1_1BaseFittingMethod_1_1FittingStatus.html#a13c09d5be07d6a791ec8dc9ddc81488c">custom_data</a>)
<a name="l00844"></a>00844          <span class="keywordflow">else</span>:
<a name="l00845"></a>00845             descr += <span class="stringliteral">&quot;- custom data: None\n&quot;</span> 
<a name="l00846"></a>00846          <span class="keywordflow">return</span> descr
<a name="l00847"></a>00847 
<a name="l00848"></a>00848       <span class="comment"># ~~~~~~~~~~~</span>
<a name="l00849"></a>00849       <span class="comment"># Properties</span>
<a name="l00850"></a>00850       <span class="comment"># ~~~~~~~~~~~</span>
<a name="l00851"></a>00851 
<a name="l00852"></a>00852       <span class="comment"># --- Getters ---</span>
<a name="l00853"></a>00853 
<a name="l00854"></a>00854       @property
<a name="l00855"></a><a class="code" href="classmultifit_1_1multifit_1_1BaseFittingMethod_1_1FittingStatus.html#a68ab9be5d6c865eb8e53f63e647a99c1">00855</a>       <span class="keyword">def </span><a class="code" href="classmultifit_1_1multifit_1_1BaseFittingMethod_1_1FittingStatus.html#a68ab9be5d6c865eb8e53f63e647a99c1">method</a>(self):
<a name="l00856"></a>00856          <span class="stringliteral">&quot;&quot;&quot;! @return the associated method instance as an object derived from BaseFittingMethod &quot;&quot;&quot;</span>
<a name="l00857"></a>00857          <span class="keywordflow">return</span> self.<a class="code" href="classmultifit_1_1multifit_1_1BaseFittingMethod_1_1FittingStatus.html#af572c41061747861101a242491747245">_method</a>
<a name="l00858"></a>00858 
<a name="l00859"></a>00859       @property
<a name="l00860"></a><a class="code" href="classmultifit_1_1multifit_1_1BaseFittingMethod_1_1FittingStatus.html#a0809930f7783d7b9528bab5ded4dc8db">00860</a>       <span class="keyword">def </span><a class="code" href="classmultifit_1_1multifit_1_1BaseFittingMethod_1_1FittingStatus.html#a0809930f7783d7b9528bab5ded4dc8db" title="Returns the fitting execution error code.">errno</a>(self):
<a name="l00861"></a>00861          <span class="stringliteral">&quot;&quot;&quot;! </span>
<a name="l00862"></a>00862 <span class="stringliteral">            Returns the fitting execution error code</span>
<a name="l00863"></a>00863 <span class="stringliteral">            @retval &quot; &gt;= 0&quot; success</span>
<a name="l00864"></a>00864 <span class="stringliteral">            @retval &quot;&lt; 0&quot; failure</span>
<a name="l00865"></a>00865 <span class="stringliteral">         &quot;&quot;&quot;</span>
<a name="l00866"></a>00866          <span class="keywordflow">return</span> self.<a class="code" href="classmultifit_1_1multifit_1_1BaseFittingMethod_1_1FittingStatus.html#ac37e5e037e6f7ac50cd0948dee1d98d5">_errno</a>
<a name="l00867"></a>00867 
<a name="l00868"></a>00868       @property
<a name="l00869"></a><a class="code" href="classmultifit_1_1multifit_1_1BaseFittingMethod_1_1FittingStatus.html#abc00ced1c70952491ac6ac6188f46530">00869</a>       <span class="keyword">def </span><a class="code" href="classmultifit_1_1multifit_1_1BaseFittingMethod_1_1FittingStatus.html#abc00ced1c70952491ac6ac6188f46530">msg</a>(self):
<a name="l00870"></a>00870          <span class="stringliteral">&quot;&quot;&quot;! </span>
<a name="l00871"></a>00871 <span class="stringliteral">            @return the fitting execution status message </span>
<a name="l00872"></a>00872 <span class="stringliteral">         &quot;&quot;&quot;</span>
<a name="l00873"></a>00873          <span class="keywordflow">return</span> self.<a class="code" href="classmultifit_1_1multifit_1_1BaseFittingMethod_1_1FittingStatus.html#a6be538e8bfc85a47d2ef0ee4fad62f52">_msg</a>
<a name="l00874"></a>00874 
<a name="l00875"></a>00875       @property
<a name="l00876"></a><a class="code" href="classmultifit_1_1multifit_1_1BaseFittingMethod_1_1FittingStatus.html#a9979599318b5395e3e1de2d38730df43">00876</a>       <span class="keyword">def </span><a class="code" href="classmultifit_1_1multifit_1_1BaseFittingMethod_1_1FittingStatus.html#a9979599318b5395e3e1de2d38730df43">warn_msgs</a>(self):
<a name="l00877"></a>00877          <span class="stringliteral">&quot;&quot;&quot;! @return a list of warning messages (may be empty) &quot;&quot;&quot;</span>
<a name="l00878"></a>00878          <span class="keywordflow">return</span> self.<a class="code" href="classmultifit_1_1multifit_1_1BaseFittingMethod_1_1FittingStatus.html#afaab2d6ba10bd6ed21e95fdaef25c93b">_warn_msgs</a>
<a name="l00879"></a>00879 
<a name="l00880"></a>00880       @property
<a name="l00881"></a><a class="code" href="classmultifit_1_1multifit_1_1BaseFittingMethod_1_1FittingStatus.html#a13c09d5be07d6a791ec8dc9ddc81488c">00881</a>       <span class="keyword">def </span><a class="code" href="classmultifit_1_1multifit_1_1BaseFittingMethod_1_1FittingStatus.html#a13c09d5be07d6a791ec8dc9ddc81488c">custom_data</a>(self):
<a name="l00882"></a>00882          <span class="stringliteral">&quot;&quot;&quot;! @return custom data collected by model fiting if any, may be None &quot;&quot;&quot;</span>
<a name="l00883"></a>00883          <span class="keywordflow">return</span> self.<a class="code" href="classmultifit_1_1multifit_1_1BaseFittingMethod_1_1FittingStatus.html#ac88ed21c27a9ffc883bdc7e1ec1b0897">_custom_data</a>
<a name="l00884"></a>00884 
<a name="l00885"></a>00885 
<a name="l00886"></a>00886       <span class="comment"># --- Setters ---</span>
<a name="l00887"></a>00887 
<a name="l00888"></a>00888       @errno.setter
<a name="l00889"></a><a class="code" href="classmultifit_1_1multifit_1_1BaseFittingMethod_1_1FittingStatus.html#a0809930f7783d7b9528bab5ded4dc8db">00889</a>       <span class="keyword">def </span><a class="code" href="classmultifit_1_1multifit_1_1BaseFittingMethod_1_1FittingStatus.html#a0809930f7783d7b9528bab5ded4dc8db" title="Returns the fitting execution error code.">errno</a>(self, errno):
<a name="l00890"></a>00890          <span class="stringliteral">&quot;&quot;&quot;! </span>
<a name="l00891"></a>00891 <span class="stringliteral">            Returns the fitting execution error code </span>
<a name="l00892"></a>00892 <span class="stringliteral">            param errno error code (0 for success, &lt; 0 for failure)</span>
<a name="l00893"></a>00893 <span class="stringliteral">         &quot;&quot;&quot;</span>   
<a name="l00894"></a>00894          self.<a class="code" href="classmultifit_1_1multifit_1_1BaseFittingMethod_1_1FittingStatus.html#ac37e5e037e6f7ac50cd0948dee1d98d5">_errno</a> = errno
<a name="l00895"></a>00895 
<a name="l00896"></a>00896       @msg.setter
<a name="l00897"></a><a class="code" href="classmultifit_1_1multifit_1_1BaseFittingMethod_1_1FittingStatus.html#abc00ced1c70952491ac6ac6188f46530">00897</a>       <span class="keyword">def </span><a class="code" href="classmultifit_1_1multifit_1_1BaseFittingMethod_1_1FittingStatus.html#abc00ced1c70952491ac6ac6188f46530">msg</a>(self, msg):
<a name="l00898"></a>00898          <span class="stringliteral">&quot;&quot;&quot;! Set the fitting execution status message &quot;&quot;&quot;</span>
<a name="l00899"></a>00899          self.<a class="code" href="classmultifit_1_1multifit_1_1BaseFittingMethod_1_1FittingStatus.html#a6be538e8bfc85a47d2ef0ee4fad62f52">_msg</a> = msg
<a name="l00900"></a>00900 
<a name="l00901"></a>00901       @warn_msgs.setter
<a name="l00902"></a><a class="code" href="classmultifit_1_1multifit_1_1BaseFittingMethod_1_1FittingStatus.html#a9979599318b5395e3e1de2d38730df43">00902</a>       <span class="keyword">def </span><a class="code" href="classmultifit_1_1multifit_1_1BaseFittingMethod_1_1FittingStatus.html#a9979599318b5395e3e1de2d38730df43">warn_msgs</a>(self, warn_msgs):
<a name="l00903"></a>00903          <span class="stringliteral">&quot;&quot;&quot;! Set the fitting execution status warning message &quot;&quot;&quot;</span>
<a name="l00904"></a>00904          self.<a class="code" href="classmultifit_1_1multifit_1_1BaseFittingMethod_1_1FittingStatus.html#afaab2d6ba10bd6ed21e95fdaef25c93b">_warn_msgs</a> = warn_msgs
<a name="l00905"></a>00905 
<a name="l00906"></a>00906       @custom_data.setter
<a name="l00907"></a><a class="code" href="classmultifit_1_1multifit_1_1BaseFittingMethod_1_1FittingStatus.html#a13c09d5be07d6a791ec8dc9ddc81488c">00907</a>       <span class="keyword">def </span><a class="code" href="classmultifit_1_1multifit_1_1BaseFittingMethod_1_1FittingStatus.html#a13c09d5be07d6a791ec8dc9ddc81488c">custom_data</a>(self, custom_data):
<a name="l00908"></a>00908          <span class="stringliteral">&quot;&quot;&quot;! Set custom data collected by model fiting if any &quot;&quot;&quot;</span>
<a name="l00909"></a>00909          self.<a class="code" href="classmultifit_1_1multifit_1_1BaseFittingMethod_1_1FittingStatus.html#ac88ed21c27a9ffc883bdc7e1ec1b0897">_custom_data</a> = custom_data
<a name="l00910"></a>00910 
<a name="l00911"></a>00911       <span class="comment"># ~~~~~~~~~~~~~~~</span>
<a name="l00912"></a>00912       <span class="comment"># Public methods</span>
<a name="l00913"></a>00913       <span class="comment"># ~~~~~~~~~~~~~~~</span>
<a name="l00914"></a>00914 
<a name="l00915"></a>00915       <span class="comment"># --------------------------------------------------------------------------------------------</span>
<a name="l00916"></a><a class="code" href="classmultifit_1_1multifit_1_1BaseFittingMethod_1_1FittingStatus.html#a4e921224281b7db0d0051689d657eeee">00916</a>       <span class="keyword">def </span><a class="code" href="classmultifit_1_1multifit_1_1BaseFittingMethod_1_1FittingStatus.html#a4e921224281b7db0d0051689d657eeee" title="Add a warning message.">add_warn_msg</a>(self, warn_msg):
<a name="l00917"></a>00917          <span class="stringliteral">&quot;&quot;&quot;! </span>
<a name="l00918"></a>00918 <span class="stringliteral">            Add a warning message </span>
<a name="l00919"></a>00919 <span class="stringliteral">            @param warn_msg the warning message to add </span>
<a name="l00920"></a>00920 <span class="stringliteral">         &quot;&quot;&quot;</span>
<a name="l00921"></a>00921          <span class="keywordflow">if</span> <span class="keywordflow">not</span> warn_msg <span class="keywordflow">in</span> self.<a class="code" href="classmultifit_1_1multifit_1_1BaseFittingMethod_1_1FittingStatus.html#afaab2d6ba10bd6ed21e95fdaef25c93b">_warn_msgs</a>:
<a name="l00922"></a>00922             self.<a class="code" href="classmultifit_1_1multifit_1_1BaseFittingMethod_1_1FittingStatus.html#afaab2d6ba10bd6ed21e95fdaef25c93b">_warn_msgs</a>.append(warn_msg)         
<a name="l00923"></a>00923 
<a name="l00924"></a>00924       <span class="comment"># --------------------------------------------------------------------------------------------</span>
<a name="l00925"></a><a class="code" href="classmultifit_1_1multifit_1_1BaseFittingMethod_1_1FittingStatus.html#a57d7fcd1a25fef49676159a0abbc1f5e">00925</a>       <span class="keyword">def </span><a class="code" href="classmultifit_1_1multifit_1_1BaseFittingMethod_1_1FittingStatus.html#a57d7fcd1a25fef49676159a0abbc1f5e" title="Set the fititng status of the fit.">set_fitting_status</a>(self, errno, msg):
<a name="l00926"></a>00926          <span class="stringliteral">&quot;&quot;&quot;! </span>
<a name="l00927"></a>00927 <span class="stringliteral">            Set the fititng status of the fit</span>
<a name="l00928"></a>00928 <span class="stringliteral">            @param errno an error code</span>
<a name="l00929"></a>00929 <span class="stringliteral">            @param msg an error message </span>
<a name="l00930"></a>00930 <span class="stringliteral">         &quot;&quot;&quot;</span>
<a name="l00931"></a>00931          self.<a class="code" href="classmultifit_1_1multifit_1_1BaseFittingMethod_1_1FittingStatus.html#ac37e5e037e6f7ac50cd0948dee1d98d5">_errno</a> = errno
<a name="l00932"></a>00932          self.<a class="code" href="classmultifit_1_1multifit_1_1BaseFittingMethod_1_1FittingStatus.html#a6be538e8bfc85a47d2ef0ee4fad62f52">_msg</a> = msg
<a name="l00933"></a>00933 
<a name="l00934"></a>00934       <span class="comment"># --------------------------------------------------------------------------------------------</span>
<a name="l00935"></a><a class="code" href="classmultifit_1_1multifit_1_1BaseFittingMethod_1_1FittingStatus.html#a344142e810bd8e45f228511314b7b70b">00935</a>       <span class="keyword">def </span><a class="code" href="classmultifit_1_1multifit_1_1BaseFittingMethod_1_1FittingStatus.html#a344142e810bd8e45f228511314b7b70b" title="Clear the fitting status.">clear</a>(self):
<a name="l00936"></a>00936          <span class="stringliteral">&quot;&quot;&quot;! Clear the fitting status &quot;&quot;&quot;</span>
<a name="l00937"></a>00937          self.<a class="code" href="classmultifit_1_1multifit_1_1BaseFittingMethod_1_1FittingStatus.html#ac37e5e037e6f7ac50cd0948dee1d98d5">_errno</a> = 0         <span class="comment"># execution status:  &gt;= 0: success, &lt; 0:failure</span>
<a name="l00938"></a>00938          self.<a class="code" href="classmultifit_1_1multifit_1_1BaseFittingMethod_1_1FittingStatus.html#a6be538e8bfc85a47d2ef0ee4fad62f52">_msg</a> = <span class="stringliteral">&#39;&#39;</span>          <span class="comment"># execution status message</span>
<a name="l00939"></a>00939          del self.<a class="code" href="classmultifit_1_1multifit_1_1BaseFittingMethod_1_1FittingStatus.html#afaab2d6ba10bd6ed21e95fdaef25c93b">_warn_msgs</a>[:]  <span class="comment"># list of warning messages (may be empty)</span>
<a name="l00940"></a>00940 
<a name="l00941"></a>00941 
<a name="l00942"></a>00942 
<a name="l00943"></a>00943 <span class="comment"># --------------------------------------------------------------------------------------------------</span>
<a name="l00944"></a><a class="code" href="classmultifit_1_1multifit_1_1BaseFittingOptions.html">00944</a> <span class="keyword">class </span><a class="code" href="classmultifit_1_1multifit_1_1BaseFittingOptions.html" title="Represents options that may influence the fitting process.">BaseFittingOptions</a>(<a class="code" href="classobject.html">object</a>):
<a name="l00945"></a>00945 
<a name="l00946"></a>00946    <span class="stringliteral">&quot;&quot;&quot;! </span>
<a name="l00947"></a>00947 <span class="stringliteral">      Represents options that may influence the fitting process </span>
<a name="l00948"></a>00948 <span class="stringliteral">      @note this is the base class for all method-specific fitting options</span>
<a name="l00949"></a>00949 <span class="stringliteral">   &quot;&quot;&quot;</span>
<a name="l00950"></a>00950 
<a name="l00951"></a><a class="code" href="classmultifit_1_1multifit_1_1BaseFittingOptions.html#ad625888e5c753fc706aa3e017039abf2">00951</a>    <span class="keyword">def </span><a class="code" href="classmultifit_1_1multifit_1_1BaseFittingOptions.html#ad625888e5c753fc706aa3e017039abf2" title="Construct a BaseFittingOptions object.">__init__</a>(self, method):
<a name="l00952"></a>00952       <span class="stringliteral">&quot;&quot;&quot;! Construct a BaseFittingOptions object &quot;&quot;&quot;</span>
<a name="l00953"></a>00953       self.<a class="code" href="classmultifit_1_1multifit_1_1BaseFittingOptions.html#a6d62358d97fc85612ef80e72307d06e5">_method</a> = method    <span class="comment"># the fitting method</span>
<a name="l00954"></a>00954 
<a name="l00955"></a><a class="code" href="classmultifit_1_1multifit_1_1BaseFittingOptions.html#ac18f27991590c0ff88f7f497ce40312f">00955</a>    <span class="keyword">def </span><a class="code" href="classmultifit_1_1multifit_1_1BaseFittingOptions.html#ac18f27991590c0ff88f7f497ce40312f" title="String representation of a BaseFittingOptions object.">__str__</a>(self):
<a name="l00956"></a>00956       <span class="stringliteral">&quot;&quot;&quot;!</span>
<a name="l00957"></a>00957 <span class="stringliteral">         String representation of a BaseFittingOptions object </span>
<a name="l00958"></a>00958 <span class="stringliteral">         @return a Python String describing the BaseFittingOptions object</span>
<a name="l00959"></a>00959 <span class="stringliteral">      &quot;&quot;&quot;</span>
<a name="l00960"></a>00960       <span class="keywordflow">return</span> <span class="stringliteral">&quot;Fitting options for {0}:\n&quot;</span>.format(self.<a class="code" href="classmultifit_1_1multifit_1_1BaseFittingOptions.html#ab68d1c68cb7588634b3d46d6d34c5922">method</a>.name)
<a name="l00961"></a>00961 
<a name="l00962"></a>00962    <span class="comment"># ~~~~~~~~~~~</span>
<a name="l00963"></a>00963    <span class="comment"># Properties</span>
<a name="l00964"></a>00964    <span class="comment"># ~~~~~~~~~~~</span>
<a name="l00965"></a>00965 
<a name="l00966"></a>00966    @property
<a name="l00967"></a><a class="code" href="classmultifit_1_1multifit_1_1BaseFittingOptions.html#ab68d1c68cb7588634b3d46d6d34c5922">00967</a>    <span class="keyword">def </span><a class="code" href="classmultifit_1_1multifit_1_1BaseFittingOptions.html#ab68d1c68cb7588634b3d46d6d34c5922">method</a>(self):
<a name="l00968"></a>00968       <span class="stringliteral">&quot;&quot;&quot;! @return the associated fitting method as an object derived from BaseFittingMethod &quot;&quot;&quot;</span>
<a name="l00969"></a>00969       <span class="keywordflow">return</span> self.<a class="code" href="classmultifit_1_1multifit_1_1BaseFittingOptions.html#a6d62358d97fc85612ef80e72307d06e5">_method</a>
<a name="l00970"></a>00970 
<a name="l00971"></a>00971 
<a name="l00972"></a>00972 <span class="comment"># --------------------------------------------------------------------------------------------------</span>
<a name="l00973"></a><a class="code" href="classmultifit_1_1multifit_1_1BaseDiagOptions.html">00973</a> <span class="keyword">class </span><a class="code" href="classmultifit_1_1multifit_1_1BaseDiagOptions.html" title="Represents options that can be used to collect diagonotic information about the fitting process...">BaseDiagOptions</a>(<a class="code" href="classobject.html">object</a>):
<a name="l00974"></a>00974 
<a name="l00975"></a>00975    <span class="stringliteral">&quot;&quot;&quot;! </span>
<a name="l00976"></a>00976 <span class="stringliteral">      Represents options that can be used to collect diagonotic information about the fitting </span>
<a name="l00977"></a>00977 <span class="stringliteral">      process </span>
<a name="l00978"></a>00978 <span class="stringliteral">      @note this is the base class for all method-specific diagnostic options</span>
<a name="l00979"></a>00979 <span class="stringliteral">   &quot;&quot;&quot;</span>
<a name="l00980"></a><a class="code" href="classmultifit_1_1multifit_1_1BaseDiagOptions.html#a65569f8f44ee29c9702237e951cb9c68">00980</a>    <span class="keyword">def </span><a class="code" href="classmultifit_1_1multifit_1_1BaseDiagOptions.html#a65569f8f44ee29c9702237e951cb9c68" title="Construct a BaseDiagOptions object.">__init__</a>(self, method):
<a name="l00981"></a>00981       <span class="stringliteral">&quot;&quot;&quot;! Construct a BaseDiagOptions object &quot;&quot;&quot;</span>
<a name="l00982"></a>00982       self.<a class="code" href="classmultifit_1_1multifit_1_1BaseDiagOptions.html#a40d7604cba5673bc1a893b593a730ea9">_method</a> = method    <span class="comment"># the fitting method</span>
<a name="l00983"></a>00983 
<a name="l00984"></a>00984       <span class="comment"># --- Private properties  </span>
<a name="l00985"></a>00985       self.<a class="code" href="classmultifit_1_1multifit_1_1BaseDiagOptions.html#a3c4a7c35f19037babeccab9ef99625ad">_diag_flags</a> = 0
<a name="l00986"></a>00986       self.<a class="code" href="classmultifit_1_1multifit_1_1BaseDiagOptions.html#ade40e60195cc7055226f022c0f7219e7">_base_output_dir</a> = <span class="stringliteral">&quot;.&quot;</span>        
<a name="l00987"></a>00987       self.<a class="code" href="classmultifit_1_1multifit_1_1BaseDiagOptions.html#a91901cad5c28a432a31a91a59609f9fc">_log_output_dir</a>   = os.path.join(self.<a class="code" href="classmultifit_1_1multifit_1_1BaseDiagOptions.html#ade40e60195cc7055226f022c0f7219e7">_base_output_dir</a>, <span class="stringliteral">&#39;logs&#39;</span>)
<a name="l00988"></a>00988       self.<a class="code" href="classmultifit_1_1multifit_1_1BaseDiagOptions.html#aabd935ea1f1b73f3839ae9cd2656a3a6">_plot_output_dir</a>  = os.path.join(self.<a class="code" href="classmultifit_1_1multifit_1_1BaseDiagOptions.html#ade40e60195cc7055226f022c0f7219e7">_base_output_dir</a>, <span class="stringliteral">&#39;plots&#39;</span>)
<a name="l00989"></a>00989       self.<a class="code" href="classmultifit_1_1multifit_1_1BaseDiagOptions.html#a045358c147962a1ba5bf447d4cd2d235">_stats_output_dir</a> = os.path.join(self.<a class="code" href="classmultifit_1_1multifit_1_1BaseDiagOptions.html#ade40e60195cc7055226f022c0f7219e7">_base_output_dir</a>, <span class="stringliteral">&#39;stats&#39;</span>)
<a name="l00990"></a>00990       self.<a class="code" href="classmultifit_1_1multifit_1_1BaseDiagOptions.html#ac2d9791bd06bb52b66bd34f504b15756">_log_file_name</a> = <span class="stringliteral">&#39;multifit_{0}.log&#39;</span>.format(time.strftime(<span class="stringliteral">&quot;%d.%m.%y_%H.%M.%S&quot;</span>,
<a name="l00991"></a>00991                                                       time.localtime()))
<a name="l00992"></a>00992 
<a name="l00993"></a>00993       <span class="comment"># --- Initialize options from configuration</span>
<a name="l00994"></a>00994       self.<a class="code" href="classmultifit_1_1multifit_1_1BaseDiagOptions.html#acf5ccd48efd330ca5b2d2e1f3c4a50b2">_init_from_config</a>(method.config)
<a name="l00995"></a>00995 
<a name="l00996"></a><a class="code" href="classmultifit_1_1multifit_1_1BaseDiagOptions.html#a46e71523042b7b625cecee0502495795">00996</a>    <span class="keyword">def </span><a class="code" href="classmultifit_1_1multifit_1_1BaseDiagOptions.html#a46e71523042b7b625cecee0502495795" title="String representation of a BaseDiagOptionss object.">__str__</a>(self):
<a name="l00997"></a>00997       <span class="stringliteral">&quot;&quot;&quot;!</span>
<a name="l00998"></a>00998 <span class="stringliteral">         String representation of a BaseDiagOptionss object </span>
<a name="l00999"></a>00999 <span class="stringliteral">         @return a Python String describing the BaseDiagOptionsobject</span>
<a name="l01000"></a>01000 <span class="stringliteral">      &quot;&quot;&quot;</span>
<a name="l01001"></a>01001 
<a name="l01002"></a>01002       descr =  <span class="stringliteral">&quot;Diagnostic options for {0}:\n&quot;</span>.format(self.<a class="code" href="classmultifit_1_1multifit_1_1BaseDiagOptions.html#a62d652a99ac3e3e0cfd77b4c85310759">method</a>.name)  
<a name="l01003"></a>01003       descr += <span class="stringliteral">&quot;- diagnostic flags:{0}\n&quot;</span>.format(self.<a class="code" href="classmultifit_1_1multifit_1_1BaseDiagOptions.html#a3c4a7c35f19037babeccab9ef99625ad">_diag_flags</a>) 
<a name="l01004"></a>01004       descr += <span class="stringliteral">&quot;- log file name: {0}\n&quot;</span>.format(self.<a class="code" href="classmultifit_1_1multifit_1_1BaseDiagOptions.html#ac2d9791bd06bb52b66bd34f504b15756">_log_file_name</a>)
<a name="l01005"></a>01005       descr += <span class="stringliteral">&quot;- base output dir: {0}\n&quot;</span>.format(self.<a class="code" href="classmultifit_1_1multifit_1_1BaseDiagOptions.html#ade40e60195cc7055226f022c0f7219e7">_base_output_dir</a>)
<a name="l01006"></a>01006       descr += <span class="stringliteral">&quot;- log output dir: {0}\n&quot;</span>.format(self.<a class="code" href="classmultifit_1_1multifit_1_1BaseDiagOptions.html#a91901cad5c28a432a31a91a59609f9fc">_log_output_dir</a>)
<a name="l01007"></a>01007       descr += <span class="stringliteral">&quot;- plot output dir: {0}\n&quot;</span>.format(self.<a class="code" href="classmultifit_1_1multifit_1_1BaseDiagOptions.html#aabd935ea1f1b73f3839ae9cd2656a3a6">_plot_output_dir</a>)
<a name="l01008"></a>01008       descr += <span class="stringliteral">&quot;- stats output dir: {0}\n&quot;</span>.format(self.<a class="code" href="classmultifit_1_1multifit_1_1BaseDiagOptions.html#a045358c147962a1ba5bf447d4cd2d235">_stats_output_dir</a>)
<a name="l01009"></a>01009 
<a name="l01010"></a>01010       <span class="keywordflow">return</span> descr
<a name="l01011"></a>01011 
<a name="l01012"></a>01012    <span class="comment"># ~~~~~~~~~~~</span>
<a name="l01013"></a>01013    <span class="comment"># Properties</span>
<a name="l01014"></a>01014    <span class="comment"># ~~~~~~~~~~~   </span>
<a name="l01015"></a>01015 
<a name="l01016"></a>01016    <span class="comment"># --- Getters </span>
<a name="l01017"></a>01017 
<a name="l01018"></a>01018    @property
<a name="l01019"></a><a class="code" href="classmultifit_1_1multifit_1_1BaseDiagOptions.html#a62d652a99ac3e3e0cfd77b4c85310759">01019</a>    <span class="keyword">def </span><a class="code" href="classmultifit_1_1multifit_1_1BaseDiagOptions.html#a62d652a99ac3e3e0cfd77b4c85310759">method</a>(self):
<a name="l01020"></a>01020       <span class="stringliteral">&quot;&quot;&quot;! @returns the associated fitting method. &quot;&quot;&quot;</span>
<a name="l01021"></a>01021       <span class="keywordflow">return</span> self.<a class="code" href="classmultifit_1_1multifit_1_1BaseDiagOptions.html#a40d7604cba5673bc1a893b593a730ea9">_method</a>
<a name="l01022"></a>01022 
<a name="l01023"></a>01023    @property
<a name="l01024"></a><a class="code" href="classmultifit_1_1multifit_1_1BaseDiagOptions.html#a7afacb23b7bdf996e5333c27ef2ab3c9">01024</a>    <span class="keyword">def </span><a class="code" href="classmultifit_1_1multifit_1_1BaseDiagOptions.html#a7afacb23b7bdf996e5333c27ef2ab3c9">diag_flags</a>(self):
<a name="l01025"></a>01025       <span class="stringliteral">&quot;&quot;&quot;! </span>
<a name="l01026"></a>01026 <span class="stringliteral">         @return the diagnostic flags </span>
<a name="l01027"></a>01027 <span class="stringliteral">      &quot;&quot;&quot;</span>
<a name="l01028"></a>01028       <span class="keywordflow">return</span> self.<a class="code" href="classmultifit_1_1multifit_1_1BaseDiagOptions.html#a3c4a7c35f19037babeccab9ef99625ad">_diag_flags</a>
<a name="l01029"></a>01029 
<a name="l01030"></a>01030    @property
<a name="l01031"></a><a class="code" href="classmultifit_1_1multifit_1_1BaseDiagOptions.html#a163c3f4a7f3fddbd5da8dffd4e74c6ec">01031</a>    <span class="keyword">def </span><a class="code" href="classmultifit_1_1multifit_1_1BaseDiagOptions.html#a163c3f4a7f3fddbd5da8dffd4e74c6ec">base_output_dir</a>(self):
<a name="l01032"></a>01032       <span class="stringliteral">&quot;&quot;&quot;! </span>
<a name="l01033"></a>01033 <span class="stringliteral">         @return the base output directory for logs, plots and stats </span>
<a name="l01034"></a>01034 <span class="stringliteral">      &quot;&quot;&quot;</span>
<a name="l01035"></a>01035       <span class="keywordflow">return</span> self.<a class="code" href="classmultifit_1_1multifit_1_1BaseDiagOptions.html#ade40e60195cc7055226f022c0f7219e7">_base_output_dir</a>
<a name="l01036"></a>01036 
<a name="l01037"></a>01037    @property
<a name="l01038"></a><a class="code" href="classmultifit_1_1multifit_1_1BaseDiagOptions.html#aa3914969787ba053033b569c7ce1ffa2">01038</a>    <span class="keyword">def </span><a class="code" href="classmultifit_1_1multifit_1_1BaseDiagOptions.html#afa0cd102ffa2fc5aa0e233a15cdb9480">log_output_dir</a>(self):
<a name="l01039"></a>01039       <span class="stringliteral">&quot;&quot;&quot;! </span>
<a name="l01040"></a>01040 <span class="stringliteral">         @return the output directory for logging </span>
<a name="l01041"></a>01041 <span class="stringliteral">      &quot;&quot;&quot;</span>
<a name="l01042"></a>01042       <span class="keywordflow">return</span> self.<a class="code" href="classmultifit_1_1multifit_1_1BaseDiagOptions.html#a91901cad5c28a432a31a91a59609f9fc">_log_output_dir</a>
<a name="l01043"></a>01043 
<a name="l01044"></a>01044    @property
<a name="l01045"></a><a class="code" href="classmultifit_1_1multifit_1_1BaseDiagOptions.html#abaf367aaf4676c18b2536f29ae3e58cd">01045</a>    <span class="keyword">def </span><a class="code" href="classmultifit_1_1multifit_1_1BaseDiagOptions.html#abaf367aaf4676c18b2536f29ae3e58cd">plot_output_dir</a>(self):
<a name="l01046"></a>01046       <span class="stringliteral">&quot;&quot;&quot;! </span>
<a name="l01047"></a>01047 <span class="stringliteral">         @return the output directory for plotting </span>
<a name="l01048"></a>01048 <span class="stringliteral">      &quot;&quot;&quot;</span>
<a name="l01049"></a>01049       <span class="keywordflow">return</span> self.<a class="code" href="classmultifit_1_1multifit_1_1BaseDiagOptions.html#aabd935ea1f1b73f3839ae9cd2656a3a6">_plot_output_dir</a>
<a name="l01050"></a>01050 
<a name="l01051"></a>01051    @property
<a name="l01052"></a><a class="code" href="classmultifit_1_1multifit_1_1BaseDiagOptions.html#a95b05fd0e352b5e48646190baab543a9">01052</a>    <span class="keyword">def </span><a class="code" href="classmultifit_1_1multifit_1_1BaseDiagOptions.html#a95b05fd0e352b5e48646190baab543a9">stats_output_dir</a>(self):
<a name="l01053"></a>01053       <span class="stringliteral">&quot;&quot;&quot;! </span>
<a name="l01054"></a>01054 <span class="stringliteral">         @return the output directory for outputing statistics </span>
<a name="l01055"></a>01055 <span class="stringliteral">      &quot;&quot;&quot;</span>
<a name="l01056"></a>01056       <span class="keywordflow">return</span> self.<a class="code" href="classmultifit_1_1multifit_1_1BaseDiagOptions.html#a045358c147962a1ba5bf447d4cd2d235">_stats_output_dir</a>
<a name="l01057"></a>01057 
<a name="l01058"></a>01058    @property
<a name="l01059"></a><a class="code" href="classmultifit_1_1multifit_1_1BaseDiagOptions.html#a8c2f052f4e8cd1e83918ed906ac4df1f">01059</a>    <span class="keyword">def </span><a class="code" href="classmultifit_1_1multifit_1_1BaseDiagOptions.html#a8c2f052f4e8cd1e83918ed906ac4df1f">log_file_name</a>(self):
<a name="l01060"></a>01060       <span class="stringliteral">&quot;&quot;&quot;! </span>
<a name="l01061"></a>01061 <span class="stringliteral">         @return the name of the log file </span>
<a name="l01062"></a>01062 <span class="stringliteral">      &quot;&quot;&quot;</span>
<a name="l01063"></a>01063       <span class="keywordflow">return</span> self.<a class="code" href="classmultifit_1_1multifit_1_1BaseDiagOptions.html#ac2d9791bd06bb52b66bd34f504b15756">_log_file_name</a>
<a name="l01064"></a>01064 
<a name="l01065"></a>01065    <span class="comment"># --- Setters </span>
<a name="l01066"></a>01066 
<a name="l01067"></a>01067    @diag_flags.setter 
<a name="l01068"></a><a class="code" href="classmultifit_1_1multifit_1_1BaseDiagOptions.html#a7afacb23b7bdf996e5333c27ef2ab3c9">01068</a>    <span class="keyword">def </span><a class="code" href="classmultifit_1_1multifit_1_1BaseDiagOptions.html#a7afacb23b7bdf996e5333c27ef2ab3c9">diag_flags</a>(self, diag_flags):
<a name="l01069"></a>01069       <span class="stringliteral">&quot;&quot;&quot;! </span>
<a name="l01070"></a>01070 <span class="stringliteral">         Set the diagnostic flags</span>
<a name="l01071"></a>01071 <span class="stringliteral">         @param diag_flags diagnostic flagsoutputing </span>
<a name="l01072"></a>01072 <span class="stringliteral">      &quot;&quot;&quot;</span>
<a name="l01073"></a>01073       self.<a class="code" href="classmultifit_1_1multifit_1_1BaseDiagOptions.html#a3c4a7c35f19037babeccab9ef99625ad">_diag_flags</a> = diag_flags
<a name="l01074"></a>01074 
<a name="l01075"></a>01075    @base_output_dir.setter 
<a name="l01076"></a><a class="code" href="classmultifit_1_1multifit_1_1BaseDiagOptions.html#a163c3f4a7f3fddbd5da8dffd4e74c6ec">01076</a>    <span class="keyword">def </span><a class="code" href="classmultifit_1_1multifit_1_1BaseDiagOptions.html#a163c3f4a7f3fddbd5da8dffd4e74c6ec">base_output_dir</a>(self, base_output_dir):
<a name="l01077"></a>01077       <span class="stringliteral">&quot;&quot;&quot;! </span>
<a name="l01078"></a>01078 <span class="stringliteral">         Set the base output directory for logs, plots and stats </span>
<a name="l01079"></a>01079 <span class="stringliteral">         @param base_output_dir base output directory</span>
<a name="l01080"></a>01080 <span class="stringliteral">      &quot;&quot;&quot;</span>
<a name="l01081"></a>01081       self.<a class="code" href="classmultifit_1_1multifit_1_1BaseDiagOptions.html#ade40e60195cc7055226f022c0f7219e7">_base_output_dir</a> = base_output_dir
<a name="l01082"></a>01082 
<a name="l01083"></a>01083    @log_output_dir.setter 
<a name="l01084"></a><a class="code" href="classmultifit_1_1multifit_1_1BaseDiagOptions.html#aa3914969787ba053033b569c7ce1ffa2">01084</a>    <span class="keyword">def </span><a class="code" href="classmultifit_1_1multifit_1_1BaseDiagOptions.html#afa0cd102ffa2fc5aa0e233a15cdb9480">log_output_dir</a>(self, log_output_dir):
<a name="l01085"></a>01085       <span class="stringliteral">&quot;&quot;&quot;! </span>
<a name="l01086"></a>01086 <span class="stringliteral">         Set the output directory for logging </span>
<a name="l01087"></a>01087 <span class="stringliteral">         @param log_output_dir output directory for logging</span>
<a name="l01088"></a>01088 <span class="stringliteral">      &quot;&quot;&quot;</span>
<a name="l01089"></a>01089       self.<a class="code" href="classmultifit_1_1multifit_1_1BaseDiagOptions.html#a91901cad5c28a432a31a91a59609f9fc">_log_output_dir</a> = log_output_dir
<a name="l01090"></a>01090 
<a name="l01091"></a>01091    @plot_output_dir.setter 
<a name="l01092"></a><a class="code" href="classmultifit_1_1multifit_1_1BaseDiagOptions.html#abaf367aaf4676c18b2536f29ae3e58cd">01092</a>    <span class="keyword">def </span><a class="code" href="classmultifit_1_1multifit_1_1BaseDiagOptions.html#abaf367aaf4676c18b2536f29ae3e58cd">plot_output_dir</a>(self, plot_output_dir):
<a name="l01093"></a>01093       <span class="stringliteral">&quot;&quot;&quot;! </span>
<a name="l01094"></a>01094 <span class="stringliteral">         Set the output directory for plotting </span>
<a name="l01095"></a>01095 <span class="stringliteral">         @param plot_output_dir output directory for plotting</span>
<a name="l01096"></a>01096 <span class="stringliteral">      &quot;&quot;&quot;</span>
<a name="l01097"></a>01097       self.<a class="code" href="classmultifit_1_1multifit_1_1BaseDiagOptions.html#aabd935ea1f1b73f3839ae9cd2656a3a6">_plot_output_dir</a> = plot_output_dir
<a name="l01098"></a>01098 
<a name="l01099"></a>01099    @stats_output_dir.setter 
<a name="l01100"></a><a class="code" href="classmultifit_1_1multifit_1_1BaseDiagOptions.html#a95b05fd0e352b5e48646190baab543a9">01100</a>    <span class="keyword">def </span><a class="code" href="classmultifit_1_1multifit_1_1BaseDiagOptions.html#a95b05fd0e352b5e48646190baab543a9">stats_output_dir</a>(self, stats_output_dir):
<a name="l01101"></a>01101       <span class="stringliteral">&quot;&quot;&quot;! </span>
<a name="l01102"></a>01102 <span class="stringliteral">         Set the output directory for statistics </span>
<a name="l01103"></a>01103 <span class="stringliteral">         @param stats_output_dir output directory for outputing statistics</span>
<a name="l01104"></a>01104 <span class="stringliteral">      &quot;&quot;&quot;</span>
<a name="l01105"></a>01105       self.<a class="code" href="classmultifit_1_1multifit_1_1BaseDiagOptions.html#a045358c147962a1ba5bf447d4cd2d235">_stats_output_dir</a> = stats_output_dir
<a name="l01106"></a>01106 
<a name="l01107"></a>01107    @log_file_name.setter 
<a name="l01108"></a><a class="code" href="classmultifit_1_1multifit_1_1BaseDiagOptions.html#a8c2f052f4e8cd1e83918ed906ac4df1f">01108</a>    <span class="keyword">def </span><a class="code" href="classmultifit_1_1multifit_1_1BaseDiagOptions.html#a8c2f052f4e8cd1e83918ed906ac4df1f">log_file_name</a>(self, log_file_name):
<a name="l01109"></a>01109       <span class="stringliteral">&quot;&quot;&quot;! </span>
<a name="l01110"></a>01110 <span class="stringliteral">         Set the name of the log file  </span>
<a name="l01111"></a>01111 <span class="stringliteral">         @param log_file_name name of the log file</span>
<a name="l01112"></a>01112 <span class="stringliteral">      &quot;&quot;&quot;</span>
<a name="l01113"></a>01113       self.<a class="code" href="classmultifit_1_1multifit_1_1BaseDiagOptions.html#ac2d9791bd06bb52b66bd34f504b15756">_log_file_name</a> = log_file_name
<a name="l01114"></a>01114 
<a name="l01115"></a>01115    <span class="comment"># ~~~~~~~~~~~~~~~~</span>
<a name="l01116"></a>01116    <span class="comment"># Private methods</span>
<a name="l01117"></a>01117    <span class="comment"># ~~~~~~~~~~~~~~~~</span>
<a name="l01118"></a>01118 
<a name="l01119"></a><a class="code" href="classmultifit_1_1multifit_1_1BaseDiagOptions.html#afa0cd102ffa2fc5aa0e233a15cdb9480">01119</a>    <span class="keyword">def </span>_init_from_config(self, config):
<a name="l01120"></a>01120 
<a name="l01121"></a>01121       <span class="comment"># --- Default configuration</span>
<a name="l01122"></a>01122       <span class="keywordflow">if</span> <span class="keywordflow">not</span> config <span class="keywordflow">is</span> <span class="keywordtype">None</span>:
<a name="l01123"></a>01123          method_section_name = self.<a class="code" href="classmultifit_1_1multifit_1_1BaseDiagOptions.html#a62d652a99ac3e3e0cfd77b4c85310759">method</a>.name.upper()
<a name="l01124"></a>01124          model_options_section_name = <span class="stringliteral">&quot;{0}.OPTIONS&quot;</span>.format(method_section_name)
<a name="l01125"></a>01125 
<a name="l01126"></a>01126          <span class="keywordflow">if</span> config.has_section(method_section_name):
<a name="l01127"></a>01127             <span class="keywordflow">if</span> config.has_key(<span class="stringliteral">&quot;log_file_name&quot;</span>, model_options_section_name ):
<a name="l01128"></a>01128                self.<a class="code" href="classmultifit_1_1multifit_1_1BaseDiagOptions.html#ac2d9791bd06bb52b66bd34f504b15756">_log_file_name</a> = config.get_as_string(<span class="stringliteral">&quot;log_file_name&quot;</span>, 
<a name="l01129"></a>01129                                                           model_options_section_name)            
<a name="l01130"></a>01130             <span class="keywordflow">if</span> config.has_key(<span class="stringliteral">&quot;base_output_dir&quot;</span>, model_options_section_name):
<a name="l01131"></a>01131                self.<a class="code" href="classmultifit_1_1multifit_1_1BaseDiagOptions.html#ade40e60195cc7055226f022c0f7219e7">_base_output_dir</a> = config.get_as_string(<span class="stringliteral">&quot;base_output_dir&quot;</span>, 
<a name="l01132"></a>01132                                                             model_options_section_name)            
<a name="l01133"></a>01133             <span class="keywordflow">if</span> config.has_key(<span class="stringliteral">&quot;log_output_dir&quot;</span>, model_options_section_name):
<a name="l01134"></a>01134                self.<a class="code" href="classmultifit_1_1multifit_1_1BaseDiagOptions.html#afa0cd102ffa2fc5aa0e233a15cdb9480">log_output_dir</a> = config.get_as_string(<span class="stringliteral">&quot;log_output_dir&quot;</span>, 
<a name="l01135"></a>01135                                                           model_options_section_name)            
<a name="l01136"></a>01136             <span class="keywordflow">if</span> config.has_key(<span class="stringliteral">&quot;plot_output_dir&quot;</span>, model_options_section_name):
<a name="l01137"></a>01137                self.<a class="code" href="classmultifit_1_1multifit_1_1BaseDiagOptions.html#aabd935ea1f1b73f3839ae9cd2656a3a6">_plot_output_dir</a> = config.get_as_string(<span class="stringliteral">&quot;plot_output_dir&quot;</span>, 
<a name="l01138"></a>01138                                                             model_options_section_name)            
<a name="l01139"></a>01139             <span class="keywordflow">if</span> config.has_key(<span class="stringliteral">&quot;stats_output_dir&quot;</span>, model_options_section_name):
<a name="l01140"></a>01140                self.<a class="code" href="classmultifit_1_1multifit_1_1BaseDiagOptions.html#a045358c147962a1ba5bf447d4cd2d235">_stats_output_dir</a> = config.get_as_string(<span class="stringliteral">&quot;stats_output_dir&quot;</span>, 
<a name="l01141"></a>01141                                                              model_options_section_name)         
<a name="l01142"></a>01142       <span class="keywordflow">else</span>:
<a name="l01143"></a>01143          <span class="keywordflow">if</span> <span class="keywordflow">not</span> self.<a class="code" href="classmultifit_1_1multifit_1_1BaseDiagOptions.html#a62d652a99ac3e3e0cfd77b4c85310759">method</a>.name <span class="keywordflow">is</span> <span class="keywordtype">None</span>:
<a name="l01144"></a>01144             <span class="keywordflow">print</span>(<span class="stringliteral">&quot;MultiFit *** Warning ***: configuration file notfound for {0}.&quot;</span>.format(
<a name="l01145"></a>01145                                                                                  self.<a class="code" href="classmultifit_1_1multifit_1_1BaseDiagOptions.html#a62d652a99ac3e3e0cfd77b4c85310759">method</a>.name))   
<a name="l01146"></a>01146 
<a name="l01147"></a>01147 <span class="comment"># --------------------------------------------------------------------------------------------------</span>
<a name="l01148"></a><a class="code" href="classmultifit_1_1multifit_1_1BaseFittingInfo.html">01148</a> <span class="keyword">class </span><a class="code" href="classmultifit_1_1multifit_1_1BaseFittingInfo.html" title="Fitting information available from a method once fitting is complete.">BaseFittingInfo</a>(<a class="code" href="classobject.html">object</a>):
<a name="l01149"></a>01149 
<a name="l01150"></a>01150    <span class="stringliteral">&quot;&quot;&quot;! </span>
<a name="l01151"></a>01151 <span class="stringliteral">       Fitting information available from a method once fitting is complete. </span>
<a name="l01152"></a>01152 <span class="stringliteral">   &quot;&quot;&quot;</span>
<a name="l01153"></a>01153 
<a name="l01154"></a><a class="code" href="classmultifit_1_1multifit_1_1BaseFittingInfo.html#ae77e796effd0597e7ad2aec5854c9f68">01154</a>    <span class="keyword">def </span><a class="code" href="classmultifit_1_1multifit_1_1BaseFittingInfo.html#ae77e796effd0597e7ad2aec5854c9f68">__init__</a>(self, method):
<a name="l01155"></a>01155       
<a name="l01156"></a>01156       self.<a class="code" href="classmultifit_1_1multifit_1_1BaseFittingInfo.html#ab983f56a255fe8edaa76f3d37660c068">_method</a> = method    <span class="comment"># the fitting method</span>
<a name="l01157"></a>01157 
<a name="l01158"></a><a class="code" href="classmultifit_1_1multifit_1_1BaseFittingInfo.html#aaa696c63b1c6eb14471815d31b7737a3">01158</a>    <span class="keyword">def </span><a class="code" href="classmultifit_1_1multifit_1_1BaseFittingInfo.html#aaa696c63b1c6eb14471815d31b7737a3">__str__</a>(self):
<a name="l01159"></a>01159 
<a name="l01160"></a>01160       descr = <span class="stringliteral">&quot;Fitting Info for {0}:\n&quot;</span>.format(self.<a class="code" href="classmultifit_1_1multifit_1_1BaseFittingInfo.html#a76e04ca039e42dc801ee04bdf317f369">method</a>.name)
<a name="l01161"></a>01161       descr += <span class="stringliteral">&quot;- Fitted parameters: {0}\n&quot;</span>.format(self.<a class="code" href="classmultifit_1_1multifit_1_1BaseFittingInfo.html#a76e04ca039e42dc801ee04bdf317f369">method</a>.fitted_params)
<a name="l01162"></a>01162       <span class="keywordflow">return</span> descr
<a name="l01163"></a>01163 
<a name="l01164"></a>01164    <span class="comment"># ~~~~~~~~~~~</span>
<a name="l01165"></a>01165    <span class="comment"># Properties </span>
<a name="l01166"></a>01166    <span class="comment"># ~~~~~~~~~~~</span>
<a name="l01167"></a>01167 
<a name="l01168"></a>01168    @property
<a name="l01169"></a><a class="code" href="classmultifit_1_1multifit_1_1BaseFittingInfo.html#a76e04ca039e42dc801ee04bdf317f369">01169</a>    <span class="keyword">def </span><a class="code" href="classmultifit_1_1multifit_1_1BaseFittingInfo.html#a76e04ca039e42dc801ee04bdf317f369">method</a>(self):
<a name="l01170"></a>01170       <span class="stringliteral">&quot;&quot;&quot;! @return the associated fitting method as an object derived from BaseFittingMethod &quot;&quot;&quot;</span>
<a name="l01171"></a>01171       <span class="keywordflow">return</span> self.<a class="code" href="classmultifit_1_1multifit_1_1BaseFittingInfo.html#ab983f56a255fe8edaa76f3d37660c068">_method</a>
<a name="l01172"></a>01172 
<a name="l01173"></a>01173 
<a name="l01174"></a>01174 
<a name="l01175"></a>01175 <span class="comment"># -------------------------------------------------------------------------------------------------</span>
<a name="l01176"></a><a class="code" href="classmultifit_1_1multifit_1_1ModelFitter.html">01176</a> <span class="keyword">class </span><a class="code" href="classmultifit_1_1multifit_1_1ModelFitter.html" title="Fit a parametric model using a fitting method.">ModelFitter</a>(<a class="code" href="classobject.html">object</a>):
<a name="l01177"></a>01177    <span class="stringliteral">&quot;&quot;&quot;!</span>
<a name="l01178"></a>01178 <span class="stringliteral">      Fit a parametric model using a fitting method</span>
<a name="l01179"></a>01179 <span class="stringliteral">   &quot;&quot;&quot;</span>
<a name="l01180"></a>01180 
<a name="l01181"></a><a class="code" href="classmultifit_1_1multifit_1_1ModelFitter.html#a2f1a498b7b791c48c5b7f2bca97d5dc9">01181</a>    <span class="keyword">def </span><a class="code" href="classmultifit_1_1multifit_1_1ModelFitter.html#a2f1a498b7b791c48c5b7f2bca97d5dc9" title="Construct a ModelFitter object given a model derived from BaseFittingModel and a method derived from ...">__init__</a>(self, model_name=None, method_name=None, 
<a name="l01182"></a>01182                       model_config_filename=<span class="keywordtype">None</span>, 
<a name="l01183"></a>01183                       method_config_filename=<span class="keywordtype">None</span>,
<a name="l01184"></a>01184                       model_config_dir=<span class="stringliteral">&quot;./config/models&quot;</span>, 
<a name="l01185"></a>01185                       method_config_dir=<span class="stringliteral">&quot;./config/methods&quot;</span>, 
<a name="l01186"></a>01186                       fitting_config_dir = <span class="stringliteral">&quot;./config/fitting&quot;</span>, 
<a name="l01187"></a>01187                       model_module_dir=<span class="stringliteral">&quot;./modules/models&quot;</span>, 
<a name="l01188"></a>01188                       method_module_dir=<span class="stringliteral">&quot;./modules/methods&quot;</span>):
<a name="l01189"></a>01189       <span class="stringliteral">&quot;&quot;&quot;!</span>
<a name="l01190"></a>01190 <span class="stringliteral">         Construct a ModelFitter object given a model derived from BaseFittingModel and a method</span>
<a name="l01191"></a>01191 <span class="stringliteral">         derived from BaseFittingmethod</span>
<a name="l01192"></a>01192 <span class="stringliteral">         @param model_name name of a fitting model</span>
<a name="l01193"></a>01193 <span class="stringliteral">         @param method_name name of a method </span>
<a name="l01194"></a>01194 <span class="stringliteral">         @param model_config_filename name of model configuration name </span>
<a name="l01195"></a>01195 <span class="stringliteral">         @param method_config_filename name of method configuration name </span>
<a name="l01196"></a>01196 <span class="stringliteral">         @param model_config_dir base configuration directory for models</span>
<a name="l01197"></a>01197 <span class="stringliteral">         @param method_config_dir base configuration directory for methods</span>
<a name="l01198"></a>01198 <span class="stringliteral">         @param fitting_config_dir configuration directory where extra fitting configuration reside</span>
<a name="l01199"></a>01199 <span class="stringliteral">         @param model_module_dir base directory whhere the modules for specific fitting models are </span>
<a name="l01200"></a>01200 <span class="stringliteral">                located</span>
<a name="l01201"></a>01201 <span class="stringliteral">         @param method_module_dir base directory whhere the modules for specific fitting models are </span>
<a name="l01202"></a>01202 <span class="stringliteral">                located</span>
<a name="l01203"></a>01203 <span class="stringliteral">      &quot;&quot;&quot;</span>      
<a name="l01204"></a>01204 
<a name="l01205"></a>01205       <span class="comment"># --- Properties</span>
<a name="l01206"></a>01206       self.<a class="code" href="classmultifit_1_1multifit_1_1ModelFitter.html#ac88cdcf5dfc7e8d12de43fc341fb5f77">_model_config_dir</a> = model_config_dir             <span class="comment"># model configuration directory name   </span>
<a name="l01207"></a>01207       self.<a class="code" href="classmultifit_1_1multifit_1_1ModelFitter.html#ac3b64bc2b4379e7ed783835afcf97574">_method_config_dir</a> =  method_config_dir          <span class="comment"># model configuration directory name  </span>
<a name="l01208"></a>01208       self.<a class="code" href="classmultifit_1_1multifit_1_1ModelFitter.html#ad1cf873f500f69b95cf913d546e0b337">_fitting_config_dir</a> = fitting_config_dir         <span class="comment"># fitting configuration directory name  </span>
<a name="l01209"></a>01209       self.<a class="code" href="classmultifit_1_1multifit_1_1ModelFitter.html#a97811d75dfbdcbad4a0ff0ed539d2da5">_model_module_dir</a> = model_module_dir             <span class="comment"># module directory for models   </span>
<a name="l01210"></a>01210       self.<a class="code" href="classmultifit_1_1multifit_1_1ModelFitter.html#a0e30a963dc1bc5f85226d17b2f8b38c0">_method_module_dir</a> = model_module_dir            <span class="comment"># module directory for methods  </span>
<a name="l01211"></a>01211 
<a name="l01212"></a>01212       <span class="keywordflow">if</span> model_name <span class="keywordflow">is</span> <span class="keywordtype">None</span>:
<a name="l01213"></a>01213          <span class="keywordflow">raise</span>(ModelFitter.InvalidArgument(
<a name="l01214"></a>01214                 <span class="stringliteral">&quot;Invalid model name&quot;</span>, model_name))
<a name="l01215"></a>01215       <span class="keywordflow">if</span> method_name <span class="keywordflow">is</span> <span class="keywordtype">None</span>:
<a name="l01216"></a>01216          <span class="keywordflow">raise</span>(ModelFitter.InvalidArgument(
<a name="l01217"></a>01217                 <span class="stringliteral">&quot;Invalid method name&quot;</span>, method_name))
<a name="l01218"></a>01218 
<a name="l01219"></a>01219       <span class="keywordflow">if</span> model_config_filename <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span> <span class="keywordflow">and</span> \
<a name="l01220"></a>01220          self.<a class="code" href="classmultifit_1_1multifit_1_1ModelFitter.html#a0dcf789dec77aebff8f2587864499412" title="Safe way of checking if a file (not a directory) does exist.">_file_exists</a>(os.path.join(model_config_dir, model_config_filename)):
<a name="l01221"></a>01221             self.<a class="code" href="classmultifit_1_1multifit_1_1ModelFitter.html#a1f157d42bbaf9286dc68b8f9ed57f37f">_model_config_filename</a>  = model_config_filename  <span class="comment"># modele configuration file name</span>
<a name="l01222"></a>01222       <span class="keywordflow">else</span>:
<a name="l01223"></a>01223          self.<a class="code" href="classmultifit_1_1multifit_1_1ModelFitter.html#a1f157d42bbaf9286dc68b8f9ed57f37f">_model_config_filename</a>  = model_name + <span class="stringliteral">&quot;.cfg&quot;</span>
<a name="l01224"></a>01224 
<a name="l01225"></a>01225       <span class="keywordflow">if</span> method_config_filename <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span> <span class="keywordflow">and</span> \
<a name="l01226"></a>01226          self.<a class="code" href="classmultifit_1_1multifit_1_1ModelFitter.html#a0dcf789dec77aebff8f2587864499412" title="Safe way of checking if a file (not a directory) does exist.">_file_exists</a>(os.path.join(method_config_dir, method_config_filename)):
<a name="l01227"></a>01227             self.<a class="code" href="classmultifit_1_1multifit_1_1ModelFitter.html#aab1b7c0a97608fe9ba6fdba1b8624a25">_method_config_filename</a>  = method_config_filename  <span class="comment"># method configuration file name</span>
<a name="l01228"></a>01228       <span class="keywordflow">else</span>:
<a name="l01229"></a>01229          self.<a class="code" href="classmultifit_1_1multifit_1_1ModelFitter.html#aab1b7c0a97608fe9ba6fdba1b8624a25">_method_config_filename</a>  = method_name + <span class="stringliteral">&quot;.cfg&quot;</span>
<a name="l01230"></a>01230       
<a name="l01231"></a>01231 
<a name="l01232"></a>01232       self.<a class="code" href="classmultifit_1_1multifit_1_1ModelFitter.html#ab0b65d7fddae489a575572f70e1f0955">_model</a>  = self.<a class="code" href="classmultifit_1_1multifit_1_1ModelFitter.html#aa67a3684a1c66e5bfaab8e148863f0c1" title="Load and instantiate a FittingModel object for module model_name.">_setup_model</a>(model_name, self.<a class="code" href="classmultifit_1_1multifit_1_1ModelFitter.html#a1f157d42bbaf9286dc68b8f9ed57f37f">_model_config_filename</a>, 
<a name="l01233"></a>01233                                        model_config_dir, model_module_dir) 
<a name="l01234"></a>01234 
<a name="l01235"></a>01235       self.<a class="code" href="classmultifit_1_1multifit_1_1ModelFitter.html#a449c18778a615108a0918b2eba461438">_method</a> = self.<a class="code" href="classmultifit_1_1multifit_1_1ModelFitter.html#a8d9eac7894c06fef675673ad9b315d6b" title="Load and instantiate a FittingMethod object for method method_name.">_setup_method</a>(method_name, 
<a name="l01236"></a>01236                                         self.<a class="code" href="classmultifit_1_1multifit_1_1ModelFitter.html#aab1b7c0a97608fe9ba6fdba1b8624a25">_method_config_filename</a>, 
<a name="l01237"></a>01237                                         method_config_dir, fitting_config_dir, method_module_dir) 
<a name="l01238"></a>01238 
<a name="l01239"></a>01239       self.<a class="code" href="classmultifit_1_1multifit_1_1ModelFitter.html#a3138397e5bf4f93d83590bbe98fa4d29">_fitted_params</a> = <span class="keywordtype">None</span>    <span class="comment"># fitted parameters: populated when fitting is complete</span>
<a name="l01240"></a>01240       self.<a class="code" href="classmultifit_1_1multifit_1_1ModelFitter.html#aced4a46287cdec2b92a0e6a73f59ea9b">_fitting_status</a> = self.<a class="code" href="classmultifit_1_1multifit_1_1ModelFitter.html#a449c18778a615108a0918b2eba461438">_method</a>.fitting_status   <span class="comment"># method-independent status</span>
<a name="l01241"></a>01241 
<a name="l01242"></a>01242       self.<a class="code" href="classmultifit_1_1multifit_1_1ModelFitter.html#abe629778903f1066ed667c3d0caf1536">_version</a> = <span class="stringliteral">&quot;0.5.8&quot;</span>
<a name="l01243"></a>01243 
<a name="l01244"></a>01244       <span class="comment"># --- Private atttributes</span>
<a name="l01245"></a>01245 
<a name="l01246"></a>01246    <span class="comment"># ~~~~~~~~~~</span>
<a name="l01247"></a>01247    <span class="comment"># Properties </span>
<a name="l01248"></a>01248    <span class="comment"># ~~~~~~~~~~   </span>
<a name="l01249"></a>01249 
<a name="l01250"></a>01250    <span class="comment"># --- Getters  </span>
<a name="l01251"></a>01251 
<a name="l01252"></a>01252    @property
<a name="l01253"></a><a class="code" href="classmultifit_1_1multifit_1_1ModelFitter.html#abf9b1137d069cfd3df03bfe7a669795d">01253</a>    <span class="keyword">def </span><a class="code" href="classmultifit_1_1multifit_1_1ModelFitter.html#abf9b1137d069cfd3df03bfe7a669795d">model</a>(self):
<a name="l01254"></a>01254       <span class="stringliteral">&quot;&quot;&quot;! @return the model to fit as an object derived from BaseFittingModel &quot;&quot;&quot;</span>
<a name="l01255"></a>01255       <span class="keywordflow">return</span> self.<a class="code" href="classmultifit_1_1multifit_1_1ModelFitter.html#ab0b65d7fddae489a575572f70e1f0955">_model</a>
<a name="l01256"></a>01256 
<a name="l01257"></a>01257    @property
<a name="l01258"></a><a class="code" href="classmultifit_1_1multifit_1_1ModelFitter.html#a6b55373f5de8faede0d1cba6eddabf90">01258</a>    <span class="keyword">def </span><a class="code" href="classmultifit_1_1multifit_1_1ModelFitter.html#a6b55373f5de8faede0d1cba6eddabf90">method</a>(self):
<a name="l01259"></a>01259       <span class="stringliteral">&quot;&quot;&quot;! @return the fitting method to apply as an object derived from BaseFittingMethod &quot;&quot;&quot;</span>
<a name="l01260"></a>01260       <span class="keywordflow">return</span> self.<a class="code" href="classmultifit_1_1multifit_1_1ModelFitter.html#a449c18778a615108a0918b2eba461438">_method</a>
<a name="l01261"></a>01261 
<a name="l01262"></a>01262    @property
<a name="l01263"></a><a class="code" href="classmultifit_1_1multifit_1_1ModelFitter.html#ac8489d51d9be060fea06316311df216b">01263</a>    <span class="keyword">def </span><a class="code" href="classmultifit_1_1multifit_1_1ModelFitter.html#ac8489d51d9be060fea06316311df216b">model_config_filename</a>(self):
<a name="l01264"></a>01264       <span class="stringliteral">&quot;&quot;&quot;! @return the base configuration file name for models. &quot;&quot;&quot;</span>
<a name="l01265"></a>01265       <span class="keywordflow">return</span> self.<a class="code" href="classmultifit_1_1multifit_1_1ModelFitter.html#a1f157d42bbaf9286dc68b8f9ed57f37f">_model_config_filename</a>
<a name="l01266"></a>01266 
<a name="l01267"></a>01267    @property
<a name="l01268"></a><a class="code" href="classmultifit_1_1multifit_1_1ModelFitter.html#acb9f0912f19539a23049fc2c5d931223">01268</a>    <span class="keyword">def </span><a class="code" href="classmultifit_1_1multifit_1_1ModelFitter.html#acb9f0912f19539a23049fc2c5d931223">method_config_filename</a>(self):
<a name="l01269"></a>01269       <span class="stringliteral">&quot;&quot;&quot;! @return the base configuration file name for methods. &quot;&quot;&quot;</span>
<a name="l01270"></a>01270       <span class="keywordflow">return</span> self.<a class="code" href="classmultifit_1_1multifit_1_1ModelFitter.html#aab1b7c0a97608fe9ba6fdba1b8624a25">_method_config_filename</a>
<a name="l01271"></a>01271 
<a name="l01272"></a>01272    @property
<a name="l01273"></a><a class="code" href="classmultifit_1_1multifit_1_1ModelFitter.html#ad9d7d6caa614d9d5cae2b15f33f3d0e5">01273</a>    <span class="keyword">def </span><a class="code" href="classmultifit_1_1multifit_1_1ModelFitter.html#ad9d7d6caa614d9d5cae2b15f33f3d0e5">model_config_dir</a>(self):
<a name="l01274"></a>01274       <span class="stringliteral">&quot;&quot;&quot;! @return the base configuration directory for models. &quot;&quot;&quot;</span>
<a name="l01275"></a>01275       <span class="keywordflow">return</span> self.<a class="code" href="classmultifit_1_1multifit_1_1ModelFitter.html#ac88cdcf5dfc7e8d12de43fc341fb5f77">_model_config_dir</a>
<a name="l01276"></a>01276 
<a name="l01277"></a>01277    @property
<a name="l01278"></a><a class="code" href="classmultifit_1_1multifit_1_1ModelFitter.html#af48c0e5d26b4916da0bd162d90a09bdc">01278</a>    <span class="keyword">def </span><a class="code" href="classmultifit_1_1multifit_1_1ModelFitter.html#af48c0e5d26b4916da0bd162d90a09bdc">method_config_dir</a>(self):
<a name="l01279"></a>01279       <span class="stringliteral">&quot;&quot;&quot;! @return the base configuration directory for methods. &quot;&quot;&quot;</span>
<a name="l01280"></a>01280       <span class="keywordflow">return</span> self.<a class="code" href="classmultifit_1_1multifit_1_1ModelFitter.html#ac3b64bc2b4379e7ed783835afcf97574">_method_config_dir</a>
<a name="l01281"></a>01281 
<a name="l01282"></a>01282    @property
<a name="l01283"></a><a class="code" href="classmultifit_1_1multifit_1_1ModelFitter.html#a2f1a7ed27cef481ab6e31b8c0297dbff">01283</a>    <span class="keyword">def </span><a class="code" href="classmultifit_1_1multifit_1_1ModelFitter.html#a2f1a7ed27cef481ab6e31b8c0297dbff">fitting_config_dir</a>(self):
<a name="l01284"></a>01284       <span class="stringliteral">&quot;&quot;&quot;! @return the base fitting configuration directory. &quot;&quot;&quot;</span>
<a name="l01285"></a>01285       <span class="keywordflow">return</span> self.<a class="code" href="classmultifit_1_1multifit_1_1ModelFitter.html#ad1cf873f500f69b95cf913d546e0b337">_fitting_config_dir</a>
<a name="l01286"></a>01286 
<a name="l01287"></a>01287    @property
<a name="l01288"></a><a class="code" href="classmultifit_1_1multifit_1_1ModelFitter.html#aa0eb87a7079f22c1e295b8d3b9e2ceae">01288</a>    <span class="keyword">def </span><a class="code" href="classmultifit_1_1multifit_1_1ModelFitter.html#aa0eb87a7079f22c1e295b8d3b9e2ceae">model_module_dir</a>(self):
<a name="l01289"></a>01289       <span class="stringliteral">&quot;&quot;&quot;! @return the base module directory for models. &quot;&quot;&quot;</span>
<a name="l01290"></a>01290       <span class="keywordflow">return</span> self.<a class="code" href="classmultifit_1_1multifit_1_1ModelFitter.html#a97811d75dfbdcbad4a0ff0ed539d2da5">_model_module_dir</a>
<a name="l01291"></a>01291 
<a name="l01292"></a>01292    @property
<a name="l01293"></a><a class="code" href="classmultifit_1_1multifit_1_1ModelFitter.html#a18b4720b00782d0b7aac5d0108a90be1">01293</a>    <span class="keyword">def </span><a class="code" href="classmultifit_1_1multifit_1_1ModelFitter.html#a18b4720b00782d0b7aac5d0108a90be1">method_module_dir</a>(self):
<a name="l01294"></a>01294       <span class="stringliteral">&quot;&quot;&quot;! @return the base module directory for methods. &quot;&quot;&quot;</span>
<a name="l01295"></a>01295       <span class="keywordflow">return</span> self.<a class="code" href="classmultifit_1_1multifit_1_1ModelFitter.html#a0e30a963dc1bc5f85226d17b2f8b38c0">_method_module_dir</a>
<a name="l01296"></a>01296 
<a name="l01297"></a>01297    @property
<a name="l01298"></a><a class="code" href="classmultifit_1_1multifit_1_1ModelFitter.html#ae61e6d3fea51d5d094f59b8914ea2a3e">01298</a>    <span class="keyword">def </span><a class="code" href="classmultifit_1_1multifit_1_1ModelFitter.html#ae61e6d3fea51d5d094f59b8914ea2a3e">fitted_params</a>(self):
<a name="l01299"></a>01299       <span class="stringliteral">&quot;&quot;&quot;! @return the fitted values after fit() has returned. &quot;&quot;&quot;</span>
<a name="l01300"></a>01300       <span class="keywordflow">return</span> self.<a class="code" href="classmultifit_1_1multifit_1_1ModelFitter.html#a6b55373f5de8faede0d1cba6eddabf90">method</a>._fitted_params
<a name="l01301"></a>01301 
<a name="l01302"></a>01302    @property
<a name="l01303"></a><a class="code" href="classmultifit_1_1multifit_1_1ModelFitter.html#a056cae898da46ac320f2e50206b81844">01303</a>    <span class="keyword">def </span><a class="code" href="classmultifit_1_1multifit_1_1ModelFitter.html#a056cae898da46ac320f2e50206b81844">fitting_status</a>(self):
<a name="l01304"></a>01304       <span class="stringliteral">&quot;&quot;&quot;! </span>
<a name="l01305"></a>01305 <span class="stringliteral">         @return method-independent fitting status as a BaseFittingMethod.FittingStatus object once</span>
<a name="l01306"></a>01306 <span class="stringliteral">                 fitting is complete</span>
<a name="l01307"></a>01307 <span class="stringliteral">      &quot;&quot;&quot;</span>
<a name="l01308"></a>01308       <span class="keywordflow">return</span> self.<a class="code" href="classmultifit_1_1multifit_1_1ModelFitter.html#a6b55373f5de8faede0d1cba6eddabf90">method</a>.fitting_status
<a name="l01309"></a>01309 
<a name="l01310"></a>01310    @property
<a name="l01311"></a><a class="code" href="classmultifit_1_1multifit_1_1ModelFitter.html#a9ef6438dca8395c08e79e04cc4cafc8c">01311</a>    <span class="keyword">def </span><a class="code" href="classmultifit_1_1multifit_1_1ModelFitter.html#a9ef6438dca8395c08e79e04cc4cafc8c">diag_options</a>(self):
<a name="l01312"></a>01312       <span class="stringliteral">&quot;&quot;&quot;! </span>
<a name="l01313"></a>01313 <span class="stringliteral">         @return the method diagnostic options</span>
<a name="l01314"></a>01314 <span class="stringliteral">      &quot;&quot;&quot;</span>
<a name="l01315"></a>01315       <span class="keywordflow">return</span> self.<a class="code" href="classmultifit_1_1multifit_1_1ModelFitter.html#a6b55373f5de8faede0d1cba6eddabf90">method</a>.diag_options
<a name="l01316"></a>01316 
<a name="l01317"></a>01317 
<a name="l01318"></a>01318    @property
<a name="l01319"></a><a class="code" href="classmultifit_1_1multifit_1_1ModelFitter.html#a52d3a31a03a76a9b87f4e70bd9c81859">01319</a>    <span class="keyword">def </span><a class="code" href="classmultifit_1_1multifit_1_1ModelFitter.html#a52d3a31a03a76a9b87f4e70bd9c81859">fitting_info</a>(self):
<a name="l01320"></a>01320       <span class="stringliteral">&quot;&quot;&quot;! </span>
<a name="l01321"></a>01321 <span class="stringliteral">         @return method-specific fitting information as a BaseFittingInfo object once fitting is </span>
<a name="l01322"></a>01322 <span class="stringliteral">         complete </span>
<a name="l01323"></a>01323 <span class="stringliteral">      &quot;&quot;&quot;</span>
<a name="l01324"></a>01324       <span class="keywordflow">return</span> self.<a class="code" href="classmultifit_1_1multifit_1_1ModelFitter.html#a6b55373f5de8faede0d1cba6eddabf90">method</a>.fitting_info
<a name="l01325"></a>01325 
<a name="l01326"></a>01326    @property
<a name="l01327"></a><a class="code" href="classmultifit_1_1multifit_1_1ModelFitter.html#a4dae23436a0dfa16c612c8a91558ab02">01327</a>    <span class="keyword">def </span><a class="code" href="classmultifit_1_1multifit_1_1ModelFitter.html#a4dae23436a0dfa16c612c8a91558ab02">version</a>(self):
<a name="l01328"></a>01328       <span class="stringliteral">&quot;&quot;&quot;! @return the version of the ModelFitter class &quot;&quot;&quot;</span>
<a name="l01329"></a>01329       <span class="keywordflow">return</span> self.<a class="code" href="classmultifit_1_1multifit_1_1ModelFitter.html#abe629778903f1066ed667c3d0caf1536">_version</a>
<a name="l01330"></a>01330 
<a name="l01331"></a>01331 
<a name="l01332"></a>01332    <span class="comment"># --- Setters  </span>
<a name="l01333"></a>01333 
<a name="l01334"></a>01334    @model.setter 
<a name="l01335"></a><a class="code" href="classmultifit_1_1multifit_1_1ModelFitter.html#abf9b1137d069cfd3df03bfe7a669795d">01335</a>    <span class="keyword">def </span><a class="code" href="classmultifit_1_1multifit_1_1ModelFitter.html#abf9b1137d069cfd3df03bfe7a669795d">model</a>(self, model):
<a name="l01336"></a>01336       <span class="stringliteral">&quot;&quot;&quot;! </span>
<a name="l01337"></a>01337 <span class="stringliteral">         Secify the model to fit </span>
<a name="l01338"></a>01338 <span class="stringliteral">         @param model a model object derived from BaseFittingModel   </span>
<a name="l01339"></a>01339 <span class="stringliteral">      &quot;&quot;&quot;</span>
<a name="l01340"></a>01340       self.<a class="code" href="classmultifit_1_1multifit_1_1ModelFitter.html#ab0b65d7fddae489a575572f70e1f0955">_model</a> = model 
<a name="l01341"></a>01341 
<a name="l01342"></a>01342    @method.setter 
<a name="l01343"></a><a class="code" href="classmultifit_1_1multifit_1_1ModelFitter.html#a6b55373f5de8faede0d1cba6eddabf90">01343</a>    <span class="keyword">def </span><a class="code" href="classmultifit_1_1multifit_1_1ModelFitter.html#a6b55373f5de8faede0d1cba6eddabf90">method</a>(self, method):
<a name="l01344"></a>01344       <span class="stringliteral">&quot;&quot;&quot;! </span>
<a name="l01345"></a>01345 <span class="stringliteral">         Specify the fitting method to apply </span>
<a name="l01346"></a>01346 <span class="stringliteral">         @param method a method object derived from BaseFittingMethod   </span>
<a name="l01347"></a>01347 <span class="stringliteral">      &quot;&quot;&quot;</span>
<a name="l01348"></a>01348       self.<a class="code" href="classmultifit_1_1multifit_1_1ModelFitter.html#a449c18778a615108a0918b2eba461438">_method</a> = method 
<a name="l01349"></a>01349 
<a name="l01350"></a>01350    <span class="comment"># ~~~~~~~~~~~~~~</span>
<a name="l01351"></a>01351    <span class="comment"># Public Methods </span>
<a name="l01352"></a>01352    <span class="comment"># ~~~~~~~~~~~~~~</span>
<a name="l01353"></a>01353 
<a name="l01354"></a>01354    <span class="comment"># -----------------------------------------------------------------------------------------------</span>
<a name="l01355"></a><a class="code" href="classmultifit_1_1multifit_1_1ModelFitter.html#a73ec8245ad6ca3743a747605c6b48228">01355</a>    <span class="keyword">def </span><a class="code" href="classmultifit_1_1multifit_1_1ModelFitter.html#a73ec8245ad6ca3743a747605c6b48228" title="Fit data using input arguments and the specified parametric model &amp;amp; fitting method.">fit</a>(self, args):
<a name="l01356"></a>01356       <span class="stringliteral">&quot;&quot;&quot;! </span>
<a name="l01357"></a>01357 <span class="stringliteral">         Fit data using input arguments and the specified parametric model &amp; fitting method. </span>
<a name="l01358"></a>01358 <span class="stringliteral">         Return a BaseFittingMethod.FittingStatus object that contains the outcome of the fit</span>
<a name="l01359"></a>01359 <span class="stringliteral">         @param args a list of arguments that can be exploited for performing the fit</span>
<a name="l01360"></a>01360 <span class="stringliteral">         @return FittingStatus object </span>
<a name="l01361"></a>01361 <span class="stringliteral">      &quot;&quot;&quot;</span>
<a name="l01362"></a>01362 
<a name="l01363"></a>01363       <span class="keywordflow">if</span> len(self.<a class="code" href="classmultifit_1_1multifit_1_1ModelFitter.html#abf9b1137d069cfd3df03bfe7a669795d">model</a>.params) == 0: 
<a name="l01364"></a>01364          <span class="comment"># Nothing to fit</span>
<a name="l01365"></a>01365          <span class="keywordflow">raise</span>(ModelFitter.FittingError(
<a name="l01366"></a>01366              <span class="stringliteral">&quot;The model does not have any parameter to fit model {0}.&quot;</span>.format(self.<a class="code" href="classmultifit_1_1multifit_1_1ModelFitter.html#abf9b1137d069cfd3df03bfe7a669795d">model</a>.name)))
<a name="l01367"></a>01367 
<a name="l01368"></a>01368       <span class="comment"># Invoke method &lt;method&gt; to fit model &lt;model&gt;    </span>
<a name="l01369"></a>01369       self.<a class="code" href="classmultifit_1_1multifit_1_1ModelFitter.html#aced4a46287cdec2b92a0e6a73f59ea9b">_fitting_status</a> = self.<a class="code" href="classmultifit_1_1multifit_1_1ModelFitter.html#a6b55373f5de8faede0d1cba6eddabf90">method</a>.fit(self.<a class="code" href="classmultifit_1_1multifit_1_1ModelFitter.html#abf9b1137d069cfd3df03bfe7a669795d">model</a>, args)
<a name="l01370"></a>01370 
<a name="l01371"></a>01371       <span class="keywordflow">return</span> self.<a class="code" href="classmultifit_1_1multifit_1_1ModelFitter.html#aced4a46287cdec2b92a0e6a73f59ea9b">_fitting_status</a>
<a name="l01372"></a>01372 
<a name="l01373"></a>01373    <span class="comment"># -----------------------------------------------------------------------------------------------</span>
<a name="l01374"></a><a class="code" href="classmultifit_1_1multifit_1_1ModelFitter.html#a0f3159a93207fb34e43e995ee8a1f8f4">01374</a>    <span class="keyword">def </span><a class="code" href="classmultifit_1_1multifit_1_1ModelFitter.html#a0f3159a93207fb34e43e995ee8a1f8f4">get_version</a>(self):
<a name="l01375"></a>01375       <span class="keywordflow">return</span> self.<a class="code" href="classmultifit_1_1multifit_1_1ModelFitter.html#a4dae23436a0dfa16c612c8a91558ab02">version</a>
<a name="l01376"></a>01376 
<a name="l01377"></a>01377    <span class="comment"># ~~~~~~~~~~~~~~~</span>
<a name="l01378"></a>01378    <span class="comment"># Private Methods </span>
<a name="l01379"></a>01379    <span class="comment"># ~~~~~~~~~~~~~~~</span>
<a name="l01380"></a>01380    
<a name="l01381"></a>01381    <span class="comment"># -----------------------------------------------------------------------------------------------</span>
<a name="l01382"></a>01382    <span class="keyword">def </span>_import_module(self, module_name, module_dir):
<a name="l01383"></a>01383       <span class="stringliteral">&quot;&quot;&quot;! Find and load a module @c module_name from a directory @c module_dir &quot;&quot;&quot;</span>
<a name="l01384"></a>01384 
<a name="l01385"></a>01385       <span class="keywordflow">try</span>:
<a name="l01386"></a>01386 
<a name="l01387"></a>01387          file_obj, filename, data = imp.find_module(module_name, [module_dir])
<a name="l01388"></a>01388          <span class="keywordflow">return</span> imp.load_module(module_name, file_obj, filename, data)
<a name="l01389"></a>01389 
<a name="l01390"></a>01390       <span class="keywordflow">except</span>:
<a name="l01391"></a>01391          <span class="keywordflow">raise</span>(ModelFitter.FittingError(<span class="stringliteral">&quot;Could not load module {0} from {1}&quot;</span>.format(
<a name="l01392"></a>01392                                                                        module_name, module_dir)))
<a name="l01393"></a>01393 
<a name="l01394"></a>01394    <span class="comment"># -----------------------------------------------------------------------------------------------</span>
<a name="l01395"></a>01395    <span class="keyword">def </span>_setup_method(self, method_name, method_config_filename,
<a name="l01396"></a>01396                            method_config_dir, fitting_config_dir, method_module_dir):
<a name="l01397"></a>01397       <span class="stringliteral">&quot;&quot;&quot;! Load and instantiate a FittingMethod object for method @c method_name &quot;&quot;&quot;</span>   
<a name="l01398"></a>01398 
<a name="l01399"></a>01399       module = self.<a class="code" href="classmultifit_1_1multifit_1_1ModelFitter.html#ab8978123b0f8b8b9b6d3772638e8b8b4" title="Find and load a module module_name from a directory module_dir.">_import_module</a>(method_name, method_module_dir)
<a name="l01400"></a>01400 
<a name="l01401"></a>01401       <span class="keywordflow">return</span> module.FittingMethod(method_config_dir=method_config_dir, 
<a name="l01402"></a>01402                                   fitting_config_dir=fitting_config_dir,
<a name="l01403"></a>01403                                   method_config_filename=method_config_filename)
<a name="l01404"></a>01404 
<a name="l01405"></a>01405    <span class="comment"># -----------------------------------------------------------------------------------------------</span>
<a name="l01406"></a>01406    <span class="keyword">def </span>_setup_model(self, model_name, model_config_filename, 
<a name="l01407"></a>01407                           model_config_dir, model_module_dir):
<a name="l01408"></a>01408       <span class="stringliteral">&quot;&quot;&quot;! Load and instantiate a FittingModel object for module @c model_name &quot;&quot;&quot;</span>   
<a name="l01409"></a>01409 
<a name="l01410"></a>01410       model = <span class="keywordtype">None</span> 
<a name="l01411"></a>01411       <span class="keywordflow">if</span> model_name <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:
<a name="l01412"></a>01412          module = self.<a class="code" href="classmultifit_1_1multifit_1_1ModelFitter.html#ab8978123b0f8b8b9b6d3772638e8b8b4" title="Find and load a module module_name from a directory module_dir.">_import_module</a>(model_name, model_module_dir)
<a name="l01413"></a>01413          model = module.FittingModel(config_dir=model_config_dir, 
<a name="l01414"></a>01414                                      config_filename=model_config_filename)
<a name="l01415"></a>01415 
<a name="l01416"></a>01416       <span class="keywordflow">return</span> model
<a name="l01417"></a>01417 
<a name="l01418"></a>01418    <span class="comment"># -----------------------------------------------------------------------------------------------</span>
<a name="l01419"></a>01419    <span class="keyword">def </span>_default_objective_func(self):
<a name="l01420"></a>01420       <span class="keywordflow">print</span>(<span class="stringliteral">&quot;Multifit - In default dummy objective function. Please specify a valid objective function.&quot;</span>)
<a name="l01421"></a>01421 
<a name="l01422"></a>01422 
<a name="l01423"></a>01423    <span class="comment"># -----------------------------------------------------------------------------------------------</span>
<a name="l01424"></a>01424    <span class="keyword">def </span>_file_exists(self, filepath):
<a name="l01425"></a>01425       <span class="stringliteral">&quot;&quot;&quot;! </span>
<a name="l01426"></a>01426 <span class="stringliteral">         Safe way of checking if a file (not a directory) does exist. </span>
<a name="l01427"></a>01427 <span class="stringliteral">         @param filepath file path to chech for existence</span>
<a name="l01428"></a>01428 <span class="stringliteral">         @retval True if file exists</span>
<a name="l01429"></a>01429 <span class="stringliteral">         @retval False otherwise</span>
<a name="l01430"></a>01430 <span class="stringliteral">      &quot;&quot;&quot;</span>
<a name="l01431"></a>01431       <span class="keywordflow">try</span>:
<a name="l01432"></a>01432         with open(filepath) <span class="keyword">as</span> file:
<a name="l01433"></a>01433             <span class="keywordflow">return</span> <span class="keyword">True</span>
<a name="l01434"></a>01434       <span class="keywordflow">except</span> IOError <span class="keyword">as</span> e:
<a name="l01435"></a>01435         <span class="keywordflow">return</span> <span class="keyword">False</span>
<a name="l01436"></a>01436 
<a name="l01437"></a>01437    <span class="comment"># ~~~~~~~~~~</span>
<a name="l01438"></a>01438    <span class="comment"># Exceptions </span>
<a name="l01439"></a>01439    <span class="comment"># ~~~~~~~~~~   </span>
<a name="l01440"></a>01440 
<a name="l01441"></a>01441 <span class="comment">#   # ------------------------------------------------------------------------------</span>
<a name="l01442"></a>01442 <span class="comment">#   class ModelFitterException(Exception):</span>
<a name="l01443"></a>01443 <span class="comment">#      def __str__(self):</span>
<a name="l01444"></a>01444 <span class="comment">#         return &quot;MultiFit *** ERROR ***: {0}&quot;.format(self.message)</span>
<a name="l01445"></a>01445 
<a name="l01446"></a>01446    <span class="comment"># ------------------------------------------------------------------------------</span>
<a name="l01447"></a><a class="code" href="classmultifit_1_1multifit_1_1ModelFitter_1_1InvalidArgument.html">01447</a>    <span class="keyword">class </span><a class="code" href="classmultifit_1_1multifit_1_1ModelFitter_1_1InvalidArgument.html" title="Exception thrown in case of invalid argument(s) supplied.">InvalidArgument</a>(<a class="code" href="classException.html">Exception</a>):
<a name="l01448"></a>01448       <span class="stringliteral">&quot;&quot;&quot;! </span>
<a name="l01449"></a>01449 <span class="stringliteral">         Exception thrown in case of invalid argument(s) supplied</span>
<a name="l01450"></a>01450 <span class="stringliteral">      &quot;&quot;&quot;</span>
<a name="l01451"></a><a class="code" href="classmultifit_1_1multifit_1_1ModelFitter_1_1InvalidArgument.html#a59d0528bc2a166abdd758aec1b17fb4f">01451</a>       <span class="keyword">def </span><a class="code" href="classmultifit_1_1multifit_1_1ModelFitter_1_1InvalidArgument.html#a59d0528bc2a166abdd758aec1b17fb4f">__init__</a>(self, message, argument):
<a name="l01452"></a>01452          <span class="stringliteral">&quot;&quot;&quot;!</span>
<a name="l01453"></a>01453 <span class="stringliteral">            @param message message to print</span>
<a name="l01454"></a>01454 <span class="stringliteral">            @param argument argument passed</span>
<a name="l01455"></a>01455 <span class="stringliteral">         &quot;&quot;&quot;</span>
<a name="l01456"></a>01456          self.<a class="code" href="classmultifit_1_1multifit_1_1ModelFitter_1_1InvalidArgument.html#a20f45b4fbf009f48b07addc50d5973d6">_message</a> = message
<a name="l01457"></a>01457          self.<a class="code" href="classmultifit_1_1multifit_1_1ModelFitter_1_1InvalidArgument.html#afbcd6ab7ad71624f60fa26379e97e45b">_argument</a> = argument
<a name="l01458"></a>01458 
<a name="l01459"></a><a class="code" href="classmultifit_1_1multifit_1_1ModelFitter_1_1InvalidArgument.html#a9355c3468336fb487f8320ab050c7473">01459</a>       <span class="keyword">def </span><a class="code" href="classmultifit_1_1multifit_1_1ModelFitter_1_1InvalidArgument.html#a9355c3468336fb487f8320ab050c7473" title="String representation of the InvalidArgument class.">__str__</a>(self):
<a name="l01460"></a>01460          <span class="stringliteral">&quot;&quot;&quot;! String representation of the InvalidArgument class &quot;&quot;&quot;</span>
<a name="l01461"></a>01461          <span class="keywordflow">return</span> <span class="stringliteral">&quot;MultiFit *** ERROR ***: {0} - Invalid argument: {1} .&quot;</span>.format(
<a name="l01462"></a>01462                                                                     self.<a class="code" href="classmultifit_1_1multifit_1_1ModelFitter_1_1InvalidArgument.html#a20f45b4fbf009f48b07addc50d5973d6">_message</a>, self.<a class="code" href="classmultifit_1_1multifit_1_1ModelFitter_1_1InvalidArgument.html#afbcd6ab7ad71624f60fa26379e97e45b">_argument</a>)
<a name="l01463"></a>01463 
<a name="l01464"></a>01464    <span class="comment"># ------------------------------------------------------------------------------</span>
<a name="l01465"></a><a class="code" href="classmultifit_1_1multifit_1_1ModelFitter_1_1ConfigError.html">01465</a>    <span class="keyword">class </span><a class="code" href="classmultifit_1_1multifit_1_1ModelFitter_1_1ConfigError.html" title="Exception thrown in case of the configuration file specified could not be found on disk...">ConfigError</a>(<a class="code" href="classException.html">Exception</a>):
<a name="l01466"></a>01466       <span class="stringliteral">&quot;&quot;&quot;! </span>
<a name="l01467"></a>01467 <span class="stringliteral">         Exception thrown in case of the configuration file specified could not be found on disk</span>
<a name="l01468"></a>01468 <span class="stringliteral">      &quot;&quot;&quot;</span>
<a name="l01469"></a><a class="code" href="classmultifit_1_1multifit_1_1ModelFitter_1_1ConfigError.html#a701313ee91afc5e3cd0842d5e73177ce">01469</a>       <span class="keyword">def </span><a class="code" href="classmultifit_1_1multifit_1_1ModelFitter_1_1ConfigError.html#a701313ee91afc5e3cd0842d5e73177ce">__init__</a>(self, filepath):
<a name="l01470"></a>01470          <span class="stringliteral">&quot;&quot;&quot;!</span>
<a name="l01471"></a>01471 <span class="stringliteral">            @param filepath file path of the configuration file </span>
<a name="l01472"></a>01472 <span class="stringliteral">         &quot;&quot;&quot;</span>
<a name="l01473"></a>01473          self.<a class="code" href="classmultifit_1_1multifit_1_1ModelFitter_1_1ConfigError.html#a45f18e609f8686b98e4c8d591d8ffa6f">_filepath</a> = filepath
<a name="l01474"></a>01474 
<a name="l01475"></a><a class="code" href="classmultifit_1_1multifit_1_1ModelFitter_1_1ConfigError.html#a9e537033f9f77b4686988eff6f161a12">01475</a>       <span class="keyword">def </span><a class="code" href="classmultifit_1_1multifit_1_1ModelFitter_1_1ConfigError.html#a9e537033f9f77b4686988eff6f161a12" title="String representation of the ConfigError class.">__str__</a>(self):
<a name="l01476"></a>01476          <span class="stringliteral">&quot;&quot;&quot;! String representation of the ConfigError class &quot;&quot;&quot;</span>
<a name="l01477"></a>01477          <span class="keywordflow">return</span> <span class="stringliteral">&quot;MultiFit *** ERROR ***: configuration file {0} not found.&quot;</span>.format(self.<a class="code" href="classmultifit_1_1multifit_1_1ModelFitter_1_1ConfigError.html#a45f18e609f8686b98e4c8d591d8ffa6f">_filepath</a>)
<a name="l01478"></a>01478 
<a name="l01479"></a>01479    <span class="comment"># ------------------------------------------------------------------------------</span>
<a name="l01480"></a><a class="code" href="classmultifit_1_1multifit_1_1ModelFitter_1_1NotImplementedError.html">01480</a>    <span class="keyword">class </span><a class="code" href="classmultifit_1_1multifit_1_1ModelFitter_1_1NotImplementedError.html" title="Exception thrown when a method that is not yet implented has been invoked.">NotImplementedError</a>(<a class="code" href="classException.html">Exception</a>):
<a name="l01481"></a>01481       <span class="stringliteral">&quot;&quot;&quot;! </span>
<a name="l01482"></a>01482 <span class="stringliteral">         Exception thrown when a method that is not yet implented has been invoked</span>
<a name="l01483"></a>01483 <span class="stringliteral">      &quot;&quot;&quot;</span>
<a name="l01484"></a><a class="code" href="classmultifit_1_1multifit_1_1ModelFitter_1_1NotImplementedError.html#ac16bf17f1ad102d700771633d35c6bea">01484</a>       <span class="keyword">def </span><a class="code" href="classmultifit_1_1multifit_1_1ModelFitter_1_1NotImplementedError.html#ac16bf17f1ad102d700771633d35c6bea">__init__</a>(self, method_name):
<a name="l01485"></a>01485          Exception.__init__(self)
<a name="l01486"></a>01486 
<a name="l01487"></a>01487          <span class="stringliteral">&quot;&quot;&quot;!</span>
<a name="l01488"></a>01488 <span class="stringliteral">            @param method_name method name that has been invoked</span>
<a name="l01489"></a>01489 <span class="stringliteral">         &quot;&quot;&quot;</span>
<a name="l01490"></a>01490          self.<a class="code" href="classmultifit_1_1multifit_1_1ModelFitter_1_1NotImplementedError.html#a1e84e559e0eab047e48719ca8110dd27">_method_name</a> = method_name
<a name="l01491"></a>01491 
<a name="l01492"></a><a class="code" href="classmultifit_1_1multifit_1_1ModelFitter_1_1NotImplementedError.html#aa660a92755e32c23056e7e1c15346b5f">01492</a>       <span class="keyword">def </span><a class="code" href="classmultifit_1_1multifit_1_1ModelFitter_1_1NotImplementedError.html#aa660a92755e32c23056e7e1c15346b5f" title="String representation of the NotImplementedError class.">__str__</a>(self):
<a name="l01493"></a>01493          <span class="stringliteral">&quot;&quot;&quot;! String representation of the NotImplementedError class &quot;&quot;&quot;</span>
<a name="l01494"></a>01494          <span class="keywordflow">return</span> <span class="stringliteral">&quot;MultiFit *** ERROR ***: method {0} must be implemented in derived classes.&quot;</span>.format(
<a name="l01495"></a>01495                                                                                        method_name) 
<a name="l01496"></a>01496 
<a name="l01497"></a>01497    <span class="comment"># -----------------------------------------------------------------------------------------------</span>
<a name="l01498"></a><a class="code" href="classmultifit_1_1multifit_1_1ModelFitter_1_1FittingError.html">01498</a>    <span class="keyword">class </span><a class="code" href="classmultifit_1_1multifit_1_1ModelFitter_1_1FittingError.html" title="Exception thrown when a fitting error has occurred.">FittingError</a>(<a class="code" href="classException.html">Exception</a>):
<a name="l01499"></a>01499       <span class="stringliteral">&quot;&quot;&quot;! </span>
<a name="l01500"></a>01500 <span class="stringliteral">         Exception thrown when a fitting error has occurred</span>
<a name="l01501"></a>01501 <span class="stringliteral">      &quot;&quot;&quot;</span>
<a name="l01502"></a><a class="code" href="classmultifit_1_1multifit_1_1ModelFitter_1_1FittingError.html#abc291dae868a9f77623c7eb11a223178">01502</a>       <span class="keyword">def </span><a class="code" href="classmultifit_1_1multifit_1_1ModelFitter_1_1FittingError.html#abc291dae868a9f77623c7eb11a223178">__init__</a>(self, msg):
<a name="l01503"></a>01503          <span class="stringliteral">&quot;&quot;&quot;!</span>
<a name="l01504"></a>01504 <span class="stringliteral">            @param msg error message </span>
<a name="l01505"></a>01505 <span class="stringliteral">         &quot;&quot;&quot;</span>
<a name="l01506"></a>01506          self.<a class="code" href="classmultifit_1_1multifit_1_1ModelFitter_1_1FittingError.html#a7a3d99f26d15e99bc920ebac1146e012">_msg</a> = msg
<a name="l01507"></a>01507          self.<a class="code" href="classmultifit_1_1multifit_1_1ModelFitter_1_1FittingError.html#a56547202d3ccfb1580f8ab8ac7bb7dfa">_exc_info</a> = sys.exc_info()[1]
<a name="l01508"></a>01508 
<a name="l01509"></a><a class="code" href="classmultifit_1_1multifit_1_1ModelFitter_1_1FittingError.html#ae2d808d5fd4944f10138d6c0f02241cd">01509</a>       <span class="keyword">def </span><a class="code" href="classmultifit_1_1multifit_1_1ModelFitter_1_1FittingError.html#ae2d808d5fd4944f10138d6c0f02241cd" title="String representation of the FittingError class.">__str__</a>(self):
<a name="l01510"></a>01510          <span class="stringliteral">&quot;&quot;&quot;! String representation of the FittingError class &quot;&quot;&quot;</span>
<a name="l01511"></a>01511          <span class="keywordflow">if</span> self.<a class="code" href="classmultifit_1_1multifit_1_1ModelFitter_1_1FittingError.html#a56547202d3ccfb1580f8ab8ac7bb7dfa">_exc_info</a> <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:
<a name="l01512"></a>01512             <span class="keywordflow">return</span> <span class="stringliteral">&quot;MultiFit *** ERROR ***: {0} ({1})&quot;</span>.format(self.<a class="code" href="classmultifit_1_1multifit_1_1ModelFitter_1_1FittingError.html#a7a3d99f26d15e99bc920ebac1146e012">_msg</a>, self.<a class="code" href="classmultifit_1_1multifit_1_1ModelFitter_1_1FittingError.html#a56547202d3ccfb1580f8ab8ac7bb7dfa">_exc_info</a>)
<a name="l01513"></a>01513          <span class="keywordflow">else</span>:
<a name="l01514"></a>01514             <span class="keywordflow">return</span> <span class="stringliteral">&quot;MultiFit *** ERROR ***: {0}&quot;</span>.format(self.<a class="code" href="classmultifit_1_1multifit_1_1ModelFitter_1_1FittingError.html#a7a3d99f26d15e99bc920ebac1146e012">_msg</a>)
<a name="l01515"></a>01515    
<a name="l01516"></a>01516 
<a name="l01517"></a>01517    
</pre></div></div>
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="multifit_8py.html">multifit.py</a>      </li>
      <li class="footer">Generated on Thu Apr 30 2015 06:12:02 for MultiFit by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.3 </li>
    </ul>
  </div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>


</body>
</html>
