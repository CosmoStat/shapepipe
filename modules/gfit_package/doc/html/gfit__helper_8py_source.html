<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.7"/>
<title>gfit: /home/marc/cea-epfl/trunk/gfit_package/gfit/gfit_helper.py Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">gfit
   &#160;<span id="projectnumber">1.0.0</span>
   </div>
   <div id="projectbrief">Galaxy Shape Measurement</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.7 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Packages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('gfit__helper_8py_source.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">gfit_helper.py</div>  </div>
</div><!--header-->
<div class="contents">
<a href="gfit__helper_8py.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno"><a class="line" href="namespacegfit_1_1gfit__helper.html">    1</a></span>&#160;<span class="stringliteral">&quot;&quot;&quot;! </span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="stringliteral">   Various helper functions</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="stringliteral">&quot;&quot;&quot;</span> </div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;</div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"># -- Python imports</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="keyword">import</span> os, sys</div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="keyword">import</span> math</div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="keyword">import</span> numpy</div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="keyword">import</span> scipy</div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="keyword">import</span> pyfits</div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="keyword">import</span> shutil</div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;</div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment"># --- Python imports</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="keywordflow">try</span>:</div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;    <span class="keyword">from</span> thread <span class="keyword">import</span> get_ident <span class="keyword">as</span> _get_ident</div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="keywordflow">except</span> ImportError:</div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;    <span class="keyword">from</span> dummy_thread <span class="keyword">import</span> get_ident <span class="keyword">as</span> _get_ident</div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="keyword">from</span> _abcoll <span class="keyword">import</span> KeysView, ValuesView, ItemsView</div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;</div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment"># -- External import</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="keyword">from</span> scatalog <span class="keyword">import</span> *  <span class="comment"># file catalog management             </span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="keyword">from</span> <a class="code" href="namespacempfg_1_1mp__helper.html">mpfg.mp_helper</a> <span class="keyword">import</span> *  <span class="comment"># base Helper</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;</div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment"># -- Module-specific imports  </span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="keyword">from</span> gfit_helper <span class="keyword">import</span> *  <span class="comment"># this module helper utility functions</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="keyword">from</span> gfit_version <span class="keyword">import</span> __version__  <span class="comment"># version information</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="comment"># -------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00029"></a><span class="lineno"><a class="line" href="classgfit_1_1gfit__helper_1_1GfitHelper.html">   29</a></span>&#160;<span class="keyword">class </span><a class="code" href="classgfit_1_1gfit__helper_1_1GfitHelper.html">GfitHelper</a>(<a class="code" href="classHelper.html">Helper</a>):</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;   <span class="stringliteral">&quot;&quot;&quot;! Convenient utility functions &quot;&quot;&quot;</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;   <span class="comment"># -----------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00034"></a><span class="lineno"><a class="line" href="classgfit_1_1gfit__helper_1_1GfitHelper.html#a6a277504110ba47bd9a36d3d699cab87">   34</a></span>&#160;   <span class="keyword">def </span><a class="code" href="classgfit_1_1gfit__helper_1_1GfitHelper.html#a6a277504110ba47bd9a36d3d699cab87">get_version</a>(self):</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;      <span class="stringliteral">&quot;&quot;&quot;! </span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="stringliteral">          Get the version number of this pse code as text </span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="stringliteral">          @return version number of this pse code as text</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="stringliteral">      &quot;&quot;&quot;</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;      <span class="keywordflow">return</span> __version__ </div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;   <span class="comment"># -----------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00042"></a><span class="lineno"><a class="line" href="classgfit_1_1gfit__helper_1_1GfitHelper.html#afe8a134a678d445a26b20301ec1b0bb8">   42</a></span>&#160;   <span class="keyword">def </span><a class="code" href="classgfit_1_1gfit__helper_1_1GfitHelper.html#afe8a134a678d445a26b20301ec1b0bb8">show_config_summary</a>(self, master):</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;      </div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;      <span class="keywordflow">if</span> master.logging_enabled():</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;         <span class="comment"># --- gfit version</span></div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;         master.logger.log_info_p(<span class="stringliteral">&quot;\n*** gfit {0} ***\n&quot;</span>.format(self.<a class="code" href="classgfit_1_1gfit__helper_1_1GfitHelper.html#a6a277504110ba47bd9a36d3d699cab87">get_version</a>()))</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;         <span class="comment"># --- Python modules</span></div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;         master.logger.log_info_p(<span class="stringliteral">&quot;Standard Python modules:&quot;</span>)</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;         <span class="keywordflow">try</span>:</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;            np = __import__(<span class="stringliteral">&#39;numpy&#39;</span>, globals(), locals(), [], -1)</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;            master.logger.log_info_p(<span class="stringliteral">&quot;- numpy {0}\t\t{1}&quot;</span>.format(np.__version__, np.__file__))        </div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;            sp = __import__(<span class="stringliteral">&#39;scipy&#39;</span>, globals(), locals(), [], -1)</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;            master.logger.log_info_p(<span class="stringliteral">&quot;- scipy {0}\t\t{1}&quot;</span>.format(sp.__version__, sp.__file__))           </div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;            pyfits = __import__(<span class="stringliteral">&#39;pyfits&#39;</span>, globals(), locals(), [], -1)</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;            master.logger.log_info_p(<span class="stringliteral">&quot;- pyfits {0}\t\t{1}&quot;</span>.format(pyfits.__version__, pyfits.__file__))     </div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;            mpl = __import__(<span class="stringliteral">&#39;matplotlib&#39;</span>, globals(), locals(), [], -1)</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;            master.logger.log_info_p(<span class="stringliteral">&quot;- matplotlib {0}\t{1}&quot;</span>.format(mpl.__version__, mpl.__file__))  </div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;            galsim = __import__(<span class="stringliteral">&#39;galsim&#39;</span>, globals(), locals(), [], -1)</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;            master.logger.log_info_p(<span class="stringliteral">&quot;- galsim {0}\t\t{1}&quot;</span>.format(galsim.version, galsim.__file__))  </div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;            <span class="comment"># asc = __import__(&#39;asciidata&#39;, globals(), locals(), [], -1)</span></div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;            <span class="comment"># master.logger.log_info_p(&quot;- asciidata {0}\t{1}&quot;.format(asc.__version__, asc.__file__))  </span></div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;         <span class="keywordflow">except</span> Exception <span class="keyword">as</span> detail:</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;            master.logger.log_error_p(<span class="stringliteral">&quot;- some modules could not be found: {0}\n&quot;</span>.format(detail)) </div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;         master.logger.log_info_p(<span class="stringliteral">&quot;\nMPF Python modules:&quot;</span>)</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;         <span class="keywordflow">try</span>:</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;            mpfg = __import__(<span class="stringliteral">&#39;mpfg&#39;</span>, globals(), locals(), [], -1)</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;            master.logger.log_info_p(<span class="stringliteral">&quot;- mpfg {0}\t\t{1}&quot;</span>.format(mpfg.__version__, mpfg.__file__))  </div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;            mpfx = __import__(<span class="stringliteral">&#39;mpfx&#39;</span>, globals(), locals(), [], -1)</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;            master.logger.log_info_p(<span class="stringliteral">&quot;- mpfx {0}\t\t{1}&quot;</span>.format(mpfx.__version__, mpfx.__file__))  </div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;            slog = __import__(<span class="stringliteral">&#39;slogger&#39;</span>, globals(), locals(), [], -1)</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;            master.logger.log_info_p(<span class="stringliteral">&quot;- slogger {0}\t\t{1}&quot;</span>.format(slog.__version__, slog.__file__))  </div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;            sconf = __import__(<span class="stringliteral">&#39;sconfig&#39;</span>, globals(), locals(), [], -1)</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;            master.logger.log_info_p(<span class="stringliteral">&quot;- sconfig {0}\t\t{1}&quot;</span>.format(sconf.__version__, sconf.__file__))  </div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;            scat = __import__(<span class="stringliteral">&#39;scatalog&#39;</span>, globals(), locals(), [], -1)</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;            master.logger.log_info_p(<span class="stringliteral">&quot;- scatalog {0}\t{1}&quot;</span>.format(scat.__version__, scat.__file__)) </div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;         <span class="keywordflow">except</span> Exception <span class="keyword">as</span> detail:</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;            master.logger.log_error_p(<span class="stringliteral">&quot;- some modules could not be found: {0}\n&quot;</span>.format(detail)) </div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;         master.logger.log_info_p(<span class="stringliteral">&quot;\nFitting modules:&quot;</span>)</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;         <span class="keywordflow">try</span>:</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;            multi = __import__(<span class="stringliteral">&#39;multifit&#39;</span>, globals(), locals(), [], -1)</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;            master.logger.log_info_p(<span class="stringliteral">&quot;- multifit {0}\t{1}&quot;</span>.format(multi.__version__, multi.__file__))    </div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;            scdm = __import__(<span class="stringliteral">&#39;scdm&#39;</span>, globals(), locals(), [], -1)</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;            master.logger.log_info_p(<span class="stringliteral">&quot;- scdm {0}\t\t{1}&quot;</span>.format(scdm.__version__, scdm.__file__))</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;            kapteyn = __import__(<span class="stringliteral">&#39;kapteyn.kmpfit&#39;</span>, globals(), locals(), [], -1)</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;            master.logger.log_info_p(<span class="stringliteral">&quot;- kmpfit {0}\t\t{1}&quot;</span>.format(kapteyn.__version__, kapteyn.__file__))</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;            </div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;         <span class="keywordflow">except</span> Exception <span class="keyword">as</span> detail:</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;            master.logger.log_error_p(<span class="stringliteral">&quot;- some modules could not be imported: {0}\n&quot;</span>.format(detail)) </div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;<span class="comment">#         try:</span></div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;<span class="comment">#            sklearn = __import__(&#39;sklearn&#39;, globals(), locals(), [], -1)</span></div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;<span class="comment">#            master.logger.log_info_p(&quot;- scikit learn {0}\n&quot;.format(sklearn.__version__))  </span></div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;<span class="comment">#         except:</span></div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;<span class="comment">#            pass</span></div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;         <span class="comment"># --- configuration</span></div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;         gfit_config_filename = master.config_filename</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;         gfit_config_dir = master.config_dir</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;         gfit_config_path = os.path.join(gfit_config_dir, gfit_config_filename)</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;         model_config_path = master.config.get_as_string(<span class="stringliteral">&quot;MODEL_CONFIG_PATH&quot;</span>, <span class="stringliteral">&quot;MULTIFIT&quot;</span>)</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;         method_config_path = master.config.get_as_string(<span class="stringliteral">&quot;METHOD_CONFIG_PATH&quot;</span>, <span class="stringliteral">&quot;MULTIFIT&quot;</span>)</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;         fitting_config_path = master.config.get_as_string(<span class="stringliteral">&quot;FITTING_CONFIG_PATH&quot;</span>, <span class="stringliteral">&quot;MULTIFIT&quot;</span>)</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;         master.logger.log_info_p(<span class="stringliteral">&quot;\nBase gfit configuration:&quot;</span>)</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;         master.logger.log_info_p(<span class="stringliteral">&quot;- Gfit main config : {0}&quot;</span>.format(gfit_config_path))</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;         master.logger.log_info_p(<span class="stringliteral">&quot;- Fitting methods  : {0}&quot;</span>.format(method_config_path))</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;         master.logger.log_info_p(<span class="stringliteral">&quot;- Galaxy models    : {0}&quot;</span>.format(model_config_path))</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;         master.logger.log_info_p(<span class="stringliteral">&quot;- Custom fitting   : {0}&quot;</span>.format(fitting_config_path))</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;         <span class="comment"># --- Multifit</span></div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;         mfit_model_module_path = master.config.get_as_string(<span class="stringliteral">&quot;MODEL_MODULE_PATH&quot;</span>, <span class="stringliteral">&quot;MULTIFIT&quot;</span>)   </div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;         mfit_method_module_path = master.config.get_as_string(<span class="stringliteral">&quot;METHOD_MODULE_PATH&quot;</span>, <span class="stringliteral">&quot;MULTIFIT&quot;</span>)   </div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;         master.logger.log_info_p(<span class="stringliteral">&quot;\nMultifit configuration directories:&quot;</span>)</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;         master.logger.log_info_p(<span class="stringliteral">&quot;- Models : {0}&quot;</span>.format(mfit_model_module_path))</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;         master.logger.log_info_p(<span class="stringliteral">&quot;- Methods: {0}\n&quot;</span>.format(mfit_method_module_path))</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;         <span class="comment"># --- Selected minimizer &amp; galaxy model</span></div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;         galaxy_model = master.config.get_as_string(<span class="stringliteral">&quot;GALAXY_MODEL_NAME&quot;</span>, <span class="stringliteral">&quot;GALAXY_FITTING&quot;</span>)</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;         fitting_method = master.config.get_as_string(<span class="stringliteral">&quot;GALAXY_FITTING_METHOD&quot;</span>, <span class="stringliteral">&quot;GALAXY_FITTING&quot;</span>)</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;         master.logger.log_info_p(<span class="stringliteral">&quot;Selected galaxy model : {0}&quot;</span>.format(galaxy_model))</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;         master.logger.log_info_p(<span class="stringliteral">&quot;Selected minimizer    : {0}&quot;</span>.format(fitting_method))</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;         <span class="comment"># --- Directories</span></div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;         <span class="comment"># master.logger.log_info_p(&quot;Base input directory   : {0}&quot;.format(master.base_input_dir))</span></div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;         master.logger.log_info_p(<span class="stringliteral">&quot;\nBase output directory: {0}&quot;</span>.format(master.base_output_dir))</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;         master.logger.log_info_p(<span class="stringliteral">&quot;- Run output directory   : {0}&quot;</span>.format(master.run_output_dir))</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;         master.logger.log_info_p(<span class="stringliteral">&quot;- log output directory   : {0}&quot;</span>.format(master.log_output_dir))</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;         master.logger.log_info_p(<span class="stringliteral">&quot;- plot output directory  : {0}&quot;</span>.format(master.plot_output_dir))</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;         master.logger.log_info_p(<span class="stringliteral">&quot;- stats output directory : {0}&quot;</span>.format(master.stat_output_dir))</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;         master.logger.log_info_p(<span class="stringliteral">&quot;- error output directory : {0}\n&quot;</span>.format(master.error_output_dir))</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;         <span class="comment"># --- Datasets   </span></div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;         <span class="keywordflow">try</span>:</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;            src_dataset_dir = master.config.get_as_string(<span class="stringliteral">&quot;BASE_DIR&quot;</span>, <span class="stringliteral">&quot;PRIMARY_DATASET&quot;</span>)</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;            gal_se_dataset_dir = master.config.get_as_string(<span class="stringliteral">&quot;BASE_DIR&quot;</span>,</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;                                                              <span class="stringliteral">&quot;SEXTRACTOR_DATASET_GALAXY&quot;</span>)</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;            star_se_dataset_dir = master.config.get_as_string(<span class="stringliteral">&quot;BASE_DIR&quot;</span>,</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;                                                              <span class="stringliteral">&quot;SEXTRACTOR_DATASET_PSF&quot;</span>)</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;            psf_dataset_dir = master.config.get_as_string(<span class="stringliteral">&quot;BASE_DIR&quot;</span>, <span class="stringliteral">&quot;PSF_DATASET&quot;</span>)</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;            master.logger.log_info_p(<span class="stringliteral">&quot;Primary dataset           : {0}&quot;</span>.format(src_dataset_dir))</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;            master.logger.log_info_p(<span class="stringliteral">&quot;PSF dataset               : {0}&quot;</span>.format(psf_dataset_dir))</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;            master.logger.log_info_p(<span class="stringliteral">&quot;SExtractor galaxy dataset : {0}&quot;</span>.format(gal_se_dataset_dir))</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;            master.logger.log_info_p(<span class="stringliteral">&quot;SExtractor psf dataset    : {0}\n&quot;</span>.format(star_se_dataset_dir))</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;         <span class="keywordflow">except</span> Exception <span class="keyword">as</span> detail:</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;            master.logger.log_error_p(<span class="stringliteral">&quot;Error while getting dataset information: {0}\n&quot;</span>.format(detail)) </div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;   </div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;   <span class="comment"># -----------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00155"></a><span class="lineno"><a class="line" href="classgfit_1_1gfit__helper_1_1GfitHelper.html#abd22ac745e2d3162493a5b232dcc3243">  155</a></span>&#160;   <span class="keyword">def </span><a class="code" href="classgfit_1_1gfit__helper_1_1GfitHelper.html#abd22ac745e2d3162493a5b232dcc3243">read_fits_image</a>(self, image_filepath, hdu=0, float_size=&quot;float32&quot;):</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;      <span class="comment"># --- Open catalog </span></div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;      <span class="keywordflow">if</span> <span class="keywordflow">not</span> os.path.exists(image_filepath):</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;         <span class="keywordflow">print</span> <span class="stringliteral">&#39;Error: catalog %s not found&#39;</span> % (catalog_filepath)</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;         <span class="keywordflow">return</span> <span class="keyword">False</span>, <span class="keywordtype">None</span>, <span class="keywordtype">None</span>, {}</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;      fits_image = pyfits.open(image_filepath, mode=<span class="stringliteral">&#39;readonly&#39;</span>, memmap=<span class="keyword">True</span>)</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;      image_data = fits_image[hdu].data.astype(float_size)</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;      image_header = fits_image[hdu].header</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;      fits_image.close()</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;      <span class="keywordflow">return</span> image_data, image_header</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;   <span class="comment"># -----------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00170"></a><span class="lineno"><a class="line" href="classgfit_1_1gfit__helper_1_1GfitHelper.html#aabc436d14be83f627e053c3d87d92542">  170</a></span>&#160;   <span class="keyword">def </span><a class="code" href="classgfit_1_1gfit__helper_1_1GfitHelper.html#aabc436d14be83f627e053c3d87d92542">get_stamp_center_as_int</a>(self, stamp_size):</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;      <span class="stringliteral">&quot;&quot;&quot; ! @return the postage stamp geometrical center pixel no, indexed from zero &quot;&quot;&quot;</span>      </div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;      </div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;      <span class="keywordflow">return</span> int((stamp_size - 1.0) / 2.0)</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;   <span class="comment"># -----------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00176"></a><span class="lineno"><a class="line" href="classgfit_1_1gfit__helper_1_1GfitHelper.html#a3393f5fa510a5b0bdbf342664ddb47fe">  176</a></span>&#160;   <span class="keyword">def </span><a class="code" href="classgfit_1_1gfit__helper_1_1GfitHelper.html#a3393f5fa510a5b0bdbf342664ddb47fe">cut_stamp_around_centroid</a>(self, stamp, stamp_size, (row, col)):</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;      <span class="stringliteral">&quot;&quot;&quot;!  Cut a postage stamp of a given size around a given centroid relative to the image &quot;&quot;&quot;</span></div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;      </div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;      half_stamp_size = stamp_size / 2.0</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;      <span class="keywordflow">if</span> stamp_size % 2 == 0:     </div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;         <span class="comment"># --- Even stamp size</span></div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;         <span class="comment"># print &quot;EVEN stamp size:&quot;, stamp_size, &quot;centroid:&quot;, (row, col), half_stamp_size, row-half_stamp_size</span></div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;         <span class="keywordflow">return</span> stamp[int(row - half_stamp_size):int(row + half_stamp_size),</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;                      int(col - half_stamp_size):int(col + half_stamp_size)]</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;      <span class="keywordflow">else</span>:</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;         <span class="comment"># --- Odd stamp size</span></div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;         <span class="comment"># print &quot;ODD stamp size:&quot;, stamp_size, &quot;centroid:&quot;, (row, col), half_stamp_size, row-half_stamp_size+0.5</span></div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;         <span class="keywordflow">return</span> stamp[int(row - half_stamp_size + 0.5):int(row + half_stamp_size + 0.5),</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;                      int(col - half_stamp_size + 0.5):int(col + half_stamp_size + 0.5)]</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;   <span class="comment"># -----------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00193"></a><span class="lineno"><a class="line" href="classgfit_1_1gfit__helper_1_1GfitHelper.html#a323fc7048c34475de8f5a3ab906fc032">  193</a></span>&#160;   <span class="keyword">def </span><a class="code" href="classgfit_1_1gfit__helper_1_1GfitHelper.html#a323fc7048c34475de8f5a3ab906fc032">empty_stamp</a>(self, stamp, border_size=1):</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;      <span class="stringliteral">&quot;&quot;&quot;! </span></div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;<span class="stringliteral">         Empty a square stamp, leaving only the border. The original stamp is untouched</span></div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;<span class="stringliteral">      &quot;&quot;&quot;</span></div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;      stamp = stamp.copy()</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;      stamp[border_size:stamp.shape[0] - border_size, border_size:stamp.shape[0] - border_size] = 0.0</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;      <span class="keywordflow">return</span> stamp</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;   <span class="comment"># -----------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00203"></a><span class="lineno"><a class="line" href="classgfit_1_1gfit__helper_1_1GfitHelper.html#afb420976dfaa9b597d7bbf6c9e5e1489">  203</a></span>&#160;   <span class="keyword">def </span><a class="code" href="classgfit_1_1gfit__helper_1_1GfitHelper.html#afb420976dfaa9b597d7bbf6c9e5e1489">get_stamp_border</a>(self, stamp, border_size=1):</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160; </div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;      <span class="stringliteral">&quot;&quot;&quot;!</span></div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;<span class="stringliteral">         get border from stamp</span></div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;<span class="stringliteral">      &quot;&quot;&quot;</span></div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;      <span class="keywordflow">return</span> stamp[border_size:stamp.shape[0] - border_size, border_size:stamp.shape[0] - border_size]   </div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;<span class="comment">#    # -----------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;<span class="comment">#    def get_stamp_border(self, stamp):</span></div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;<span class="comment"># </span></div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;<span class="comment">#       &quot;&quot;&quot;!</span></div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;<span class="comment">#          Extract border from stamp</span></div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;<span class="comment">#       &quot;&quot;&quot;</span></div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;<span class="comment"># </span></div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;<span class="comment">#       nn, mm = stamp.shape</span></div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;<span class="comment">#       a1 = stamp[0,:]</span></div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;<span class="comment">#       a2 = stamp[nn-1,:]</span></div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;<span class="comment">#       a3 = stamp[1:nn-1,0]</span></div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;<span class="comment">#       a4 = stamp[1:nn-1,mm-1]</span></div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;<span class="comment">#       border = numpy.concatenate((a1,a2))</span></div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;<span class="comment">#       border = numpy.concatenate((border,a3))</span></div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;<span class="comment">#       border = numpy.concatenate((border,a4))</span></div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;<span class="comment"># </span></div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;<span class="comment">#       return border</span></div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;<span class="comment">#   # -----------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;<span class="comment">#   def get_stamp_border(self, stamp, border_size=1):</span></div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;<span class="comment">#      &quot;&quot;&quot;!</span></div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;<span class="comment">#         Empy a square stamp, leaving only the border</span></div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;<span class="comment">#      &quot;&quot;&quot;</span></div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;<span class="comment">#      e_stamp = self.empty_stamp(stamp, border_size)</span></div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;<span class="comment">#      return numpy.extract(numpy.not_equal(e_stamp, 0.0), e_stamp)</span></div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;   <span class="comment"># -----------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00237"></a><span class="lineno"><a class="line" href="classgfit_1_1gfit__helper_1_1GfitHelper.html#ac041b2e67b137648fe5f62b8cff00b0a">  237</a></span>&#160;   <span class="keyword">def </span><a class="code" href="classgfit_1_1gfit__helper_1_1GfitHelper.html#ac041b2e67b137648fe5f62b8cff00b0a">compute_stamp_sigma_back_noise</a>(self, stamp):</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;      <span class="stringliteral">&quot;&quot;&quot;!</span></div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;<span class="stringliteral">         Get stamp background median noise evaluated from its border</span></div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;<span class="stringliteral">      &quot;&quot;&quot;</span></div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;      border = self.<a class="code" href="classgfit_1_1gfit__helper_1_1GfitHelper.html#afb420976dfaa9b597d7bbf6c9e5e1489">get_stamp_border</a>(stamp)</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;      <span class="keywordflow">return</span> math.sqrt(numpy.mean(border ** 2))</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;<span class="comment">#      return (numpy.sum((stamp_border - numpy.median(stamp_border.flat))**2) / len(stamp_border.flat))**0.5</span></div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;   <span class="comment"># -----------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00246"></a><span class="lineno"><a class="line" href="classgfit_1_1gfit__helper_1_1GfitHelper.html#a2936552b2f0fabf5564dffb9c7a69d13">  246</a></span>&#160;   <span class="keyword">def </span><a class="code" href="classgfit_1_1gfit__helper_1_1GfitHelper.html#a2936552b2f0fabf5564dffb9c7a69d13">compute_stamp_signal</a>(self, stamp):</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;      <span class="stringliteral">&quot;&quot;&quot;! Estimate the signal in a postage stamp image &quot;&quot;&quot;</span></div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;      <span class="keywordflow">return</span> numpy.sum(stamp ** 2) / numpy.sum(stamp)</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;   <span class="comment"># -----------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00251"></a><span class="lineno"><a class="line" href="classgfit_1_1gfit__helper_1_1GfitHelper.html#af9f1556dcd73b5b1f790e11a6b27964d">  251</a></span>&#160;   <span class="keyword">def </span><a class="code" href="classgfit_1_1gfit__helper_1_1GfitHelper.html#af9f1556dcd73b5b1f790e11a6b27964d">estimate_stamp_noise</a>(self, request, stamp, section_name, job, worker):</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;      <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;<span class="stringliteral">         ! Estimate the noise in a postage stamp image</span></div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;<span class="stringliteral">         @param request ShapeMeasurementRequest object</span></div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;<span class="stringliteral">         @param stamp object postage stamp (2D)</span></div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;<span class="stringliteral">         @param section_name either &#39;GALAXY_NOISE&#39; or &#39;PSF_NOISE&#39; (see configuration file)</span></div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;<span class="stringliteral">         @param job this job</span></div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;<span class="stringliteral">         @param worker worker process   </span></div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;<span class="stringliteral">      &quot;&quot;&quot;</span></div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;      noise_map_model_name = worker.config.get_as_string(<span class="stringliteral">&quot;NOISE_MODEL_NAME&quot;</span>, section_name)</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;      <span class="keywordflow">if</span> noise_map_model_name == <span class="stringliteral">&quot;CONST_SIGMA&quot;</span>:</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;         <span class="comment"># --- Fixed sigma value   </span></div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;         sigma_value = worker.config.get_as_float(<span class="stringliteral">&quot;SIGMA_VALUE&quot;</span>,</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;                                          <span class="stringliteral">&quot;{0}.{1}&quot;</span>.format(section_name, noise_map_model_name))</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;      <span class="keywordflow">elif</span> noise_map_model_name == <span class="stringliteral">&quot;MATCHED_FILTER&quot;</span>:  <span class="comment"># kept / G3 compatibility: does not work well</span></div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;         <span class="comment"># ------------------------------------------------------------</span></div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;         <span class="comment"># Sigma value calculated as follows (see GREAT08, GREAT3):</span></div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;         <span class="comment"># S = sum W(x,y) I(x,y) / sum W(x,y)</span></div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;         <span class="comment"># N^2 = Var(S) = sum W(x,y)^2 Var(I(x,y)) / (sum W(x,y))^2</span></div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;         <span class="comment"># sigma = N = Sqrt(Var(S)) </span></div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;         <span class="comment"># ------------------------------------------------------------</span></div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;         sigma_value = scipy.std(stamp) * math.sqrt(numpy.sum(stamp ** 2)) / numpy.sum(stamp)         </div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;      </div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;      <span class="keywordflow">else</span>:   </div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;         <span class="comment"># --- By default, noise estimated as the median value of the postage stamp border   </span></div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;         border_size = worker.config.get_as_int(<span class="stringliteral">&quot;BORDER_SIZE&quot;</span>,</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;                                          <span class="stringliteral">&quot;{0}.{1}&quot;</span>.format(section_name, noise_map_model_name)) </div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;         border = numpy.ravel(stamp[border_size:stamp.shape[0] - border_size, \</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;                                    border_size:stamp.shape[0] - border_size])</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;         sigma_value = math.sqrt(numpy.median(border ** 2))          </div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;      <span class="comment"># TODO: possibly add more sophisticated noise estimation models here...    </span></div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;      </div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;      <span class="keywordflow">return</span> sigma_value</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;         </div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;<span class="comment">#    # -----------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;<span class="comment">#    def compute_stamp_noise(self, stamp):</span></div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;<span class="comment">#       &quot;&quot;&quot;! Estimate the noise in a postage stamp image &quot;&quot;&quot;</span></div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;<span class="comment">#       # ------------------------------------------------------------</span></div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;<span class="comment">#       # Sigma value calculated as follows (see GREAT08, GREAT3):</span></div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;<span class="comment">#       # S = sum W(x,y) I(x,y) / sum W(x,y)</span></div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;<span class="comment">#       # N^2 = Var(S) = sum W(x,y)^2 Var(I(x,y)) / (sum W(x,y))^2</span></div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;<span class="comment">#       # sigma = N = Sqrt(Vat(S)) </span></div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;<span class="comment">#       # ------------------------------------------------------------</span></div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;<span class="comment">#       return scipy.std(stamp) * math.sqrt(numpy.sum(stamp**2)) / numpy.sum(stamp)</span></div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;   <span class="comment"># -----------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00301"></a><span class="lineno"><a class="line" href="classgfit_1_1gfit__helper_1_1GfitHelper.html#a63a8b369f66b6719fc79b55d2d8561ab">  301</a></span>&#160;   <span class="keyword">def </span><a class="code" href="classgfit_1_1gfit__helper_1_1GfitHelper.html#a63a8b369f66b6719fc79b55d2d8561ab">compute_stamp_SNR</a>(self, stamp):</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;      <span class="stringliteral">&quot;&quot;&quot;! Compute the SNR of a postage stamp image &quot;&quot;&quot;</span></div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;      <span class="keywordflow">return</span> math.sqrt(numpy.sum(stamp ** 2)) / scipy.std(stamp)</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;   <span class="comment"># -----------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00306"></a><span class="lineno"><a class="line" href="classgfit_1_1gfit__helper_1_1GfitHelper.html#abbade51cb5e31e38165f503a60c37e9d">  306</a></span>&#160;   <span class="keyword">def </span><a class="code" href="classgfit_1_1gfit__helper_1_1GfitHelper.html#abbade51cb5e31e38165f503a60c37e9d">compute_stamp_sky_background</a>(self, stamp):</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;      <span class="stringliteral">&quot;&quot;&quot;!</span></div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;<span class="stringliteral">         Get stamp median sky background evaluated from the stamp border</span></div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;<span class="stringliteral">      &quot;&quot;&quot;</span>   </div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;      <span class="comment"># return numpy.median(get_stamp_border(stamp).flat)</span></div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;      <span class="keywordflow">return</span> numpy.mean(numpy.ravel(self.<a class="code" href="classgfit_1_1gfit__helper_1_1GfitHelper.html#afb420976dfaa9b597d7bbf6c9e5e1489">get_stamp_border</a>(stamp)))</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;<span class="comment">#    # -----------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;<span class="comment">#    def estimate_sigma_noise(self, image):</span></div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;<span class="comment">#       &quot;&quot;&quot;</span></div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;<span class="comment">#       Estimate noise sigma from image border </span></div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;<span class="comment">#       &quot;&quot;&quot;</span></div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;<span class="comment">#       nn, mm = image.shape</span></div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;<span class="comment">#       a1 = image[0,:]</span></div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;<span class="comment">#       a2 = image[nn-1,:]</span></div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;<span class="comment">#       a3 = image[1:nn-1,0]</span></div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;<span class="comment">#       a4 = image[1:nn-1,mm-1]</span></div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;<span class="comment">#       a1 = np.concatenate((a1,a2))</span></div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;<span class="comment">#       a1 = np.concatenate((a1,a3))</span></div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;<span class="comment">#       a1 = np.concatenate((a1,a4))</span></div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;<span class="comment">#       a4 = (a1**2).mean()</span></div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;<span class="comment">#       return math.sqrt(a4)</span></div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;   <span class="comment"># -----------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00330"></a><span class="lineno"><a class="line" href="classgfit_1_1gfit__helper_1_1GfitHelper.html#ae3300ee18f1d1b884c3947a52ad1af20">  330</a></span>&#160;   <span class="keyword">def </span><a class="code" href="classgfit_1_1gfit__helper_1_1GfitHelper.html#ae3300ee18f1d1b884c3947a52ad1af20">make_galaxy_sky_image</a>(self, request, image, job, worker):</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;      sky_image = numpy.zeros(image.shape)</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;      sky_model_name = worker.config.get_as_string(<span class="stringliteral">&quot;SKY_MODEL_NAME&quot;</span>, <span class="stringliteral">&quot;SKY_MODEL_GALAXY&quot;</span>)</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;      section_name = <span class="stringliteral">&quot;SKY_MODEL_GALAXY.{0}&quot;</span>.format(sky_model_name)</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;      </div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;      <span class="keywordflow">if</span> sky_model_name == <span class="stringliteral">&quot;CONST_SKY&quot;</span>:</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;         <span class="comment"># --- Sky has the same value everywhere</span></div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;         sky_value = worker.config.get_as_float(<span class="stringliteral">&quot;SKY_VALUE&quot;</span>, section_name)</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;         sky_image = sky_value * numpy.ones(image.shape)</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;           </div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;      <span class="keywordflow">elif</span> sky_model_name == <span class="stringliteral">&quot;GAUSSIAN_NOISE&quot;</span>:     </div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;         <span class="comment"># --- Sky normal distribution with given mean and variance</span></div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;         sky_mean = worker.config.get_as_float(<span class="stringliteral">&quot;SKY_MEAN&quot;</span>, section_name) </div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;         sky_sigma = worker.config.get_as_float(<span class="stringliteral">&quot;SKY_SIGMA&quot;</span>, section_name) </div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;         sky_image = numpy.random.randn(image.shape[0], image.shape[1]) * sky_sigma + sky_mean  </div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;         </div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;<span class="comment">#       elif sky_model_name == &quot;BORDER_MEDIAN&quot;:      </span></div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;<span class="comment">#          # --- Sky estimated as the median value of the image border   </span></div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;<span class="comment">#          border_size = worker.config.get_as_int(&quot;BORDER_SIZE&quot;, section_name)   </span></div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;<span class="comment">#          border = numpy.ravel(image[border_size:image.shape[0]-border_size,\</span></div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;<span class="comment">#                                     border_size:image.shape[0]-border_size])</span></div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;<span class="comment">#          sky_image = math.sqrt(numpy.median(border**2)) * numpy.ones(image.shape) </span></div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;            </div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;      <span class="keywordflow">elif</span> sky_model_name == <span class="stringliteral">&quot;EXT_IMAGE&quot;</span>:      </div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;         <span class="comment"># --- External image used as sky background</span></div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;         sky_image, _ = self.<a class="code" href="classgfit_1_1gfit__helper_1_1GfitHelper.html#abd22ac745e2d3162493a5b232dcc3243">read_fits_image</a>(</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;                           request.galaxy_sky_image_filepath,</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;                           hdu=request.galaxy_sky_image_property_dico[<span class="stringliteral">&quot;HDU_NO&quot;</span>],</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;                           float_size=request.galaxy_sky_image_property_dico[<span class="stringliteral">&quot;PIXEL_FLOAT_SIZE&quot;</span>])</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;      <span class="keywordflow">else</span>:                 </div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;         <span class="keywordflow">if</span> worker.logging_enabled():</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;            worker.logger.log_warning_p(</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;               <span class="stringliteral">&quot;{0} - {1}/image-{2:03d}-{3:1d} - &quot;</span>\</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;               <span class="stringliteral">&quot;unknown galaxy Sky model {4}, ignoring...&quot;</span>.format(</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;                   worker.name, job.get_branch_tree(), job.img_no, job.epoch,</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;                   sky_model_name))</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;      <span class="keywordflow">return</span> sky_image           </div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;   <span class="comment"># -----------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00371"></a><span class="lineno"><a class="line" href="classgfit_1_1gfit__helper_1_1GfitHelper.html#a8fa3e178c445baa19c74a6795a1fa833">  371</a></span>&#160;   <span class="keyword">def </span><a class="code" href="classgfit_1_1gfit__helper_1_1GfitHelper.html#a8fa3e178c445baa19c74a6795a1fa833">make_psf_sky_image</a>(self, request, image, job, worker):</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;      sky_image = numpy.zeros(image.shape)</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;      sky_model_name = worker.config.get_as_string(<span class="stringliteral">&quot;SKY_MODEL_NAME&quot;</span>, <span class="stringliteral">&quot;SKY_MODEL_PSF&quot;</span>)</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;      section_name = <span class="stringliteral">&quot;SKY_MODEL_PSF.{0}&quot;</span>.format(sky_model_name)</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;      </div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;      <span class="keywordflow">if</span> sky_model_name == <span class="stringliteral">&quot;CONST_SKY&quot;</span>:</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;         <span class="comment"># --- Sky has the same value everywhere</span></div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;         sky_value = worker.config.get_as_float(<span class="stringliteral">&quot;SKY_VALUE&quot;</span>, section_name)</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;         sky_image = sky_value * numpy.ones(image.shape)</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;           </div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;      <span class="keywordflow">elif</span> sky_model_name == <span class="stringliteral">&quot;GAUSSIAN_NOISE&quot;</span>:     </div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;         <span class="comment"># --- Sky normal distribution with given mean and variance</span></div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;         sky_mean = worker.config.get_as_float(<span class="stringliteral">&quot;SKY_MEAN&quot;</span>, section_name) </div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;         sky_sigma = worker.config.get_as_float(<span class="stringliteral">&quot;SKY_SIGMA&quot;</span>, section_name) </div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;         sky_image = numpy.random.randn(image_shape[0], image_shape[1]) * sky_sigma + sky_mean  </div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;         </div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;      <span class="keywordflow">elif</span> sky_model_name == <span class="stringliteral">&quot;EXT_IMAGE&quot;</span>:      </div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;         <span class="comment"># --- External image used as sky background     </span></div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;         sky_image, _ = self.<a class="code" href="classgfit_1_1gfit__helper_1_1GfitHelper.html#abd22ac745e2d3162493a5b232dcc3243">read_fits_image</a>(</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;                           request.psf_sky_image_filepath,</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;                           hdu=request.psf_sky_image_property_dico[<span class="stringliteral">&quot;HDU_NO&quot;</span>],</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;                           float_size=request.psf_sky_image_property_dico[<span class="stringliteral">&quot;PIXEL_FLOAT_SIZE&quot;</span>])</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;                       </div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;      <span class="keywordflow">else</span>:</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;         <span class="keywordflow">if</span> worker.logging_enabled():</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;            worker.logger.log_warning_p(</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;               <span class="stringliteral">&quot;{0} - {1}/image-{2:03d}-{3:1d} - &quot;</span>\</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;               <span class="stringliteral">&quot;unknown PSF Sky model {4}, ignoring...&quot;</span>.format(</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;                   worker.name, job.get_branch_tree(), job.img_no, job.epoch,</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;                   sky_model_name))</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;                        </div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;      <span class="keywordflow">return</span> sky_image      </div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;   <span class="comment"># -----------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00406"></a><span class="lineno"><a class="line" href="classgfit_1_1gfit__helper_1_1GfitHelper.html#a71a61f432b143dd8599a5c74c04b34e9">  406</a></span>&#160;   <span class="keyword">def </span><a class="code" href="classgfit_1_1gfit__helper_1_1GfitHelper.html#a71a61f432b143dd8599a5c74c04b34e9">get_galaxy_noise_map</a>(self, request, image, job, worker):</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;      <span class="stringliteral">&quot;&quot;&quot;! Create or Read a RMS noise map, whose values are the estimated standard deviation </span></div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;<span class="stringliteral">           (pixels represent sigma values) of the galaxy noise</span></div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;<span class="stringliteral">      &quot;&quot;&quot;</span>     </div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;      noise_map_image = <span class="keywordtype">None</span> </div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;      </div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;      noise_map_model_name = worker.config.get_as_string(<span class="stringliteral">&quot;NOISE_MODEL_NAME&quot;</span>, <span class="stringliteral">&quot;GALAXY_NOISE&quot;</span>)</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;      <span class="keywordflow">if</span> noise_map_model_name == <span class="stringliteral">&quot;EXT_NOISE_MAP&quot;</span>:</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;         <span class="comment"># --- External image used as rms noise map</span></div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;         noise_map_image, _ = self.<a class="code" href="classgfit_1_1gfit__helper_1_1GfitHelper.html#abd22ac745e2d3162493a5b232dcc3243">read_fits_image</a>(</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;                     request.galaxy_noise_map_filepath,</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;                     hdu=request.galaxy_noise_map_property_dico[<span class="stringliteral">&quot;HDU_NO&quot;</span>],</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;                     float_size=request.galaxy_noise_map_property_dico[<span class="stringliteral">&quot;PIXEL_FLOAT_SIZE&quot;</span>])</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;      </div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;      <span class="keywordflow">return</span> noise_map_image           </div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;   <span class="comment"># -----------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00424"></a><span class="lineno"><a class="line" href="classgfit_1_1gfit__helper_1_1GfitHelper.html#a62708ccc9e00f1d5abd2314b27a1241e">  424</a></span>&#160;   <span class="keyword">def </span><a class="code" href="classgfit_1_1gfit__helper_1_1GfitHelper.html#a62708ccc9e00f1d5abd2314b27a1241e">get_psf_noise_map</a>(self, request, image, job, worker):</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;      <span class="stringliteral">&quot;&quot;&quot;! Create or Read a RMS noise map, whose values are the estimated standard deviation </span></div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;<span class="stringliteral">           (pixels represent sigma values) of the PSF noise</span></div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;<span class="stringliteral">      &quot;&quot;&quot;</span>     </div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;      noise_map_image = <span class="keywordtype">None</span> </div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;      </div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;      noise_map_model_name = worker.config.get_as_string(<span class="stringliteral">&quot;NOISE_MODEL_NAME&quot;</span>, <span class="stringliteral">&quot;PSF_NOISE&quot;</span>)</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;      <span class="keywordflow">if</span> noise_map_model_name == <span class="stringliteral">&quot;EXT_NOISE_MAP&quot;</span>:</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;         <span class="comment"># --- External image used as rms noise map</span></div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;         noise_map_image, _ = self.<a class="code" href="classgfit_1_1gfit__helper_1_1GfitHelper.html#abd22ac745e2d3162493a5b232dcc3243">read_fits_image</a>(</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;                     request.psf_noise_map_filepath,</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;                     hdu=request.psf_noise_map_property_dico[<span class="stringliteral">&quot;HDU_NO&quot;</span>],</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;                     float_size=request.psf_noise_map_property_dico[<span class="stringliteral">&quot;PIXEL_FLOAT_SIZE&quot;</span>])</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;      </div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;      <span class="keywordflow">return</span> noise_map_image           </div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;   <span class="comment"># -----------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00442"></a><span class="lineno"><a class="line" href="classgfit_1_1gfit__helper_1_1GfitHelper.html#ac84dc2615b0336a7b645532aa9474955">  442</a></span>&#160;   <span class="keyword">def </span><a class="code" href="classgfit_1_1gfit__helper_1_1GfitHelper.html#ac84dc2615b0336a7b645532aa9474955">get_image_property_dico</a>(self, section_name, job, worker):   </div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;      <span class="stringliteral">&quot;&quot;&quot;! Create or Read a RMS noise map, whose values are the estimated standard deviation </span></div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;<span class="stringliteral">           (pixels represent sigma values) of the PSF noise</span></div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;<span class="stringliteral">      &quot;&quot;&quot;</span>     </div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;      section_dico = {<span class="stringliteral">&quot;DIR_INPUT_LIST&quot;</span>:[], <span class="stringliteral">&quot;DIR_RECURSE&quot;</span>:<span class="keyword">True</span>, \</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;                      <span class="stringliteral">&quot;BASE_DIR&quot;</span>:<span class="stringliteral">&quot;.&quot;</span>, <span class="stringliteral">&quot;FILE_PATTERNS&quot;</span>:[], \</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;                      <span class="stringliteral">&quot;HDU_NO&quot;</span>:0, <span class="stringliteral">&quot;PIXEL_FLOAT_SIZE&quot;</span>:<span class="stringliteral">&quot;float32&quot;</span>\</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;                     }</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;      <span class="keywordflow">if</span> worker.config.has_section(section_name):</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;         <span class="keywordflow">if</span> worker.config.has_key(<span class="stringliteral">&quot;FILE_PATTERNS&quot;</span>, section_name):</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;            section_dico[<span class="stringliteral">&quot;FILE_PATTERNS&quot;</span>] = worker.config.get_as_list(<span class="stringliteral">&quot;FILE_PATTERNS&quot;</span>,</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;                                                                      section_name)         </div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;         <span class="keywordflow">if</span> worker.config.has_key(<span class="stringliteral">&quot;DIR_INPUT_LIST&quot;</span>, section_name):</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;            section_dico[<span class="stringliteral">&quot;DIR_INPUT_LIST&quot;</span>] = worker.config.get_as_list(<span class="stringliteral">&quot;DIR_INPUT_LIST&quot;</span>,</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;                                                                       section_name)         </div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;         <span class="keywordflow">if</span> worker.config.has_key(<span class="stringliteral">&quot;BASE_DIR&quot;</span>, section_name):</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;            section_dico[<span class="stringliteral">&quot;BASE_DIR&quot;</span>] = worker.config.get_as_string(<span class="stringliteral">&quot;BASE_DIR&quot;</span>, section_name)</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;         <span class="keywordflow">if</span> worker.config.has_key(<span class="stringliteral">&quot;FLOAT_SIZE&quot;</span>, section_name):</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;            section_dico[<span class="stringliteral">&quot;FLOAT_SIZE&quot;</span>] = worker.config.get_as_string(<span class="stringliteral">&quot;FLOAT_SIZE&quot;</span>, section_name)         </div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;         <span class="keywordflow">if</span> worker.config.has_key(<span class="stringliteral">&quot;DIR_RECURSE&quot;</span>, section_name):</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;            section_dico[<span class="stringliteral">&quot;DIR_RECURSE&quot;</span>] = worker.config.get_as_boolean(<span class="stringliteral">&quot;DIR_RECURSE&quot;</span>, section_name)</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;         <span class="keywordflow">if</span> worker.config.has_key(<span class="stringliteral">&quot;HDU_NO&quot;</span>, section_name):</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;            section_dico[<span class="stringliteral">&quot;HDU_NO&quot;</span>] = worker.config.get_as_int(<span class="stringliteral">&quot;HDU_NO&quot;</span>, section_name)</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;         </div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;      <span class="keywordflow">return</span> section_dico   </div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;   <span class="comment"># -----------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00470"></a><span class="lineno"><a class="line" href="classgfit_1_1gfit__helper_1_1GfitHelper.html#a11729744dce2297c24cbd918d96e9264">  470</a></span>&#160;   <span class="keyword">def </span><a class="code" href="classgfit_1_1gfit__helper_1_1GfitHelper.html#a11729744dce2297c24cbd918d96e9264">get_catalog_property_dico</a>(self, section_name, job, worker):   </div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;      section_dico = {<span class="stringliteral">&quot;DIR_INPUT_LIST&quot;</span>:[], <span class="stringliteral">&quot;DIR_RECURSE&quot;</span>:<span class="keyword">True</span>, \</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;                      <span class="stringliteral">&quot;BASE_DIR&quot;</span>:<span class="stringliteral">&quot;.&quot;</span>, <span class="stringliteral">&quot;FILE_PATTERNS&quot;</span>:[], \</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;                      <span class="stringliteral">&quot;HDU_NO&quot;</span>:1, <span class="stringliteral">&quot;IS_SEXTRACTOR_FORMAT&quot;</span>:<span class="keyword">False</span>\</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;                     }</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;      <span class="keywordflow">if</span> worker.config.has_section(section_name):</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;         <span class="keywordflow">if</span> worker.config.has_key(<span class="stringliteral">&quot;FILE_PATTERNS&quot;</span>, section_name):</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;            section_dico[<span class="stringliteral">&quot;FILE_PATTERNS&quot;</span>] = worker.config.get_as_list(<span class="stringliteral">&quot;FILE_PATTERNS&quot;</span>,</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;                                                                      section_name)         </div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;         <span class="keywordflow">if</span> worker.config.has_key(<span class="stringliteral">&quot;DIR_INPUT_LIST&quot;</span>, section_name):</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;            section_dico[<span class="stringliteral">&quot;DIR_INPUT_LIST&quot;</span>] = worker.config.get_as_list(<span class="stringliteral">&quot;DIR_INPUT_LIST&quot;</span>,</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;                                                                       section_name)         </div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;         <span class="keywordflow">if</span> worker.config.has_key(<span class="stringliteral">&quot;BASE_DIR&quot;</span>, section_name):</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;            section_dico[<span class="stringliteral">&quot;BASE_DIR&quot;</span>] = worker.config.get_as_string(<span class="stringliteral">&quot;BASE_DIR&quot;</span>, section_name)</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;         <span class="keywordflow">if</span> worker.config.has_key(<span class="stringliteral">&quot;IS_SEXTRACTOR_FORMAT&quot;</span>, section_name):</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;            section_dico[<span class="stringliteral">&quot;IS_SEXTRACTOR_FORMAT&quot;</span>] = worker.config.get_as_boolean(</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;                                                            <span class="stringliteral">&quot;IS_SEXTRACTOR_FORMAT&quot;</span>, section_name)         </div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;         <span class="keywordflow">if</span> worker.config.has_key(<span class="stringliteral">&quot;DIR_RECURSE&quot;</span>, section_name):</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;            section_dico[<span class="stringliteral">&quot;DIR_RECURSE&quot;</span>] = worker.config.get_as_boolean(<span class="stringliteral">&quot;DIR_RECURSE&quot;</span>, section_name)</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;         <span class="keywordflow">if</span> worker.config.has_key(<span class="stringliteral">&quot;HDU_NO&quot;</span>, section_name):</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;            section_dico[<span class="stringliteral">&quot;HDU_NO&quot;</span>] = worker.config.get_as_int(<span class="stringliteral">&quot;HDU_NO&quot;</span>, section_name)</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;      <span class="keywordflow">return</span> section_dico   </div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;<span class="comment">#   # -----------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;<span class="comment">#   def extract_stamp_around_centroid_even(self, xc, yc, half, image):</span></div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;<span class="comment">#      &quot;&quot;&quot;! </span></div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;<span class="comment">#         Cut out a square stamp around the specified centroid (@c xc, @c yc).</span></div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;<span class="comment">#         @param xc x coordinate of object centroid in postage stamp </span></div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;<span class="comment">#         @param yc y coordinate of object centroid in postage stamp</span></div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;<span class="comment">#         @param half half of the postage stamp size (of a side)</span></div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;<span class="comment">#         @param image the field image from where the postage stamp has to be cut out</span></div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;<span class="comment">#         @note stamp size is supposed to be a even number of pixels.</span></div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;<span class="comment">#      &quot;&quot;&quot;</span></div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;<span class="comment">#      return image[xc-half+1:xc+half+1, yc-half+1:yc+half+1]</span></div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;<span class="comment">#   # -----------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;<span class="comment">#   def extract_stamp_around_centroid_odd(self, xc, yc, half, image):</span></div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;<span class="comment">#      &quot;&quot;&quot;! </span></div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;<span class="comment">#         Cut out a square stamp around the specified centroid (@c xc, @c yc).</span></div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;<span class="comment">#         @param xc x coordinate of object centroid in postage stamp </span></div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;<span class="comment">#         @param yc y coordinate of object centroid in postage stamp</span></div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;<span class="comment">#         @param half half of the postage stamp size (of a side)</span></div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;<span class="comment">#         @param image the field image from where the postage stamp has to be cut out</span></div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;<span class="comment">#         @note stamp size is supposed to be a even number of pixels.</span></div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;<span class="comment">#      &quot;&quot;&quot;</span></div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;<span class="comment">#      return image[xc-half+1:xc+half+1, yc-half+1:yc+half+1]</span></div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;<span class="comment">#    # -----------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;<span class="comment">#    def extract_stamps(self, image_data, nb_stamps, stamp_size, worker.result_output_dir, subdir):  </span></div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;<span class="comment">#   def _extract_stamps(self, image_filepath, img_no, epoch, image_file_type, </span></div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;<span class="comment">#                             stamp_size, output_dir, float_type=32, center_star=False):</span></div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;<span class="comment">#      </span></div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;<span class="comment">#      image_data = pyfits.getdata(image_filepath).astype(float_type)</span></div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;<span class="comment">#      (image_width, image_height) = image_data.shape</span></div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;<span class="comment">#      file_main, file_ext = os.path.splitext(image_file_type) </span></div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;<span class="comment">#      stamp_filename_pattern = &quot;{0}_stamp_{1:03d}-{2:1d}_{3}_{4}.fits&quot;</span></div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;<span class="comment">#      ref_x_pixel = ref_y_pixel = (stamp_size-1)/2.0</span></div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;<span class="comment"># </span></div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;<span class="comment">#      for x in xrange(0, image_width, stamp_size):</span></div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;<span class="comment">#         for y in xrange(0, image_height, stamp_size):</span></div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;<span class="comment">#            stamp = image_data[y:y+stamp_size, x:x+stamp_size].astype(float_type) # (row, col) np.</span></div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;<span class="comment">#            if center_star:</span></div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;<span class="comment">#               (yc, xc) = scipy.ndimage.center_of_mass(stamp)</span></div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;<span class="comment">#               corr = (ref_y_pixel - yc, ref_x_pixel - xc)</span></div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;<span class="comment">#               # TEMP </span></div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;<span class="comment">#               corr = (ref_y_pixel - yc, ref_x_pixel - xc)</span></div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;<span class="comment">#               stamp = scipy.ndimage.interpolation.shift(stamp, corr)</span></div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;<span class="comment">#               (nyc, nxc) = scipy.ndimage.center_of_mass(stamp)</span></div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;<span class="comment">#               #print (x,y), (ref_x_pixel, ref_y_pixel), (xc, yc), &quot;=&gt;&quot;, (nxc, nyc), &quot;corr:&quot;, corr</span></div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;<span class="comment">#            stamp_filename = stamp_filename_pattern.format(file_main, img_no, epoch, x, y)</span></div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;<span class="comment">#            self.write_as_fits(stamp, os.path.join(output_dir, stamp_filename))</span></div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;   <span class="comment"># -----------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00553"></a><span class="lineno"><a class="line" href="classgfit_1_1gfit__helper_1_1GfitHelper.html#ad94ca953dd859288a6cb29642825e100">  553</a></span>&#160;   <span class="keyword">def </span><a class="code" href="classgfit_1_1gfit__helper_1_1GfitHelper.html#ad94ca953dd859288a6cb29642825e100">write_as_fits</a>(self, data, output_filepath, header=None):</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;      <span class="stringliteral">&quot;&quot;&quot;! </span></div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;<span class="stringliteral">         Write a two-dimensional data numpy array as a .fits file to some given path</span></div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;<span class="stringliteral">         @param data data to write</span></div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;<span class="stringliteral">         @param output_filepath full path of the -FITS file</span></div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;<span class="stringliteral">         @param header optional FITS header data </span></div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;<span class="stringliteral">      &quot;&quot;&quot;</span></div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;      <span class="keywordflow">if</span> os.path.exists(output_filepath):</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;         os.remove(output_filepath)</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;      <span class="keywordflow">if</span> data <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span> <span class="keywordflow">and</span> type(data) == numpy.ndarray:</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;         pyfits.writeto(output_filepath, data, header=header) </div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;   <span class="comment"># -----------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;   <span class="keyword">def </span>_plot_stamps(self, plotter, image_filepath, img_no, epoch,</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;                                   image_file_type, stamp_size, output_dir):</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;      </div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;      image_data = pyfits.getdata(image_filepath).astype(<span class="stringliteral">&quot;float32&quot;</span>)</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;      (image_width, image_height) = image_data.shape</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;      file_main, file_ext = os.path.splitext(image_file_type) </div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;      stamp_filename_pattern = <span class="stringliteral">&quot;{0}_stamp_{1:03d}-{2:1d}_{3}_{4}.png&quot;</span></div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;      stamp_filename_pattern_3D = <span class="stringliteral">&quot;{0}_stamp_3D_{1:03d}-{2:1d}_{3}_{4}.png&quot;</span></div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;      plot_filename_pattern = <span class="stringliteral">&quot;{0} PSF {1:03d}-{2:1d} at {3}_{4} (log scale)&quot;</span></div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;      plot_filename_pattern_3D = <span class="stringliteral">&quot;{0} PSF 3D {1:03d}-{2:1d} at {3}_{4} (log scale)&quot;</span></div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;      <span class="keywordflow">for</span> x <span class="keywordflow">in</span> xrange(0, image_width, stamp_size):</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;         <span class="keywordflow">for</span> y <span class="keywordflow">in</span> xrange(0, image_height, stamp_size):</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;            stamp = image_data[y:y + stamp_size, x:x + stamp_size]  <span class="comment"># (row, col) numpy format</span></div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;            min_pix_value = numpy.min(stamp)</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;            stamp += 2 * math.fabs(min_pix_value)  <span class="comment"># stamp values are slghtly inexact</span></div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;            stamp_filename = stamp_filename_pattern.format(file_main, img_no, epoch, x, y)</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;            plot_title = plot_filename_pattern.format(file_main, img_no, epoch, x, y)</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;            </div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;            plotter.plot_stamp(numpy.log10(stamp), plot_title=plot_title,</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;                                      cmap=<span class="stringliteral">&quot;jet&quot;</span>, color_bar=<span class="keyword">True</span>,</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;                                      output_dir=output_dir, output_file=stamp_filename,</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;                                      show=<span class="keyword">False</span>, logger=<span class="keywordtype">None</span>)</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;            stamp_filename = stamp_filename_pattern_3D.format(file_main, img_no, epoch, x, y)</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;            plot_title = plot_filename_pattern_3D.format(file_main, img_no, epoch, x, y)</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;            plotter.plot_stamp_3D(numpy.log10(stamp), plot_title=plot_title,</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;                                      cmap=<span class="stringliteral">&quot;jet&quot;</span>, rstride=2, cstride=2,</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;                                      output_dir=output_dir, output_file=stamp_filename,</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;                                      show=<span class="keyword">False</span>, logger=<span class="keywordtype">None</span>)</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;<span class="comment">#   # -----------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;<span class="comment">#   def get_nb_objects(self, image_filepath, stamp_size):</span></div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;<span class="comment">#      &quot;&quot;&quot;! Find the actual number of objects (i.e. postage stamps) in the image &quot;&quot;&quot;</span></div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;<span class="comment">#      return int(len(pyfits.getdata(image_filepath)) / stamp_size)**2</span></div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;   </div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;   <span class="comment"># -----------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00605"></a><span class="lineno"><a class="line" href="classgfit_1_1gfit__helper_1_1GfitHelper.html#a0bf08e2c5be940ca59f8185eb730f498">  605</a></span>&#160;   <span class="keyword">def </span><a class="code" href="classgfit_1_1gfit__helper_1_1GfitHelper.html#a0bf08e2c5be940ca59f8185eb730f498">get_nb_objects</a>(self, image_filepath, stamp_size):</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;      <span class="stringliteral">&quot;&quot;&quot;! Find the actual number of objects (i.e. postage stamps) in the image &quot;&quot;&quot;</span></div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;      header = pyfits.getheader(image_filepath)</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;      nb_pixels = header.get(<span class="stringliteral">&quot;NAXIS1&quot;</span>, 0) * header.get(<span class="stringliteral">&quot;NAXIS2&quot;</span>, 0)</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;      <span class="keywordflow">return</span> int(nb_pixels / stamp_size ** 2)   </div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;   <span class="comment"># -----------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00613"></a><span class="lineno"><a class="line" href="classgfit_1_1gfit__helper_1_1GfitHelper.html#affdd43c7c39399a99466e7ffa5a185b8">  613</a></span>&#160;   <span class="keyword">def </span><a class="code" href="classgfit_1_1gfit__helper_1_1GfitHelper.html#affdd43c7c39399a99466e7ffa5a185b8">remove_failed_fits_from_result_dico</a>(self, result_dico, master):</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;      failed_marking_value = master.config.get_as_float(<span class="stringliteral">&quot;FAILED_ELLIPTICITY_VALUE&quot;</span>,</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;                                                        <span class="stringliteral">&quot;SHAPE_MEASUREMENT&quot;</span>)</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;      <span class="keywordflow">if</span> failed_marking_value <span class="keywordflow">in</span> result_dico[<span class="stringliteral">&quot;e1&quot;</span>] <span class="keywordflow">or</span> failed_marking_value <span class="keywordflow">in</span> result_dico[<span class="stringliteral">&quot;e2&quot;</span>]:</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;         good_indice = numpy.logical_and(numpy.asarray(result_dico[<span class="stringliteral">&quot;e1&quot;</span>]) != failed_marking_value,</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;                                         numpy.asarray(result_dico[<span class="stringliteral">&quot;e2&quot;</span>]) != failed_marking_value)  </div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;         <span class="keywordflow">for</span> var <span class="keywordflow">in</span> result_dico.keys():</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;            var_array = numpy.asarray(result_dico[var])   </div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;            result_dico[var] = list(var_array[good_indice])</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;      <span class="keywordflow">return</span> result_dico   </div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;               </div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;   <span class="comment"># -----------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00630"></a><span class="lineno"><a class="line" href="classgfit_1_1gfit__helper_1_1GfitHelper.html#abc4cd52c49bd62f58046f00d433859d8">  630</a></span>&#160;   <span class="keyword">def </span><a class="code" href="classgfit_1_1gfit__helper_1_1GfitHelper.html#abc4cd52c49bd62f58046f00d433859d8">remove_nans_from_result_dico</a>(self, result_dico, master):</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;      <span class="keywordflow">if</span> <span class="stringliteral">&quot;sum_norm_residuals&quot;</span> <span class="keywordflow">in</span> result_dico:</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;         good_indice = numpy.logical_not(numpy.isnan(result_dico[<span class="stringliteral">&quot;sum_norm_residuals&quot;</span>]))</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;         <span class="keywordflow">for</span> var <span class="keywordflow">in</span> result_dico.keys():</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;            var_array = numpy.asarray(result_dico[var])   </div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;            result_dico[var] = list(var_array[good_indice])</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;      <span class="keywordflow">return</span> result_dico   </div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;   <span class="comment"># -----------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;   <span class="keyword">def </span><a class="code" href="classgfit_1_1gfit__helper_1_1GfitHelper.html#a311c5fa2ef831c513adb8ddae037c5d5">save_from_list_dico</a>(self, data_dico, output_directory, output_filename, col_list=[],</div>
<div class="line"><a name="l00645"></a><span class="lineno"><a class="line" href="classgfit_1_1gfit__helper_1_1GfitHelper.html#a311c5fa2ef831c513adb8ddae037c5d5">  645</a></span>&#160;                                 key_index_map={}, key_fmt_map={}, default_fmt=<span class="stringliteral">&quot;%.18e&quot;</span>):</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;      <span class="stringliteral">&quot;&quot;&quot;! </span></div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;<span class="stringliteral">         Save a dictionary to disk as a catalog file. It is assumed a list of values is attached to</span></div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;<span class="stringliteral">         each first-level key in the dictionary (a &quot;list&quot; dictionary)</span></div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;<span class="stringliteral">         @param data_dico dictionary with the data</span></div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;<span class="stringliteral">         @param output_directory directory where to create the file</span></div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;<span class="stringliteral">         @param output_filename name of the file to create</span></div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;<span class="stringliteral">         @param col_list list of column names. If empty, take all the keys of the dictionary </span></div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;<span class="stringliteral">         @param key_index_map if not empty, contains a map with the preferred order for some keys</span></div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;<span class="stringliteral">         @param key_fmt_map if not empty, contains the preferred output format of some key values</span></div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;<span class="stringliteral">         @param default_fmt default format if not explicitly specified</span></div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;<span class="stringliteral">      &quot;&quot;&quot;</span></div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;      output_catalog = <span class="keywordtype">None</span>  <span class="comment"># output catalog</span></div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;      <span class="keywordflow">try</span>:</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;         <span class="comment"># print data_dico</span></div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;         <span class="comment"># --- Create output file</span></div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;         output_filepath = os.path.join(output_directory, output_filename)</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;         <span class="comment"># --- Build the list of columns in the required order</span></div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;         cat_col_list = []</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;         cat_col_fmt = []</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;         cat_col_comments = <span class="stringliteral">&quot;&quot;</span></div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;         <span class="keywordflow">if</span> len(col_list) == 0:</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;            col_names = data_dico.keys()</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;         <span class="keywordflow">else</span>:</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;            col_names = col_list</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;         <span class="comment"># --- Sort column names according to their index</span></div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;         <span class="keywordflow">if</span> len(key_index_map) &gt; 0:</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;            sorted_index_tuples = sorted(key_index_map.items(), key=itemgetter(1, 0))</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;            sorted_col_names = [ sorted_index_tuples[i][0] <span class="keywordflow">for</span> (k, i) <span class="keywordflow">in</span> sorted_index_tuples ]</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;            left_col_names = [c <span class="keywordflow">for</span> c <span class="keywordflow">in</span> col_names <span class="keywordflow">if</span> <span class="keywordflow">not</span> c <span class="keywordflow">in</span> sorted_col_names]</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;            col_names = sorted_col_names</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;            col_names.extend(left_col_names)</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;         <span class="comment"># --- Check the column names are indeed in the dictionary</span></div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;         col_names_to_remove = []</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;         <span class="keywordflow">for</span> col_name <span class="keywordflow">in</span> col_names:</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;            <span class="keywordflow">if</span> <span class="keywordflow">not</span> col_name <span class="keywordflow">in</span> data_dico:</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;               <span class="comment"># self.print_warning( &quot;column: {0} not found in the dictionary&quot;.format(col_name) )</span></div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;               col_names_to_remove.append(col_name)</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;         <span class="keywordflow">for</span> col_name <span class="keywordflow">in</span> col_names_to_remove:</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;            <span class="comment"># self.print_warning( &quot;Removing column: {0}&quot;.format(col_name) )</span></div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;            col_names.remove(col_name)</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;         <span class="keywordflow">for</span> col_name <span class="keywordflow">in</span> col_names:</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;            col_no = col_names.index(col_name)</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;            <span class="keywordflow">if</span> col_name <span class="keywordflow">in</span> key_index_map:</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;               cat_col_list.insert(key_index_map[col_name], col_name)</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;               <span class="keywordflow">if</span> col_name <span class="keywordflow">in</span> key_fmt_map:</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;                  cat_col_fmt.insert(key_index_map[col_name], key_fmt_map[col_name])</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;               <span class="keywordflow">else</span>:</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;                  cat_col_fmt.insert(key_index_map[col_name], default_fmt)</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;            <span class="keywordflow">else</span>:</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;               cat_col_list.append(col_name)</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;               cat_col_fmt.append(default_fmt)</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;         <span class="comment"># --- Insert the columns in the catalog</span></div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;         col_data_list = []   </div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;         <span class="keywordflow">for</span> col_name <span class="keywordflow">in</span> cat_col_list:</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;            cat_col_comments += col_name + <span class="stringliteral">&quot; &quot;</span> </div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;            col_data_list.append(numpy.asarray([]))</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;         <span class="keywordflow">for</span> col_name <span class="keywordflow">in</span> cat_col_list:</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;            col_no = cat_col_list.index(col_name)</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;            <span class="comment"># ## print col_name, len(data_dico[col_name])</span></div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;            col_data_list[col_no] = numpy.concatenate(</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;                                                    (col_data_list[col_no], data_dico[col_name])) </div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;         data_matrix = numpy.asmatrix(col_data_list).transpose().squeeze()</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;         numpy.savetxt(output_filepath, data_matrix, fmt=cat_col_fmt, header=cat_col_comments)</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;      <span class="keywordflow">except</span> Exception <span class="keyword">as</span> detail:</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;         self.print_error(<span class="stringliteral">&quot;could not create catalog from dictionary ({0})&quot;</span>.format(detail))</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;   </div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;   <span class="comment"># -----------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;   <span class="keyword">def </span><a class="code" href="classgfit_1_1gfit__helper_1_1GfitHelper.html#a97361a31219f58eb43889a4fa6d3c28d">create_from_list_dico</a>(self, data_dico, output_directory, output_filename, \</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;                                   job, worker, col_list=[],</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;                                   key_index_map={}, key_fmt_map={}, default_fmt=<span class="stringliteral">&quot;%.6e&quot;</span>,</div>
<div class="line"><a name="l00733"></a><span class="lineno"><a class="line" href="classgfit_1_1gfit__helper_1_1GfitHelper.html#a97361a31219f58eb43889a4fa6d3c28d">  733</a></span>&#160;                                   is_ascii=<span class="keyword">True</span>, is_sextractor=<span class="keyword">False</span>, hdu_no=1):</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;      <span class="stringliteral">&quot;&quot;&quot;! </span></div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;<span class="stringliteral">         Save a dictionary to disk as a catalog file. It is assumed a list of values is attached to</span></div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;<span class="stringliteral">         each first-level key in the dictionary (a &quot;list&quot; dictionary)</span></div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;<span class="stringliteral">         @param data_dico dictionary with the data</span></div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;<span class="stringliteral">         @param output_directory directory where to create the file</span></div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;<span class="stringliteral">         @param output_filename name of the file to create</span></div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;<span class="stringliteral">         @param job an object of class MksJob to process</span></div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;<span class="stringliteral">         @param worker instance of the worker process  </span></div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;<span class="stringliteral">         @param col_list list of column names. If empty, take all the keys of the dictionary </span></div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;<span class="stringliteral">         @param key_index_map if not empty, contains a map with the preferred order for some keys</span></div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;<span class="stringliteral">         @param key_fmt_map if not empty, contains the preferred output format of some key values</span></div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;<span class="stringliteral">         @param default_fmt default format if not explicitly specified</span></div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;<span class="stringliteral">         @param is_sextractor if set to True and catalog has text format, create SExtractor file</span></div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;<span class="stringliteral">                              with ASCII_HEAD format</span></div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;<span class="stringliteral">      &quot;&quot;&quot;</span></div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;      <span class="keywordflow">try</span>:</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;         <span class="comment"># --- Create output file</span></div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;         output_filepath = os.path.join(output_directory, output_filename)</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;         <span class="comment"># --- Build the list of columns in the required order</span></div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;         cat_col_list = []</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;         cat_col_fmt = []</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;         cat_col_comments = <span class="stringliteral">&quot;&quot;</span></div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;         <span class="keywordflow">if</span> len(col_list) == 0:</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;            col_names = data_dico.keys()</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;         <span class="keywordflow">else</span>:</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;            col_names = col_list</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;         <span class="comment"># --- Sort column names according to their index</span></div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;         <span class="keywordflow">if</span> len(key_index_map) &gt; 0:</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;            sorted_index_tuples = sorted(key_index_map.items(), key=itemgetter(1, 0))</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;            sorted_col_names = [ sorted_index_tuples[i][0] <span class="keywordflow">for</span> (k, i) <span class="keywordflow">in</span> sorted_index_tuples ]</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;            left_col_names = [c <span class="keywordflow">for</span> c <span class="keywordflow">in</span> col_names <span class="keywordflow">if</span> <span class="keywordflow">not</span> c <span class="keywordflow">in</span> sorted_col_names]</div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;            col_names = sorted_col_names</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;            col_names.extend(left_col_names)</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;         <span class="comment"># --- Check the column names are indeed in the dictionary</span></div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;         col_names_to_remove = []</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;         <span class="keywordflow">for</span> col_name <span class="keywordflow">in</span> col_names:</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;            <span class="keywordflow">if</span> <span class="keywordflow">not</span> col_name <span class="keywordflow">in</span> data_dico:</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;               <span class="comment"># self.print_warning( &quot;column: {0} not found in the dictionary&quot;.format(col_name) )</span></div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;               col_names_to_remove.append(col_name)</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;         <span class="keywordflow">for</span> col_name <span class="keywordflow">in</span> col_names_to_remove:</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;            <span class="comment"># self.print_warning( &quot;Removing column: {0}&quot;.format(col_name) )</span></div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;            col_names.remove(col_name)</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;         <span class="keywordflow">for</span> col_name <span class="keywordflow">in</span> col_names:</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;            col_no = col_names.index(col_name)</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;            <span class="comment"># ##print col_name, len(data_dico[col_name])</span></div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;            <span class="keywordflow">if</span> col_name <span class="keywordflow">in</span> key_index_map.keys():</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;               cat_col_list.insert(key_index_map[col_name], col_name)</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;               <span class="keywordflow">if</span> col_name <span class="keywordflow">in</span> key_fmt_map:</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;                  cat_col_fmt.insert(key_index_map[col_name], key_fmt_map[col_name])</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;               <span class="keywordflow">else</span>:</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;                  cat_col_fmt.insert(key_index_map[col_name], default_fmt)</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;            <span class="keywordflow">else</span>:</div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;               cat_col_list.append(col_name)</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;               cat_col_fmt.append(default_fmt)</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;         <span class="comment"># print &quot;col_list:&quot;, col_list</span></div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;         <span class="comment"># --- Insert the columns in the catalog</span></div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;         col_data_list = []   </div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;         <span class="keywordflow">for</span> col_name <span class="keywordflow">in</span> cat_col_list:</div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;            <span class="comment"># print col_name</span></div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;            cat_col_comments += col_name + <span class="stringliteral">&quot; &quot;</span> </div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;            col_data_list.append(numpy.asarray([]))</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;         <span class="keywordflow">for</span> col_name <span class="keywordflow">in</span> cat_col_list:</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;            <span class="comment"># print col_name</span></div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;            col_no = cat_col_list.index(col_name)</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;            col_data_list[col_no] = numpy.concatenate(</div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;                                                    (col_data_list[col_no], data_dico[col_name])) </div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;         data_matrix = numpy.asmatrix(col_data_list).transpose().squeeze()</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;</div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;         <span class="comment"># print &quot;matrix:&quot;, data_matrix</span></div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;</div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;         <span class="comment"># --- Create catalog file of the correct format</span></div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;         catalog = <span class="keywordtype">None</span></div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;         <span class="keywordflow">if</span> <span class="keywordflow">not</span> is_ascii:</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;            <span class="comment"># --- Assume FITS format</span></div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;            catalog = FITSCatalog(output_filepath, hdu_no=hdu_no)</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;            catalog.create_from_numpy(data_matrix, cat_col_list, ext_name=<span class="keywordtype">None</span>)</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;         <span class="keywordflow">else</span>:   </div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;            <span class="keywordflow">if</span> is_sextractor:</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;               <span class="comment"># --- ASCII_HEAD SExtractor format</span></div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;               catalog = SExCatalog(output_filepath)</div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;               catalog.create_from_numpy(data_matrix, cat_col_list, col_formats=cat_col_fmt)</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;            <span class="keywordflow">else</span>:         </div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;               <span class="comment"># --- ASCII tabulated format</span></div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;<span class="comment">#                catalog = TextCatalog(output_filepath)</span></div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;<span class="comment">#                catalog.create_from_numpy(data_matrix, cat_col_list)</span></div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;               numpy.savetxt(output_filepath, data_matrix,</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;                                              fmt=cat_col_fmt, header=cat_col_comments)</div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;      <span class="keywordflow">except</span>:</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;         self.print_error(<span class="stringliteral">&quot;could not create catalog from dictionary ({0})&quot;</span>.format(sys.exc_info()))</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;      <span class="keywordflow">finally</span>:</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;         <span class="keywordflow">if</span> <span class="keywordflow">not</span> catalog <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;            catalog.close()   </div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;            </div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;<span class="comment">#   # -----------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;<span class="comment">#   def RMSD(self, stamp):</span></div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;<span class="comment">#      return numpy.sqrt()</span></div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;   <span class="comment"># -----------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00849"></a><span class="lineno"><a class="line" href="classgfit_1_1gfit__helper_1_1GfitHelper.html#a87882e32bdd58341c0bfd5619bf0ff81">  849</a></span>&#160;   <span class="keyword">def </span><a class="code" href="classgfit_1_1gfit__helper_1_1GfitHelper.html#a87882e32bdd58341c0bfd5619bf0ff81">RMSD</a>(self, stamp):</div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;      <span class="keywordflow">return</span> numpy.sqrt(numpy.mean(stamp))  </div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;   <span class="comment"># -----------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00853"></a><span class="lineno"><a class="line" href="classgfit_1_1gfit__helper_1_1GfitHelper.html#a6f4cc968bcbfcc080e13369219ceb1a7">  853</a></span>&#160;   <span class="keyword">def </span><a class="code" href="classgfit_1_1gfit__helper_1_1GfitHelper.html#a6f4cc968bcbfcc080e13369219ceb1a7">record_data_items</a>(self, data_dico, qvars, qvals):</div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;      qoper_tuples = [(<span class="stringliteral">&quot;sum&quot;</span>, numpy.sum), (<span class="stringliteral">&quot;min&quot;</span>, numpy.min), \</div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;                      (<span class="stringliteral">&quot;max&quot;</span>, numpy.max)] </div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;<span class="comment">#      qoper_tuples = [(&quot;sum&quot;, numpy.sum), (&quot;min&quot;, numpy.min),\</span></div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;<span class="comment">#                      (&quot;max&quot;, numpy.max), (&quot;mean&quot;, numpy.mean), (&quot;rmsd&quot;, self.RMSD)] </span></div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;</div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;      <span class="keywordflow">for</span> (qlabel, qoper) <span class="keywordflow">in</span> qoper_tuples:</div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;         <span class="keywordflow">for</span> (qvar, qval) <span class="keywordflow">in</span> zip(qvars, qvals):</div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;            full_var = qlabel + <span class="stringliteral">&quot;_&quot;</span> + qvar</div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;            <span class="keywordflow">if</span> <span class="keywordflow">not</span> full_var <span class="keywordflow">in</span> data_dico:</div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;               data_dico[full_var] = []</div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;            data_dico[full_var].append(qoper(qval))</div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;</div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;<span class="comment"># --------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00869"></a><span class="lineno"><a class="line" href="classgfit_1_1gfit__helper_1_1OrderedDict.html">  869</a></span>&#160;<span class="keyword">class </span><a class="code" href="classgfit_1_1gfit__helper_1_1OrderedDict.html">OrderedDict</a>(<a class="code" href="classdict.html">dict</a>):</div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;    <span class="stringliteral">&#39;Dictionary that remembers insertion order&#39;</span></div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;    <span class="comment"># An inherited dict maps keys to values.</span></div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;    <span class="comment"># The inherited dict provides __getitem__, __len__, __contains__, and get.</span></div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;    <span class="comment"># The remaining methods are order-aware.</span></div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;    <span class="comment"># Big-O running times for all methods are the same as for regular dictionaries.</span></div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;</div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;    <span class="comment"># The internal self.__map dictionary maps keys to links in a doubly linked list.</span></div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;    <span class="comment"># The circular doubly linked list starts and ends with a sentinel element.</span></div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;    <span class="comment"># The sentinel element never gets deleted (this simplifies the algorithm).</span></div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;    <span class="comment"># Each link is stored as a list of length three:  [PREV, NEXT, KEY].</span></div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;</div>
<div class="line"><a name="l00881"></a><span class="lineno"><a class="line" href="classgfit_1_1gfit__helper_1_1OrderedDict.html#afc436286373ae8e108ab14b60131fceb">  881</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classgfit_1_1gfit__helper_1_1OrderedDict.html#afc436286373ae8e108ab14b60131fceb">__init__</a>(self, *args, **kwds):</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;        <span class="stringliteral">&#39;&#39;&#39;Initialize an ordered dictionary.  Signature is the same as for</span></div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;<span class="stringliteral">        regular dictionaries, but keyword arguments are not recommended</span></div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;<span class="stringliteral">        because their insertion order is arbitrary.</span></div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;<span class="stringliteral">        &#39;&#39;&#39;</span></div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;        <span class="keywordflow">if</span> len(args) &gt; 1:</div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;            <span class="keywordflow">raise</span> TypeError(<span class="stringliteral">&#39;expected at most 1 arguments, got %d&#39;</span> % len(args))</div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;        <span class="keywordflow">try</span>:</div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;            self.<a class="code" href="classgfit_1_1gfit__helper_1_1OrderedDict.html#a2895d0d8aa0ef1d9f1f69e04c63f0cb3">__root</a></div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;        <span class="keywordflow">except</span> AttributeError:</div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;            self.<a class="code" href="classgfit_1_1gfit__helper_1_1OrderedDict.html#a2895d0d8aa0ef1d9f1f69e04c63f0cb3">__root</a> = root = []  <span class="comment"># sentinel node</span></div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;            root[:] = [root, root, <span class="keywordtype">None</span>]</div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;            self.<a class="code" href="classgfit_1_1gfit__helper_1_1OrderedDict.html#a95217e193fd4933e5d78450449b92152">__map</a> = {}</div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;        self.<a class="code" href="classgfit_1_1gfit__helper_1_1OrderedDict.html#a62f530c33f0bd99a104185b47e51e59a">__update</a>(*args, **kwds)</div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;</div>
<div class="line"><a name="l00897"></a><span class="lineno"><a class="line" href="classgfit_1_1gfit__helper_1_1OrderedDict.html#ace1e689f0925636bf3af5242f961b5e5">  897</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classgfit_1_1gfit__helper_1_1OrderedDict.html#ace1e689f0925636bf3af5242f961b5e5">__setitem__</a>(self, key, value, dict_setitem=dict.__setitem__):</div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;        <span class="stringliteral">&#39;od.__setitem__(i, y) &lt;==&gt; od[i]=y&#39;</span></div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;        <span class="comment"># Setting a new item creates a new link which goes at the end of the linked</span></div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;        <span class="comment"># list, and the inherited dictionary is updated with the new key/value pair.</span></div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;        <span class="keywordflow">if</span> key <span class="keywordflow">not</span> <span class="keywordflow">in</span> self:</div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;            root = self.<a class="code" href="classgfit_1_1gfit__helper_1_1OrderedDict.html#a2895d0d8aa0ef1d9f1f69e04c63f0cb3">__root</a></div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;            last = root[0]</div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;            last[1] = root[0] = self.<a class="code" href="classgfit_1_1gfit__helper_1_1OrderedDict.html#a95217e193fd4933e5d78450449b92152">__map</a>[key] = [last, root, key]</div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;        dict_setitem(self, key, value)</div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;</div>
<div class="line"><a name="l00907"></a><span class="lineno"><a class="line" href="classgfit_1_1gfit__helper_1_1OrderedDict.html#a19a9b545a1b9df094c3d059005f9b42d">  907</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classgfit_1_1gfit__helper_1_1OrderedDict.html#a19a9b545a1b9df094c3d059005f9b42d">__delitem__</a>(self, key, dict_delitem=dict.__delitem__):</div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;        <span class="stringliteral">&#39;od.__delitem__(y) &lt;==&gt; del od[y]&#39;</span></div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;        <span class="comment"># Deleting an existing item uses self.__map to find the link which is</span></div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;        <span class="comment"># then removed by updating the links in the predecessor and successor nodes.</span></div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;        dict_delitem(self, key)</div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;        link_prev, link_next, key = self.__map.pop(key)</div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;        link_prev[1] = link_next</div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;        link_next[0] = link_prev</div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;</div>
<div class="line"><a name="l00916"></a><span class="lineno"><a class="line" href="classgfit_1_1gfit__helper_1_1OrderedDict.html#a2089ebdc14e4951c9b18181c084ccbbf">  916</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classgfit_1_1gfit__helper_1_1OrderedDict.html#a2089ebdc14e4951c9b18181c084ccbbf">__iter__</a>(self):</div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;        <span class="stringliteral">&#39;od.__iter__() &lt;==&gt; iter(od)&#39;</span></div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;        root = self.<a class="code" href="classgfit_1_1gfit__helper_1_1OrderedDict.html#a2895d0d8aa0ef1d9f1f69e04c63f0cb3">__root</a></div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;        curr = root[1]</div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;        <span class="keywordflow">while</span> curr <span class="keywordflow">is</span> <span class="keywordflow">not</span> root:</div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;            <span class="keywordflow">yield</span> curr[2]</div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;            curr = curr[1]</div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;</div>
<div class="line"><a name="l00924"></a><span class="lineno"><a class="line" href="classgfit_1_1gfit__helper_1_1OrderedDict.html#ae166e857ed332c1a8000a52f44aca1d0">  924</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classgfit_1_1gfit__helper_1_1OrderedDict.html#ae166e857ed332c1a8000a52f44aca1d0">__reversed__</a>(self):</div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;        <span class="stringliteral">&#39;od.__reversed__() &lt;==&gt; reversed(od)&#39;</span></div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;        root = self.<a class="code" href="classgfit_1_1gfit__helper_1_1OrderedDict.html#a2895d0d8aa0ef1d9f1f69e04c63f0cb3">__root</a></div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;        curr = root[0]</div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;        <span class="keywordflow">while</span> curr <span class="keywordflow">is</span> <span class="keywordflow">not</span> root:</div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;            <span class="keywordflow">yield</span> curr[2]</div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;            curr = curr[0]</div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;</div>
<div class="line"><a name="l00932"></a><span class="lineno"><a class="line" href="classgfit_1_1gfit__helper_1_1OrderedDict.html#aa907428ee729ef80ebab770b7332a367">  932</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classgfit_1_1gfit__helper_1_1OrderedDict.html#aa907428ee729ef80ebab770b7332a367">clear</a>(self):</div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;        <span class="stringliteral">&#39;od.clear() -&gt; None.  Remove all items from od.&#39;</span></div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;        <span class="keywordflow">try</span>:</div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;            <span class="keywordflow">for</span> node <span class="keywordflow">in</span> self.__map.itervalues():</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;                del node[:]</div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;            root = self.<a class="code" href="classgfit_1_1gfit__helper_1_1OrderedDict.html#a2895d0d8aa0ef1d9f1f69e04c63f0cb3">__root</a></div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;            root[:] = [root, root, <span class="keywordtype">None</span>]</div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;            self.__map.clear()</div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;        <span class="keywordflow">except</span> AttributeError:</div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;            <span class="keywordflow">pass</span></div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;        dict.clear(self)</div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;</div>
<div class="line"><a name="l00944"></a><span class="lineno"><a class="line" href="classgfit_1_1gfit__helper_1_1OrderedDict.html#af0c5ecdb3089e567f4e39104885caa50">  944</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classgfit_1_1gfit__helper_1_1OrderedDict.html#af0c5ecdb3089e567f4e39104885caa50">popitem</a>(self, last=True):</div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;        <span class="stringliteral">&#39;&#39;&#39;od.popitem() -&gt; (k, v), return and remove a (key, value) pair.</span></div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;<span class="stringliteral">        Pairs are returned in LIFO order if last is true or FIFO order if false.</span></div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;<span class="stringliteral">        &#39;&#39;&#39;</span></div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;        <span class="keywordflow">if</span> <span class="keywordflow">not</span> self:</div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;            <span class="keywordflow">raise</span> KeyError(<span class="stringliteral">&#39;dictionary is empty&#39;</span>)</div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;        root = self.<a class="code" href="classgfit_1_1gfit__helper_1_1OrderedDict.html#a2895d0d8aa0ef1d9f1f69e04c63f0cb3">__root</a></div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;        <span class="keywordflow">if</span> last:</div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;            link = root[0]</div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;            link_prev = link[0]</div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;            link_prev[1] = root</div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;            root[0] = link_prev</div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;        <span class="keywordflow">else</span>:</div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;            link = root[1]</div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;            link_next = link[1]</div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;            root[1] = link_next</div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;            link_next[0] = root</div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;        key = link[2]</div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;        del self.<a class="code" href="classgfit_1_1gfit__helper_1_1OrderedDict.html#a95217e193fd4933e5d78450449b92152">__map</a>[key]</div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;        value = dict.pop(self, key)</div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;        <span class="keywordflow">return</span> key, value</div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;</div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;    <span class="comment"># -- the following methods do not depend on the internal structure --</span></div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;</div>
<div class="line"><a name="l00969"></a><span class="lineno"><a class="line" href="classgfit_1_1gfit__helper_1_1OrderedDict.html#a0e57845ff42d0f11f06aee53646ea983">  969</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classgfit_1_1gfit__helper_1_1OrderedDict.html#a0e57845ff42d0f11f06aee53646ea983">keys</a>(self):</div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;        <span class="stringliteral">&#39;od.keys() -&gt; list of keys in od&#39;</span></div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;        <span class="keywordflow">return</span> list(self)</div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;</div>
<div class="line"><a name="l00973"></a><span class="lineno"><a class="line" href="classgfit_1_1gfit__helper_1_1OrderedDict.html#ac0a7f5a1c9be15cf310f43a84f56c687">  973</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classgfit_1_1gfit__helper_1_1OrderedDict.html#ac0a7f5a1c9be15cf310f43a84f56c687">values</a>(self):</div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;        <span class="stringliteral">&#39;od.values() -&gt; list of values in od&#39;</span></div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;        <span class="keywordflow">return</span> [self[key] <span class="keywordflow">for</span> key <span class="keywordflow">in</span> self]</div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;</div>
<div class="line"><a name="l00977"></a><span class="lineno"><a class="line" href="classgfit_1_1gfit__helper_1_1OrderedDict.html#a65c6efd75deda8822937cf0173031f57">  977</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classgfit_1_1gfit__helper_1_1OrderedDict.html#a65c6efd75deda8822937cf0173031f57">items</a>(self):</div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;        <span class="stringliteral">&#39;od.items() -&gt; list of (key, value) pairs in od&#39;</span></div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;        <span class="keywordflow">return</span> [(key, self[key]) <span class="keywordflow">for</span> key <span class="keywordflow">in</span> self]</div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;</div>
<div class="line"><a name="l00981"></a><span class="lineno"><a class="line" href="classgfit_1_1gfit__helper_1_1OrderedDict.html#a3ad2c4e4023c72d4cbbabf7c452981b3">  981</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classgfit_1_1gfit__helper_1_1OrderedDict.html#a3ad2c4e4023c72d4cbbabf7c452981b3">iterkeys</a>(self):</div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;        <span class="stringliteral">&#39;od.iterkeys() -&gt; an iterator over the keys in od&#39;</span></div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;        <span class="keywordflow">return</span> iter(self)</div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;</div>
<div class="line"><a name="l00985"></a><span class="lineno"><a class="line" href="classgfit_1_1gfit__helper_1_1OrderedDict.html#a341fd19f977b6e05987ce7f1af3857ad">  985</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classgfit_1_1gfit__helper_1_1OrderedDict.html#a341fd19f977b6e05987ce7f1af3857ad">itervalues</a>(self):</div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;        <span class="stringliteral">&#39;od.itervalues -&gt; an iterator over the values in od&#39;</span></div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;        <span class="keywordflow">for</span> k <span class="keywordflow">in</span> self:</div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;            <span class="keywordflow">yield</span> self[k]</div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;</div>
<div class="line"><a name="l00990"></a><span class="lineno"><a class="line" href="classgfit_1_1gfit__helper_1_1OrderedDict.html#aca347d0135f43a021b34423fa6775bc6">  990</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classgfit_1_1gfit__helper_1_1OrderedDict.html#aca347d0135f43a021b34423fa6775bc6">iteritems</a>(self):</div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;        <span class="stringliteral">&#39;od.iteritems -&gt; an iterator over the (key, value) items in od&#39;</span></div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;        <span class="keywordflow">for</span> k <span class="keywordflow">in</span> self:</div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;            <span class="keywordflow">yield</span> (k, self[k])</div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;</div>
<div class="line"><a name="l00995"></a><span class="lineno"><a class="line" href="classgfit_1_1gfit__helper_1_1OrderedDict.html#a8d6e4ad3fbb6f4a37daf7073c2ff3e2b">  995</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classgfit_1_1gfit__helper_1_1OrderedDict.html#a8d6e4ad3fbb6f4a37daf7073c2ff3e2b">update</a>(*args, **kwds):</div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;        <span class="stringliteral">&#39;&#39;&#39;od.update(E, **F) -&gt; None.  Update od from dict/iterable E and F.</span></div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;<span class="stringliteral">        If E is a dict instance, does:           for k in E: od[k] = E[k]</span></div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;<span class="stringliteral">        If E has a .keys() method, does:         for k in E.keys(): od[k] = E[k]</span></div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;<span class="stringliteral">        Or if E is an iterable of items, does:   for k, v in E: od[k] = v</span></div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;<span class="stringliteral">        In either case, this is followed by:     for k, v in F.items(): od[k] = v</span></div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;<span class="stringliteral">        &#39;&#39;&#39;</span></div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;        <span class="keywordflow">if</span> len(args) &gt; 2:</div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;            <span class="keywordflow">raise</span> TypeError(<span class="stringliteral">&#39;update() takes at most 2 positional &#39;</span></div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;                            <span class="stringliteral">&#39;arguments (%d given)&#39;</span> % (len(args),))</div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;        <span class="keywordflow">elif</span> <span class="keywordflow">not</span> args:</div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;            <span class="keywordflow">raise</span> TypeError(<span class="stringliteral">&#39;update() takes at least 1 argument (0 given)&#39;</span>)</div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;        self = args[0]</div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;        <span class="comment"># Make progressively weaker assumptions about &quot;other&quot;</span></div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;        other = ()</div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;        <span class="keywordflow">if</span> len(args) == 2:</div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;            other = args[1]</div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;        <span class="keywordflow">if</span> isinstance(other, dict):</div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;            <span class="keywordflow">for</span> key <span class="keywordflow">in</span> other:</div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;                self[key] = other[key]</div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;        <span class="keywordflow">elif</span> hasattr(other, <span class="stringliteral">&#39;keys&#39;</span>):</div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;            <span class="keywordflow">for</span> key <span class="keywordflow">in</span> other.keys():</div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;                self[key] = other[key]</div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;        <span class="keywordflow">else</span>:</div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;            <span class="keywordflow">for</span> key, value <span class="keywordflow">in</span> other:</div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;                self[key] = value</div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;        <span class="keywordflow">for</span> key, value <span class="keywordflow">in</span> kwds.items():</div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;            self[key] = value</div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;</div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;    __update = update  <span class="comment"># let subclasses override update without breaking __init__</span></div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;</div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;    __marker = <a class="code" href="classobject.html">object</a>()</div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;</div>
<div class="line"><a name="l01030"></a><span class="lineno"><a class="line" href="classgfit_1_1gfit__helper_1_1OrderedDict.html#a2ae71586a218048e563d0fbe424b52da"> 1030</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classgfit_1_1gfit__helper_1_1OrderedDict.html#a2ae71586a218048e563d0fbe424b52da">pop</a>(self, key, default=__marker):</div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;        <span class="stringliteral">&#39;&#39;&#39;od.pop(k[,d]) -&gt; v, remove specified key and return the corresponding value.</span></div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;<span class="stringliteral">        If key is not found, d is returned if given, otherwise KeyError is raised.</span></div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;<span class="stringliteral">        &#39;&#39;&#39;</span></div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;        <span class="keywordflow">if</span> key <span class="keywordflow">in</span> self:</div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;            result = self[key]</div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;            del self[key]</div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;            <span class="keywordflow">return</span> result</div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;        <span class="keywordflow">if</span> default <span class="keywordflow">is</span> self.<a class="code" href="classgfit_1_1gfit__helper_1_1OrderedDict.html#ac4b2660c2e86995afee459d15a8e3c14">__marker</a>:</div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;            <span class="keywordflow">raise</span> KeyError(key)</div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;        <span class="keywordflow">return</span> default</div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;</div>
<div class="line"><a name="l01043"></a><span class="lineno"><a class="line" href="classgfit_1_1gfit__helper_1_1OrderedDict.html#a49ea960feab47542ffa9dc08fc559ead"> 1043</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classgfit_1_1gfit__helper_1_1OrderedDict.html#a49ea960feab47542ffa9dc08fc559ead">setdefault</a>(self, key, default=None):</div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;        <span class="stringliteral">&#39;od.setdefault(k[,d]) -&gt; od.get(k,d), also set od[k]=d if k not in od&#39;</span></div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;        <span class="keywordflow">if</span> key <span class="keywordflow">in</span> self:</div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;            <span class="keywordflow">return</span> self[key]</div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;        self[key] = default</div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;        <span class="keywordflow">return</span> default</div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;</div>
<div class="line"><a name="l01050"></a><span class="lineno"><a class="line" href="classgfit_1_1gfit__helper_1_1OrderedDict.html#ae593608ced5bc1dd0f32b906d43a9a27"> 1050</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classgfit_1_1gfit__helper_1_1OrderedDict.html#ae593608ced5bc1dd0f32b906d43a9a27">__repr__</a>(self, _repr_running={}):</div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;        <span class="stringliteral">&#39;od.__repr__() &lt;==&gt; repr(od)&#39;</span></div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;        call_key = id(self), _get_ident()</div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;        <span class="keywordflow">if</span> call_key <span class="keywordflow">in</span> _repr_running:</div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;            <span class="keywordflow">return</span> <span class="stringliteral">&#39;...&#39;</span></div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;        _repr_running[call_key] = 1</div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;        <span class="keywordflow">try</span>:</div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;            <span class="keywordflow">if</span> <span class="keywordflow">not</span> self:</div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;                <span class="keywordflow">return</span> <span class="stringliteral">&#39;%s()&#39;</span> % (self.__class__.__name__,)</div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;            <span class="keywordflow">return</span> <span class="stringliteral">&#39;%s(%r)&#39;</span> % (self.__class__.__name__, self.<a class="code" href="classgfit_1_1gfit__helper_1_1OrderedDict.html#a65c6efd75deda8822937cf0173031f57">items</a>())</div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;        <span class="keywordflow">finally</span>:</div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;            del _repr_running[call_key]</div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;</div>
<div class="line"><a name="l01063"></a><span class="lineno"><a class="line" href="classgfit_1_1gfit__helper_1_1OrderedDict.html#a074d213a24669d9822a4c7b4e307d0b3"> 1063</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classgfit_1_1gfit__helper_1_1OrderedDict.html#a074d213a24669d9822a4c7b4e307d0b3">__reduce__</a>(self):</div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;        <span class="stringliteral">&#39;Return state information for pickling&#39;</span></div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;        items = [[k, self[k]] <span class="keywordflow">for</span> k <span class="keywordflow">in</span> self]</div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;        inst_dict = vars(self).<a class="code" href="classgfit_1_1gfit__helper_1_1OrderedDict.html#a3d7384596b8d689e42d00cf8dadabe4d">copy</a>()</div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;        <span class="keywordflow">for</span> k <span class="keywordflow">in</span> vars(<a class="code" href="classgfit_1_1gfit__helper_1_1OrderedDict.html">OrderedDict</a>()):</div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;            inst_dict.pop(k, <span class="keywordtype">None</span>)</div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;        <span class="keywordflow">if</span> inst_dict:</div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;            <span class="keywordflow">return</span> (self.__class__, (items,), inst_dict)</div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;        <span class="keywordflow">return</span> self.__class__, (items,)</div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;</div>
<div class="line"><a name="l01073"></a><span class="lineno"><a class="line" href="classgfit_1_1gfit__helper_1_1OrderedDict.html#a3d7384596b8d689e42d00cf8dadabe4d"> 1073</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classgfit_1_1gfit__helper_1_1OrderedDict.html#a3d7384596b8d689e42d00cf8dadabe4d">copy</a>(self):</div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;        <span class="stringliteral">&#39;od.copy() -&gt; a shallow copy of od&#39;</span></div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;        <span class="keywordflow">return</span> self.__class__(self)</div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;</div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;    @classmethod</div>
<div class="line"><a name="l01078"></a><span class="lineno"><a class="line" href="classgfit_1_1gfit__helper_1_1OrderedDict.html#a3e905cd80933ce0a8ccd29ad00fa3863"> 1078</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classgfit_1_1gfit__helper_1_1OrderedDict.html#a3e905cd80933ce0a8ccd29ad00fa3863">fromkeys</a>(cls, iterable, value=None):</div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;        <span class="stringliteral">&#39;&#39;&#39;OD.fromkeys(S[, v]) -&gt; New ordered dictionary with keys from S</span></div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;<span class="stringliteral">        and values equal to v (which defaults to None).</span></div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;<span class="stringliteral">        &#39;&#39;&#39;</span></div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;        d = cls()</div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;        <span class="keywordflow">for</span> key <span class="keywordflow">in</span> iterable:</div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;            d[key] = value</div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;        <span class="keywordflow">return</span> d</div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;</div>
<div class="line"><a name="l01088"></a><span class="lineno"><a class="line" href="classgfit_1_1gfit__helper_1_1OrderedDict.html#a0279185b62017e8bebf8cef68b1caf7c"> 1088</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classgfit_1_1gfit__helper_1_1OrderedDict.html#a0279185b62017e8bebf8cef68b1caf7c">__eq__</a>(self, other):</div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;        <span class="stringliteral">&#39;&#39;&#39;od.__eq__(y) &lt;==&gt; od==y.  Comparison to another OD is order-sensitive</span></div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;<span class="stringliteral">        while comparison to a regular mapping is order-insensitive.</span></div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;<span class="stringliteral">        &#39;&#39;&#39;</span></div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;        <span class="keywordflow">if</span> isinstance(other, OrderedDict):</div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;            <span class="keywordflow">return</span> len(self) == len(other) <span class="keywordflow">and</span> self.<a class="code" href="classgfit_1_1gfit__helper_1_1OrderedDict.html#a65c6efd75deda8822937cf0173031f57">items</a>() == other.items()</div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;        <span class="keywordflow">return</span> dict.__eq__(self, other)</div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;</div>
<div class="line"><a name="l01097"></a><span class="lineno"><a class="line" href="classgfit_1_1gfit__helper_1_1OrderedDict.html#ad75da1ae443a255551dd91248d97398b"> 1097</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classgfit_1_1gfit__helper_1_1OrderedDict.html#ad75da1ae443a255551dd91248d97398b">__ne__</a>(self, other):</div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;        <span class="keywordflow">return</span> <span class="keywordflow">not</span> self == other</div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;</div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;    <span class="comment"># -- the following methods are only used in Python 2.7 --</span></div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;</div>
<div class="line"><a name="l01102"></a><span class="lineno"><a class="line" href="classgfit_1_1gfit__helper_1_1OrderedDict.html#ac548131399a816f94337c76e4a295736"> 1102</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classgfit_1_1gfit__helper_1_1OrderedDict.html#ac548131399a816f94337c76e4a295736">viewkeys</a>(self):</div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;        <span class="stringliteral">&quot;od.viewkeys() -&gt; a set-like object providing a view on od&#39;s keys&quot;</span></div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;        <span class="keywordflow">return</span> KeysView(self)</div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;</div>
<div class="line"><a name="l01106"></a><span class="lineno"><a class="line" href="classgfit_1_1gfit__helper_1_1OrderedDict.html#aaeadd9b76babb973ecfe23904fef4df2"> 1106</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classgfit_1_1gfit__helper_1_1OrderedDict.html#aaeadd9b76babb973ecfe23904fef4df2">viewvalues</a>(self):</div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;        <span class="stringliteral">&quot;od.viewvalues() -&gt; an object providing a view on od&#39;s values&quot;</span></div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;        <span class="keywordflow">return</span> ValuesView(self)</div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;</div>
<div class="line"><a name="l01110"></a><span class="lineno"><a class="line" href="classgfit_1_1gfit__helper_1_1OrderedDict.html#a4591d3e42b77454c554222228b976c46"> 1110</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classgfit_1_1gfit__helper_1_1OrderedDict.html#a4591d3e42b77454c554222228b976c46">viewitems</a>(self):</div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;        <span class="stringliteral">&quot;od.viewitems() -&gt; a set-like object providing a view on od&#39;s items&quot;</span></div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;        <span class="keywordflow">return</span> ItemsView(self)</div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;</div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;<span class="comment"># -- EOF gfit_helper.py</span></div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;</div>
<div class="ttc" id="classgfit_1_1gfit__helper_1_1GfitHelper_html_a8fa3e178c445baa19c74a6795a1fa833"><div class="ttname"><a href="classgfit_1_1gfit__helper_1_1GfitHelper.html#a8fa3e178c445baa19c74a6795a1fa833">gfit.gfit_helper.GfitHelper.make_psf_sky_image</a></div><div class="ttdeci">def make_psf_sky_image</div><div class="ttdef"><b>Definition:</b> <a href="gfit__helper_8py_source.html#l00371">gfit_helper.py:371</a></div></div>
<div class="ttc" id="classgfit_1_1gfit__helper_1_1OrderedDict_html_ac548131399a816f94337c76e4a295736"><div class="ttname"><a href="classgfit_1_1gfit__helper_1_1OrderedDict.html#ac548131399a816f94337c76e4a295736">gfit.gfit_helper.OrderedDict.viewkeys</a></div><div class="ttdeci">def viewkeys</div><div class="ttdef"><b>Definition:</b> <a href="gfit__helper_8py_source.html#l01102">gfit_helper.py:1102</a></div></div>
<div class="ttc" id="classgfit_1_1gfit__helper_1_1GfitHelper_html_a3393f5fa510a5b0bdbf342664ddb47fe"><div class="ttname"><a href="classgfit_1_1gfit__helper_1_1GfitHelper.html#a3393f5fa510a5b0bdbf342664ddb47fe">gfit.gfit_helper.GfitHelper.cut_stamp_around_centroid</a></div><div class="ttdeci">def cut_stamp_around_centroid</div><div class="ttdoc">Cut a postage stamp of a given size around a given centroid relative to the image. </div><div class="ttdef"><b>Definition:</b> <a href="gfit__helper_8py_source.html#l00176">gfit_helper.py:176</a></div></div>
<div class="ttc" id="classgfit_1_1gfit__helper_1_1OrderedDict_html_a074d213a24669d9822a4c7b4e307d0b3"><div class="ttname"><a href="classgfit_1_1gfit__helper_1_1OrderedDict.html#a074d213a24669d9822a4c7b4e307d0b3">gfit.gfit_helper.OrderedDict.__reduce__</a></div><div class="ttdeci">def __reduce__</div><div class="ttdef"><b>Definition:</b> <a href="gfit__helper_8py_source.html#l01063">gfit_helper.py:1063</a></div></div>
<div class="ttc" id="classgfit_1_1gfit__helper_1_1GfitHelper_html_abbade51cb5e31e38165f503a60c37e9d"><div class="ttname"><a href="classgfit_1_1gfit__helper_1_1GfitHelper.html#abbade51cb5e31e38165f503a60c37e9d">gfit.gfit_helper.GfitHelper.compute_stamp_sky_background</a></div><div class="ttdeci">def compute_stamp_sky_background</div><div class="ttdoc">Get stamp median sky background evaluated from the stamp border. </div><div class="ttdef"><b>Definition:</b> <a href="gfit__helper_8py_source.html#l00306">gfit_helper.py:306</a></div></div>
<div class="ttc" id="classgfit_1_1gfit__helper_1_1GfitHelper_html_a63a8b369f66b6719fc79b55d2d8561ab"><div class="ttname"><a href="classgfit_1_1gfit__helper_1_1GfitHelper.html#a63a8b369f66b6719fc79b55d2d8561ab">gfit.gfit_helper.GfitHelper.compute_stamp_SNR</a></div><div class="ttdeci">def compute_stamp_SNR</div><div class="ttdoc">Compute the SNR of a postage stamp image. </div><div class="ttdef"><b>Definition:</b> <a href="gfit__helper_8py_source.html#l00301">gfit_helper.py:301</a></div></div>
<div class="ttc" id="classgfit_1_1gfit__helper_1_1OrderedDict_html_aa907428ee729ef80ebab770b7332a367"><div class="ttname"><a href="classgfit_1_1gfit__helper_1_1OrderedDict.html#aa907428ee729ef80ebab770b7332a367">gfit.gfit_helper.OrderedDict.clear</a></div><div class="ttdeci">def clear</div><div class="ttdef"><b>Definition:</b> <a href="gfit__helper_8py_source.html#l00932">gfit_helper.py:932</a></div></div>
<div class="ttc" id="classgfit_1_1gfit__helper_1_1GfitHelper_html_a87882e32bdd58341c0bfd5619bf0ff81"><div class="ttname"><a href="classgfit_1_1gfit__helper_1_1GfitHelper.html#a87882e32bdd58341c0bfd5619bf0ff81">gfit.gfit_helper.GfitHelper.RMSD</a></div><div class="ttdeci">def RMSD</div><div class="ttdef"><b>Definition:</b> <a href="gfit__helper_8py_source.html#l00849">gfit_helper.py:849</a></div></div>
<div class="ttc" id="classgfit_1_1gfit__helper_1_1OrderedDict_html_ad75da1ae443a255551dd91248d97398b"><div class="ttname"><a href="classgfit_1_1gfit__helper_1_1OrderedDict.html#ad75da1ae443a255551dd91248d97398b">gfit.gfit_helper.OrderedDict.__ne__</a></div><div class="ttdeci">def __ne__</div><div class="ttdef"><b>Definition:</b> <a href="gfit__helper_8py_source.html#l01097">gfit_helper.py:1097</a></div></div>
<div class="ttc" id="classgfit_1_1gfit__helper_1_1GfitHelper_html_a62708ccc9e00f1d5abd2314b27a1241e"><div class="ttname"><a href="classgfit_1_1gfit__helper_1_1GfitHelper.html#a62708ccc9e00f1d5abd2314b27a1241e">gfit.gfit_helper.GfitHelper.get_psf_noise_map</a></div><div class="ttdeci">def get_psf_noise_map</div><div class="ttdoc">Create or Read a RMS noise map, whose values are the estimated standard deviation (pixels represent s...</div><div class="ttdef"><b>Definition:</b> <a href="gfit__helper_8py_source.html#l00424">gfit_helper.py:424</a></div></div>
<div class="ttc" id="classgfit_1_1gfit__helper_1_1GfitHelper_html_ae3300ee18f1d1b884c3947a52ad1af20"><div class="ttname"><a href="classgfit_1_1gfit__helper_1_1GfitHelper.html#ae3300ee18f1d1b884c3947a52ad1af20">gfit.gfit_helper.GfitHelper.make_galaxy_sky_image</a></div><div class="ttdeci">def make_galaxy_sky_image</div><div class="ttdef"><b>Definition:</b> <a href="gfit__helper_8py_source.html#l00330">gfit_helper.py:330</a></div></div>
<div class="ttc" id="classgfit_1_1gfit__helper_1_1OrderedDict_html_a8d6e4ad3fbb6f4a37daf7073c2ff3e2b"><div class="ttname"><a href="classgfit_1_1gfit__helper_1_1OrderedDict.html#a8d6e4ad3fbb6f4a37daf7073c2ff3e2b">gfit.gfit_helper.OrderedDict.update</a></div><div class="ttdeci">def update</div><div class="ttdef"><b>Definition:</b> <a href="gfit__helper_8py_source.html#l00995">gfit_helper.py:995</a></div></div>
<div class="ttc" id="classgfit_1_1gfit__helper_1_1OrderedDict_html_a49ea960feab47542ffa9dc08fc559ead"><div class="ttname"><a href="classgfit_1_1gfit__helper_1_1OrderedDict.html#a49ea960feab47542ffa9dc08fc559ead">gfit.gfit_helper.OrderedDict.setdefault</a></div><div class="ttdeci">def setdefault</div><div class="ttdef"><b>Definition:</b> <a href="gfit__helper_8py_source.html#l01043">gfit_helper.py:1043</a></div></div>
<div class="ttc" id="classgfit_1_1gfit__helper_1_1GfitHelper_html_affdd43c7c39399a99466e7ffa5a185b8"><div class="ttname"><a href="classgfit_1_1gfit__helper_1_1GfitHelper.html#affdd43c7c39399a99466e7ffa5a185b8">gfit.gfit_helper.GfitHelper.remove_failed_fits_from_result_dico</a></div><div class="ttdeci">def remove_failed_fits_from_result_dico</div><div class="ttdef"><b>Definition:</b> <a href="gfit__helper_8py_source.html#l00613">gfit_helper.py:613</a></div></div>
<div class="ttc" id="classgfit_1_1gfit__helper_1_1OrderedDict_html_ae166e857ed332c1a8000a52f44aca1d0"><div class="ttname"><a href="classgfit_1_1gfit__helper_1_1OrderedDict.html#ae166e857ed332c1a8000a52f44aca1d0">gfit.gfit_helper.OrderedDict.__reversed__</a></div><div class="ttdeci">def __reversed__</div><div class="ttdef"><b>Definition:</b> <a href="gfit__helper_8py_source.html#l00924">gfit_helper.py:924</a></div></div>
<div class="ttc" id="classgfit_1_1gfit__helper_1_1GfitHelper_html_a6a277504110ba47bd9a36d3d699cab87"><div class="ttname"><a href="classgfit_1_1gfit__helper_1_1GfitHelper.html#a6a277504110ba47bd9a36d3d699cab87">gfit.gfit_helper.GfitHelper.get_version</a></div><div class="ttdeci">def get_version</div><div class="ttdoc">Get the version number of this pse code as text. </div><div class="ttdef"><b>Definition:</b> <a href="gfit__helper_8py_source.html#l00034">gfit_helper.py:34</a></div></div>
<div class="ttc" id="classgfit_1_1gfit__helper_1_1OrderedDict_html_ac4b2660c2e86995afee459d15a8e3c14"><div class="ttname"><a href="classgfit_1_1gfit__helper_1_1OrderedDict.html#ac4b2660c2e86995afee459d15a8e3c14">gfit.gfit_helper.OrderedDict.__marker</a></div><div class="ttdeci">tuple __marker</div><div class="ttdef"><b>Definition:</b> <a href="gfit__helper_8py_source.html#l01028">gfit_helper.py:1028</a></div></div>
<div class="ttc" id="classgfit_1_1gfit__helper_1_1GfitHelper_html_a6f4cc968bcbfcc080e13369219ceb1a7"><div class="ttname"><a href="classgfit_1_1gfit__helper_1_1GfitHelper.html#a6f4cc968bcbfcc080e13369219ceb1a7">gfit.gfit_helper.GfitHelper.record_data_items</a></div><div class="ttdeci">def record_data_items</div><div class="ttdef"><b>Definition:</b> <a href="gfit__helper_8py_source.html#l00853">gfit_helper.py:853</a></div></div>
<div class="ttc" id="classgfit_1_1gfit__helper_1_1OrderedDict_html_a65c6efd75deda8822937cf0173031f57"><div class="ttname"><a href="classgfit_1_1gfit__helper_1_1OrderedDict.html#a65c6efd75deda8822937cf0173031f57">gfit.gfit_helper.OrderedDict.items</a></div><div class="ttdeci">def items</div><div class="ttdef"><b>Definition:</b> <a href="gfit__helper_8py_source.html#l00977">gfit_helper.py:977</a></div></div>
<div class="ttc" id="classgfit_1_1gfit__helper_1_1GfitHelper_html_af9f1556dcd73b5b1f790e11a6b27964d"><div class="ttname"><a href="classgfit_1_1gfit__helper_1_1GfitHelper.html#af9f1556dcd73b5b1f790e11a6b27964d">gfit.gfit_helper.GfitHelper.estimate_stamp_noise</a></div><div class="ttdeci">def estimate_stamp_noise</div><div class="ttdef"><b>Definition:</b> <a href="gfit__helper_8py_source.html#l00251">gfit_helper.py:251</a></div></div>
<div class="ttc" id="classgfit_1_1gfit__helper_1_1OrderedDict_html_a341fd19f977b6e05987ce7f1af3857ad"><div class="ttname"><a href="classgfit_1_1gfit__helper_1_1OrderedDict.html#a341fd19f977b6e05987ce7f1af3857ad">gfit.gfit_helper.OrderedDict.itervalues</a></div><div class="ttdeci">def itervalues</div><div class="ttdef"><b>Definition:</b> <a href="gfit__helper_8py_source.html#l00985">gfit_helper.py:985</a></div></div>
<div class="ttc" id="classgfit_1_1gfit__helper_1_1GfitHelper_html_a11729744dce2297c24cbd918d96e9264"><div class="ttname"><a href="classgfit_1_1gfit__helper_1_1GfitHelper.html#a11729744dce2297c24cbd918d96e9264">gfit.gfit_helper.GfitHelper.get_catalog_property_dico</a></div><div class="ttdeci">def get_catalog_property_dico</div><div class="ttdef"><b>Definition:</b> <a href="gfit__helper_8py_source.html#l00470">gfit_helper.py:470</a></div></div>
<div class="ttc" id="classgfit_1_1gfit__helper_1_1GfitHelper_html_abd22ac745e2d3162493a5b232dcc3243"><div class="ttname"><a href="classgfit_1_1gfit__helper_1_1GfitHelper.html#abd22ac745e2d3162493a5b232dcc3243">gfit.gfit_helper.GfitHelper.read_fits_image</a></div><div class="ttdeci">def read_fits_image</div><div class="ttdef"><b>Definition:</b> <a href="gfit__helper_8py_source.html#l00155">gfit_helper.py:155</a></div></div>
<div class="ttc" id="classgfit_1_1gfit__helper_1_1GfitHelper_html_ad94ca953dd859288a6cb29642825e100"><div class="ttname"><a href="classgfit_1_1gfit__helper_1_1GfitHelper.html#ad94ca953dd859288a6cb29642825e100">gfit.gfit_helper.GfitHelper.write_as_fits</a></div><div class="ttdeci">def write_as_fits</div><div class="ttdoc">Write a two-dimensional data numpy array as a .fits file to some given path. </div><div class="ttdef"><b>Definition:</b> <a href="gfit__helper_8py_source.html#l00553">gfit_helper.py:553</a></div></div>
<div class="ttc" id="classgfit_1_1gfit__helper_1_1OrderedDict_html_aca347d0135f43a021b34423fa6775bc6"><div class="ttname"><a href="classgfit_1_1gfit__helper_1_1OrderedDict.html#aca347d0135f43a021b34423fa6775bc6">gfit.gfit_helper.OrderedDict.iteritems</a></div><div class="ttdeci">def iteritems</div><div class="ttdef"><b>Definition:</b> <a href="gfit__helper_8py_source.html#l00990">gfit_helper.py:990</a></div></div>
<div class="ttc" id="classgfit_1_1gfit__helper_1_1OrderedDict_html_af0c5ecdb3089e567f4e39104885caa50"><div class="ttname"><a href="classgfit_1_1gfit__helper_1_1OrderedDict.html#af0c5ecdb3089e567f4e39104885caa50">gfit.gfit_helper.OrderedDict.popitem</a></div><div class="ttdeci">def popitem</div><div class="ttdef"><b>Definition:</b> <a href="gfit__helper_8py_source.html#l00944">gfit_helper.py:944</a></div></div>
<div class="ttc" id="classgfit_1_1gfit__helper_1_1OrderedDict_html_ace1e689f0925636bf3af5242f961b5e5"><div class="ttname"><a href="classgfit_1_1gfit__helper_1_1OrderedDict.html#ace1e689f0925636bf3af5242f961b5e5">gfit.gfit_helper.OrderedDict.__setitem__</a></div><div class="ttdeci">def __setitem__</div><div class="ttdef"><b>Definition:</b> <a href="gfit__helper_8py_source.html#l00897">gfit_helper.py:897</a></div></div>
<div class="ttc" id="classgfit_1_1gfit__helper_1_1GfitHelper_html_aabc436d14be83f627e053c3d87d92542"><div class="ttname"><a href="classgfit_1_1gfit__helper_1_1GfitHelper.html#aabc436d14be83f627e053c3d87d92542">gfit.gfit_helper.GfitHelper.get_stamp_center_as_int</a></div><div class="ttdeci">def get_stamp_center_as_int</div><div class="ttdef"><b>Definition:</b> <a href="gfit__helper_8py_source.html#l00170">gfit_helper.py:170</a></div></div>
<div class="ttc" id="classgfit_1_1gfit__helper_1_1OrderedDict_html_a4591d3e42b77454c554222228b976c46"><div class="ttname"><a href="classgfit_1_1gfit__helper_1_1OrderedDict.html#a4591d3e42b77454c554222228b976c46">gfit.gfit_helper.OrderedDict.viewitems</a></div><div class="ttdeci">def viewitems</div><div class="ttdef"><b>Definition:</b> <a href="gfit__helper_8py_source.html#l01110">gfit_helper.py:1110</a></div></div>
<div class="ttc" id="classgfit_1_1gfit__helper_1_1OrderedDict_html_a0279185b62017e8bebf8cef68b1caf7c"><div class="ttname"><a href="classgfit_1_1gfit__helper_1_1OrderedDict.html#a0279185b62017e8bebf8cef68b1caf7c">gfit.gfit_helper.OrderedDict.__eq__</a></div><div class="ttdeci">def __eq__</div><div class="ttdef"><b>Definition:</b> <a href="gfit__helper_8py_source.html#l01088">gfit_helper.py:1088</a></div></div>
<div class="ttc" id="classgfit_1_1gfit__helper_1_1GfitHelper_html_a97361a31219f58eb43889a4fa6d3c28d"><div class="ttname"><a href="classgfit_1_1gfit__helper_1_1GfitHelper.html#a97361a31219f58eb43889a4fa6d3c28d">gfit.gfit_helper.GfitHelper.create_from_list_dico</a></div><div class="ttdeci">def create_from_list_dico</div><div class="ttdoc">Save a dictionary to disk as a catalog file. </div><div class="ttdef"><b>Definition:</b> <a href="gfit__helper_8py_source.html#l00733">gfit_helper.py:733</a></div></div>
<div class="ttc" id="classobject_html"><div class="ttname"><a href="classobject.html">object</a></div></div>
<div class="ttc" id="classgfit_1_1gfit__helper_1_1OrderedDict_html_a3d7384596b8d689e42d00cf8dadabe4d"><div class="ttname"><a href="classgfit_1_1gfit__helper_1_1OrderedDict.html#a3d7384596b8d689e42d00cf8dadabe4d">gfit.gfit_helper.OrderedDict.copy</a></div><div class="ttdeci">def copy</div><div class="ttdef"><b>Definition:</b> <a href="gfit__helper_8py_source.html#l01073">gfit_helper.py:1073</a></div></div>
<div class="ttc" id="classgfit_1_1gfit__helper_1_1OrderedDict_html_ac0a7f5a1c9be15cf310f43a84f56c687"><div class="ttname"><a href="classgfit_1_1gfit__helper_1_1OrderedDict.html#ac0a7f5a1c9be15cf310f43a84f56c687">gfit.gfit_helper.OrderedDict.values</a></div><div class="ttdeci">def values</div><div class="ttdef"><b>Definition:</b> <a href="gfit__helper_8py_source.html#l00973">gfit_helper.py:973</a></div></div>
<div class="ttc" id="classgfit_1_1gfit__helper_1_1GfitHelper_html_a0bf08e2c5be940ca59f8185eb730f498"><div class="ttname"><a href="classgfit_1_1gfit__helper_1_1GfitHelper.html#a0bf08e2c5be940ca59f8185eb730f498">gfit.gfit_helper.GfitHelper.get_nb_objects</a></div><div class="ttdeci">def get_nb_objects</div><div class="ttdoc">Find the actual number of objects (i.e. </div><div class="ttdef"><b>Definition:</b> <a href="gfit__helper_8py_source.html#l00605">gfit_helper.py:605</a></div></div>
<div class="ttc" id="classgfit_1_1gfit__helper_1_1OrderedDict_html_a62f530c33f0bd99a104185b47e51e59a"><div class="ttname"><a href="classgfit_1_1gfit__helper_1_1OrderedDict.html#a62f530c33f0bd99a104185b47e51e59a">gfit.gfit_helper.OrderedDict.__update</a></div><div class="ttdeci">__update</div><div class="ttdef"><b>Definition:</b> <a href="gfit__helper_8py_source.html#l01026">gfit_helper.py:1026</a></div></div>
<div class="ttc" id="classgfit_1_1gfit__helper_1_1GfitHelper_html_a323fc7048c34475de8f5a3ab906fc032"><div class="ttname"><a href="classgfit_1_1gfit__helper_1_1GfitHelper.html#a323fc7048c34475de8f5a3ab906fc032">gfit.gfit_helper.GfitHelper.empty_stamp</a></div><div class="ttdeci">def empty_stamp</div><div class="ttdoc">Empty a square stamp, leaving only the border. </div><div class="ttdef"><b>Definition:</b> <a href="gfit__helper_8py_source.html#l00193">gfit_helper.py:193</a></div></div>
<div class="ttc" id="classgfit_1_1gfit__helper_1_1GfitHelper_html_a71a61f432b143dd8599a5c74c04b34e9"><div class="ttname"><a href="classgfit_1_1gfit__helper_1_1GfitHelper.html#a71a61f432b143dd8599a5c74c04b34e9">gfit.gfit_helper.GfitHelper.get_galaxy_noise_map</a></div><div class="ttdeci">def get_galaxy_noise_map</div><div class="ttdoc">Create or Read a RMS noise map, whose values are the estimated standard deviation (pixels represent s...</div><div class="ttdef"><b>Definition:</b> <a href="gfit__helper_8py_source.html#l00406">gfit_helper.py:406</a></div></div>
<div class="ttc" id="classgfit_1_1gfit__helper_1_1OrderedDict_html_a3e905cd80933ce0a8ccd29ad00fa3863"><div class="ttname"><a href="classgfit_1_1gfit__helper_1_1OrderedDict.html#a3e905cd80933ce0a8ccd29ad00fa3863">gfit.gfit_helper.OrderedDict.fromkeys</a></div><div class="ttdeci">def fromkeys</div><div class="ttdef"><b>Definition:</b> <a href="gfit__helper_8py_source.html#l01078">gfit_helper.py:1078</a></div></div>
<div class="ttc" id="classgfit_1_1gfit__helper_1_1OrderedDict_html"><div class="ttname"><a href="classgfit_1_1gfit__helper_1_1OrderedDict.html">gfit.gfit_helper.OrderedDict</a></div><div class="ttdef"><b>Definition:</b> <a href="gfit__helper_8py_source.html#l00869">gfit_helper.py:869</a></div></div>
<div class="ttc" id="classgfit_1_1gfit__helper_1_1GfitHelper_html_ac84dc2615b0336a7b645532aa9474955"><div class="ttname"><a href="classgfit_1_1gfit__helper_1_1GfitHelper.html#ac84dc2615b0336a7b645532aa9474955">gfit.gfit_helper.GfitHelper.get_image_property_dico</a></div><div class="ttdeci">def get_image_property_dico</div><div class="ttdoc">Create or Read a RMS noise map, whose values are the estimated standard deviation (pixels represent s...</div><div class="ttdef"><b>Definition:</b> <a href="gfit__helper_8py_source.html#l00442">gfit_helper.py:442</a></div></div>
<div class="ttc" id="classgfit_1_1gfit__helper_1_1GfitHelper_html_ac041b2e67b137648fe5f62b8cff00b0a"><div class="ttname"><a href="classgfit_1_1gfit__helper_1_1GfitHelper.html#ac041b2e67b137648fe5f62b8cff00b0a">gfit.gfit_helper.GfitHelper.compute_stamp_sigma_back_noise</a></div><div class="ttdeci">def compute_stamp_sigma_back_noise</div><div class="ttdoc">Get stamp background median noise evaluated from its border. </div><div class="ttdef"><b>Definition:</b> <a href="gfit__helper_8py_source.html#l00237">gfit_helper.py:237</a></div></div>
<div class="ttc" id="classgfit_1_1gfit__helper_1_1OrderedDict_html_aaeadd9b76babb973ecfe23904fef4df2"><div class="ttname"><a href="classgfit_1_1gfit__helper_1_1OrderedDict.html#aaeadd9b76babb973ecfe23904fef4df2">gfit.gfit_helper.OrderedDict.viewvalues</a></div><div class="ttdeci">def viewvalues</div><div class="ttdef"><b>Definition:</b> <a href="gfit__helper_8py_source.html#l01106">gfit_helper.py:1106</a></div></div>
<div class="ttc" id="classgfit_1_1gfit__helper_1_1OrderedDict_html_a2089ebdc14e4951c9b18181c084ccbbf"><div class="ttname"><a href="classgfit_1_1gfit__helper_1_1OrderedDict.html#a2089ebdc14e4951c9b18181c084ccbbf">gfit.gfit_helper.OrderedDict.__iter__</a></div><div class="ttdeci">def __iter__</div><div class="ttdef"><b>Definition:</b> <a href="gfit__helper_8py_source.html#l00916">gfit_helper.py:916</a></div></div>
<div class="ttc" id="classgfit_1_1gfit__helper_1_1OrderedDict_html_a0e57845ff42d0f11f06aee53646ea983"><div class="ttname"><a href="classgfit_1_1gfit__helper_1_1OrderedDict.html#a0e57845ff42d0f11f06aee53646ea983">gfit.gfit_helper.OrderedDict.keys</a></div><div class="ttdeci">def keys</div><div class="ttdef"><b>Definition:</b> <a href="gfit__helper_8py_source.html#l00969">gfit_helper.py:969</a></div></div>
<div class="ttc" id="classgfit_1_1gfit__helper_1_1GfitHelper_html_abc4cd52c49bd62f58046f00d433859d8"><div class="ttname"><a href="classgfit_1_1gfit__helper_1_1GfitHelper.html#abc4cd52c49bd62f58046f00d433859d8">gfit.gfit_helper.GfitHelper.remove_nans_from_result_dico</a></div><div class="ttdeci">def remove_nans_from_result_dico</div><div class="ttdef"><b>Definition:</b> <a href="gfit__helper_8py_source.html#l00630">gfit_helper.py:630</a></div></div>
<div class="ttc" id="classgfit_1_1gfit__helper_1_1OrderedDict_html_afc436286373ae8e108ab14b60131fceb"><div class="ttname"><a href="classgfit_1_1gfit__helper_1_1OrderedDict.html#afc436286373ae8e108ab14b60131fceb">gfit.gfit_helper.OrderedDict.__init__</a></div><div class="ttdeci">def __init__</div><div class="ttdef"><b>Definition:</b> <a href="gfit__helper_8py_source.html#l00881">gfit_helper.py:881</a></div></div>
<div class="ttc" id="classgfit_1_1gfit__helper_1_1GfitHelper_html_afe8a134a678d445a26b20301ec1b0bb8"><div class="ttname"><a href="classgfit_1_1gfit__helper_1_1GfitHelper.html#afe8a134a678d445a26b20301ec1b0bb8">gfit.gfit_helper.GfitHelper.show_config_summary</a></div><div class="ttdeci">def show_config_summary</div><div class="ttdef"><b>Definition:</b> <a href="gfit__helper_8py_source.html#l00042">gfit_helper.py:42</a></div></div>
<div class="ttc" id="classgfit_1_1gfit__helper_1_1OrderedDict_html_a19a9b545a1b9df094c3d059005f9b42d"><div class="ttname"><a href="classgfit_1_1gfit__helper_1_1OrderedDict.html#a19a9b545a1b9df094c3d059005f9b42d">gfit.gfit_helper.OrderedDict.__delitem__</a></div><div class="ttdeci">def __delitem__</div><div class="ttdef"><b>Definition:</b> <a href="gfit__helper_8py_source.html#l00907">gfit_helper.py:907</a></div></div>
<div class="ttc" id="classgfit_1_1gfit__helper_1_1OrderedDict_html_a95217e193fd4933e5d78450449b92152"><div class="ttname"><a href="classgfit_1_1gfit__helper_1_1OrderedDict.html#a95217e193fd4933e5d78450449b92152">gfit.gfit_helper.OrderedDict.__map</a></div><div class="ttdeci">__map</div><div class="ttdef"><b>Definition:</b> <a href="gfit__helper_8py_source.html#l00894">gfit_helper.py:894</a></div></div>
<div class="ttc" id="classgfit_1_1gfit__helper_1_1OrderedDict_html_ae593608ced5bc1dd0f32b906d43a9a27"><div class="ttname"><a href="classgfit_1_1gfit__helper_1_1OrderedDict.html#ae593608ced5bc1dd0f32b906d43a9a27">gfit.gfit_helper.OrderedDict.__repr__</a></div><div class="ttdeci">def __repr__</div><div class="ttdef"><b>Definition:</b> <a href="gfit__helper_8py_source.html#l01050">gfit_helper.py:1050</a></div></div>
<div class="ttc" id="classdict_html"><div class="ttname"><a href="classdict.html">dict</a></div></div>
<div class="ttc" id="classgfit_1_1gfit__helper_1_1GfitHelper_html_a2936552b2f0fabf5564dffb9c7a69d13"><div class="ttname"><a href="classgfit_1_1gfit__helper_1_1GfitHelper.html#a2936552b2f0fabf5564dffb9c7a69d13">gfit.gfit_helper.GfitHelper.compute_stamp_signal</a></div><div class="ttdeci">def compute_stamp_signal</div><div class="ttdoc">Estimate the signal in a postage stamp image. </div><div class="ttdef"><b>Definition:</b> <a href="gfit__helper_8py_source.html#l00246">gfit_helper.py:246</a></div></div>
<div class="ttc" id="classHelper_html"><div class="ttname"><a href="classHelper.html">Helper</a></div></div>
<div class="ttc" id="classgfit_1_1gfit__helper_1_1GfitHelper_html_a311c5fa2ef831c513adb8ddae037c5d5"><div class="ttname"><a href="classgfit_1_1gfit__helper_1_1GfitHelper.html#a311c5fa2ef831c513adb8ddae037c5d5">gfit.gfit_helper.GfitHelper.save_from_list_dico</a></div><div class="ttdeci">def save_from_list_dico</div><div class="ttdoc">Save a dictionary to disk as a catalog file. </div><div class="ttdef"><b>Definition:</b> <a href="gfit__helper_8py_source.html#l00645">gfit_helper.py:645</a></div></div>
<div class="ttc" id="classgfit_1_1gfit__helper_1_1GfitHelper_html"><div class="ttname"><a href="classgfit_1_1gfit__helper_1_1GfitHelper.html">gfit.gfit_helper.GfitHelper</a></div><div class="ttdoc">Convenient utility functions. </div><div class="ttdef"><b>Definition:</b> <a href="gfit__helper_8py_source.html#l00029">gfit_helper.py:29</a></div></div>
<div class="ttc" id="classgfit_1_1gfit__helper_1_1OrderedDict_html_a3ad2c4e4023c72d4cbbabf7c452981b3"><div class="ttname"><a href="classgfit_1_1gfit__helper_1_1OrderedDict.html#a3ad2c4e4023c72d4cbbabf7c452981b3">gfit.gfit_helper.OrderedDict.iterkeys</a></div><div class="ttdeci">def iterkeys</div><div class="ttdef"><b>Definition:</b> <a href="gfit__helper_8py_source.html#l00981">gfit_helper.py:981</a></div></div>
<div class="ttc" id="classgfit_1_1gfit__helper_1_1GfitHelper_html_afb420976dfaa9b597d7bbf6c9e5e1489"><div class="ttname"><a href="classgfit_1_1gfit__helper_1_1GfitHelper.html#afb420976dfaa9b597d7bbf6c9e5e1489">gfit.gfit_helper.GfitHelper.get_stamp_border</a></div><div class="ttdeci">def get_stamp_border</div><div class="ttdoc">get border from stamp </div><div class="ttdef"><b>Definition:</b> <a href="gfit__helper_8py_source.html#l00203">gfit_helper.py:203</a></div></div>
<div class="ttc" id="classgfit_1_1gfit__helper_1_1OrderedDict_html_a2895d0d8aa0ef1d9f1f69e04c63f0cb3"><div class="ttname"><a href="classgfit_1_1gfit__helper_1_1OrderedDict.html#a2895d0d8aa0ef1d9f1f69e04c63f0cb3">gfit.gfit_helper.OrderedDict.__root</a></div><div class="ttdeci">__root</div><div class="ttdef"><b>Definition:</b> <a href="gfit__helper_8py_source.html#l00892">gfit_helper.py:892</a></div></div>
<div class="ttc" id="classgfit_1_1gfit__helper_1_1OrderedDict_html_a2ae71586a218048e563d0fbe424b52da"><div class="ttname"><a href="classgfit_1_1gfit__helper_1_1OrderedDict.html#a2ae71586a218048e563d0fbe424b52da">gfit.gfit_helper.OrderedDict.pop</a></div><div class="ttdeci">def pop</div><div class="ttdef"><b>Definition:</b> <a href="gfit__helper_8py_source.html#l01030">gfit_helper.py:1030</a></div></div>
<div class="ttc" id="namespacempfg_1_1mp__helper_html"><div class="ttname"><a href="namespacempfg_1_1mp__helper.html">mp_helper</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_800a3af43fc98adf30567e3e0b36fdf2.html">gfit</a></li><li class="navelem"><a class="el" href="gfit__helper_8py.html">gfit_helper.py</a></li>
    <li class="footer">Generated on Thu Oct 29 2015 10:51:26 for gfit by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.7 </li>
  </ul>
</div>
</body>
</html>
