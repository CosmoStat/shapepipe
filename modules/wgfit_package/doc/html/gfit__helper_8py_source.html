<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>gfit: /home/marc/cea-epfl/trunk/gfit_package/gfit/gfit_helper.py Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript">
$(document).ready(initResizable);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.7.3 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">gfit&#160;<span id="projectnumber">1.0.0</span></div>
   <div id="projectbrief">Galaxy Shape Measurement</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Packages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('gfit__helper_8py.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<h1>gfit_helper.py</h1>  </div>
</div>
<div class="contents">
<a href="gfit__helper_8py.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a><a class="code" href="namespacegfit_1_1gfit__helper.html">00001</a> <span class="stringliteral">&quot;&quot;&quot;! </span>
<a name="l00002"></a>00002 <span class="stringliteral">   Various helper functions</span>
<a name="l00003"></a>00003 <span class="stringliteral">&quot;&quot;&quot;</span> 
<a name="l00004"></a>00004 
<a name="l00005"></a>00005 <span class="comment"># -- Python imports</span>
<a name="l00006"></a>00006 <span class="keyword">import</span> os, sys
<a name="l00007"></a>00007 <span class="keyword">import</span> math
<a name="l00008"></a>00008 <span class="keyword">import</span> numpy
<a name="l00009"></a>00009 <span class="keyword">import</span> scipy
<a name="l00010"></a>00010 <span class="keyword">import</span> pyfits
<a name="l00011"></a>00011 <span class="keyword">import</span> shutil
<a name="l00012"></a>00012 
<a name="l00013"></a>00013 <span class="comment"># --- Python imports</span>
<a name="l00014"></a>00014 <span class="keywordflow">try</span>:
<a name="l00015"></a>00015     <span class="keyword">from</span> thread <span class="keyword">import</span> get_ident <span class="keyword">as</span> _get_ident
<a name="l00016"></a>00016 <span class="keywordflow">except</span> ImportError:
<a name="l00017"></a>00017     <span class="keyword">from</span> dummy_thread <span class="keyword">import</span> get_ident <span class="keyword">as</span> _get_ident
<a name="l00018"></a>00018 <span class="keyword">from</span> _abcoll <span class="keyword">import</span> KeysView, ValuesView, ItemsView
<a name="l00019"></a>00019 
<a name="l00020"></a>00020 <span class="comment"># -- External import</span>
<a name="l00021"></a>00021 <span class="keyword">from</span> scatalog <span class="keyword">import</span> *                <span class="comment"># file catalog management             </span>
<a name="l00022"></a>00022 <span class="keyword">from</span> mpfg.mp_helper <span class="keyword">import</span> *          <span class="comment"># base Helper</span>
<a name="l00023"></a>00023 
<a name="l00024"></a>00024 <span class="comment"># -- Module-specific imports  </span>
<a name="l00025"></a>00025 <span class="keyword">from</span> gfit_helper <span class="keyword">import</span> *             <span class="comment"># this module helper utility functions</span>
<a name="l00026"></a>00026 <span class="keyword">from</span> gfit_version <span class="keyword">import</span> __version__  <span class="comment"># version information</span>
<a name="l00027"></a>00027 
<a name="l00028"></a>00028 <span class="comment"># -------------------------------------------------------------------------------------------------</span>
<a name="l00029"></a><a class="code" href="classgfit_1_1gfit__helper_1_1GfitHelper.html">00029</a> <span class="keyword">class </span><a class="code" href="classgfit_1_1gfit__helper_1_1GfitHelper.html" title="Convenient utility functions.">GfitHelper</a>(<a class="code" href="classHelper.html">Helper</a>):
<a name="l00030"></a>00030 
<a name="l00031"></a>00031    <span class="stringliteral">&quot;&quot;&quot;! Convenient utility functions &quot;&quot;&quot;</span>
<a name="l00032"></a>00032 
<a name="l00033"></a>00033    <span class="comment"># -----------------------------------------------------------------------------------------------</span>
<a name="l00034"></a><a class="code" href="classgfit_1_1gfit__helper_1_1GfitHelper.html#a6a277504110ba47bd9a36d3d699cab87">00034</a>    <span class="keyword">def </span><a class="code" href="classgfit_1_1gfit__helper_1_1GfitHelper.html#a6a277504110ba47bd9a36d3d699cab87" title="Get the version number of this pse code as text.">get_version</a>(self):
<a name="l00035"></a>00035       <span class="stringliteral">&quot;&quot;&quot;! </span>
<a name="l00036"></a>00036 <span class="stringliteral">          Get the version number of this pse code as text </span>
<a name="l00037"></a>00037 <span class="stringliteral">          @return version number of this pse code as text</span>
<a name="l00038"></a>00038 <span class="stringliteral">      &quot;&quot;&quot;</span>
<a name="l00039"></a>00039       <span class="keywordflow">return</span> __version__ 
<a name="l00040"></a>00040 
<a name="l00041"></a>00041    <span class="comment"># -----------------------------------------------------------------------------------------------</span>
<a name="l00042"></a><a class="code" href="classgfit_1_1gfit__helper_1_1GfitHelper.html#afe8a134a678d445a26b20301ec1b0bb8">00042</a>    <span class="keyword">def </span><a class="code" href="classgfit_1_1gfit__helper_1_1GfitHelper.html#afe8a134a678d445a26b20301ec1b0bb8">show_config_summary</a>(self, master):
<a name="l00043"></a>00043       
<a name="l00044"></a>00044       <span class="keywordflow">if</span> master.logging_enabled():
<a name="l00045"></a>00045 
<a name="l00046"></a>00046          <span class="comment"># --- gfit version</span>
<a name="l00047"></a>00047          master.logger.log_info_p(<span class="stringliteral">&quot;\n*** gfit {0} ***\n&quot;</span>.format(self.<a class="code" href="classgfit_1_1gfit__helper_1_1GfitHelper.html#a6a277504110ba47bd9a36d3d699cab87" title="Get the version number of this pse code as text.">get_version</a>()))
<a name="l00048"></a>00048 
<a name="l00049"></a>00049          <span class="comment"># --- Python modules</span>
<a name="l00050"></a>00050          master.logger.log_info_p(<span class="stringliteral">&quot;Standard Python modules:&quot;</span>)
<a name="l00051"></a>00051          master.logger.log_info_p(<span class="stringliteral">&quot;- numpy {0}\t\t{1}&quot;</span>.format(numpy.__version__, numpy.__file__))           
<a name="l00052"></a>00052          master.logger.log_info_p(<span class="stringliteral">&quot;- scipy {0}\t{1}&quot;</span>.format(scipy.__version__, scipy.__file__))           
<a name="l00053"></a>00053          master.logger.log_info_p(<span class="stringliteral">&quot;- pyfits {0}\t\t{1}&quot;</span>.format(pyfits.__version__, pyfits.__file__))     
<a name="l00054"></a>00054          <span class="keywordflow">try</span>:
<a name="l00055"></a>00055             mpl = __import__(<span class="stringliteral">&#39;matplotlib&#39;</span>, globals(), locals(), [], -1)
<a name="l00056"></a>00056             master.logger.log_info_p(<span class="stringliteral">&quot;- matplotlib {0}\t{1}&quot;</span>.format(mpl.__version__, mpl.__file__))  
<a name="l00057"></a>00057             galsim = __import__(<span class="stringliteral">&#39;galsim&#39;</span>, globals(), locals(), [], -1)
<a name="l00058"></a>00058             master.logger.log_info_p(<span class="stringliteral">&quot;- galsim {0}\t\t{1}&quot;</span>.format(galsim.version, galsim.__file__))  
<a name="l00059"></a>00059             asc = __import__(<span class="stringliteral">&#39;asciidata&#39;</span>, globals(), locals(), [], -1)
<a name="l00060"></a>00060             master.logger.log_info_p(<span class="stringliteral">&quot;- asciidata {0}\t{1}&quot;</span>.format(asc.__version__, asc.__file__))  
<a name="l00061"></a>00061          <span class="keywordflow">except</span> Exception <span class="keyword">as</span> detail:
<a name="l00062"></a>00062             master.logger.log_error_p(<span class="stringliteral">&quot;- some modules could not be found: {0}\n&quot;</span>.format(detail)) 
<a name="l00063"></a>00063 
<a name="l00064"></a>00064          master.logger.log_info_p(<span class="stringliteral">&quot;\nMPF Python modules:&quot;</span>)
<a name="l00065"></a>00065          <span class="keywordflow">try</span>:
<a name="l00066"></a>00066             mpfg = __import__(<span class="stringliteral">&#39;mpfg&#39;</span>, globals(), locals(), [], -1)
<a name="l00067"></a>00067             master.logger.log_info_p(<span class="stringliteral">&quot;- mpfg {0}\t\t{1}&quot;</span>.format(mpfg.__version__, mpfg.__file__))  
<a name="l00068"></a>00068             mpfx = __import__(<span class="stringliteral">&#39;mpfx&#39;</span>, globals(), locals(), [], -1)
<a name="l00069"></a>00069             master.logger.log_info_p(<span class="stringliteral">&quot;- mpfx {0}\t\t{1}&quot;</span>.format(mpfx.__version__, mpfx.__file__))  
<a name="l00070"></a>00070             slog = __import__(<span class="stringliteral">&#39;slogger&#39;</span>, globals(), locals(), [], -1)
<a name="l00071"></a>00071             master.logger.log_info_p(<span class="stringliteral">&quot;- slogger {0}\t\t{1}&quot;</span>.format(slog.__version__, slog.__file__))  
<a name="l00072"></a>00072             sconf = __import__(<span class="stringliteral">&#39;sconfig&#39;</span>, globals(), locals(), [], -1)
<a name="l00073"></a>00073             master.logger.log_info_p(<span class="stringliteral">&quot;- sconfig {0}\t\t{1}&quot;</span>.format(sconf.__version__, sconf.__file__))  
<a name="l00074"></a>00074             scat = __import__(<span class="stringliteral">&#39;scatalog&#39;</span>, globals(), locals(), [], -1)
<a name="l00075"></a>00075             master.logger.log_info_p(<span class="stringliteral">&quot;- scatalog {0}\t{1}&quot;</span>.format(scat.__version__, scat.__file__)) 
<a name="l00076"></a>00076          <span class="keywordflow">except</span> Exception <span class="keyword">as</span> detail:
<a name="l00077"></a>00077             master.logger.log_error_p(<span class="stringliteral">&quot;- some modules could not be found: {0}\n&quot;</span>.format(detail)) 
<a name="l00078"></a>00078 
<a name="l00079"></a>00079          master.logger.log_info_p(<span class="stringliteral">&quot;\nFitting modules:&quot;</span>)
<a name="l00080"></a>00080          <span class="keywordflow">try</span>:
<a name="l00081"></a>00081             multi = __import__(<span class="stringliteral">&#39;multifit&#39;</span>, globals(), locals(), [], -1)
<a name="l00082"></a>00082             master.logger.log_info_p(<span class="stringliteral">&quot;- multifit {0}\t{1}&quot;</span>.format(multi.__version__, multi.__file__))    
<a name="l00083"></a>00083             scdm = __import__(<span class="stringliteral">&#39;scdm&#39;</span>, globals(), locals(), [], -1)
<a name="l00084"></a>00084             master.logger.log_info_p(<span class="stringliteral">&quot;- scdm {0}\t\t{1}&quot;</span>.format(scdm.__version__, scdm.__file__))
<a name="l00085"></a>00085             
<a name="l00086"></a>00086          <span class="keywordflow">except</span> Exception <span class="keyword">as</span> detail:
<a name="l00087"></a>00087             master.logger.log_error_p(<span class="stringliteral">&quot;- some modules could not be imported: {0}\n&quot;</span>.format(detail)) 
<a name="l00088"></a>00088 
<a name="l00089"></a>00089 <span class="comment">#         try:</span>
<a name="l00090"></a>00090 <span class="comment">#            sklearn = __import__(&#39;sklearn&#39;, globals(), locals(), [], -1)</span>
<a name="l00091"></a>00091 <span class="comment">#            master.logger.log_info_p(&quot;- scikit learn {0}\n&quot;.format(sklearn.__version__))  </span>
<a name="l00092"></a>00092 <span class="comment">#         except:</span>
<a name="l00093"></a>00093 <span class="comment">#            pass</span>
<a name="l00094"></a>00094 
<a name="l00095"></a>00095          <span class="comment"># --- configuration</span>
<a name="l00096"></a>00096          gfit_config_filename = master.config_filename
<a name="l00097"></a>00097          gfit_config_dir = master.config_dir
<a name="l00098"></a>00098          gfit_config_path = os.path.join(gfit_config_dir, gfit_config_filename)
<a name="l00099"></a>00099 
<a name="l00100"></a>00100          model_config_path   = master.config.get_as_string(<span class="stringliteral">&quot;MODEL_CONFIG_PATH&quot;</span>, <span class="stringliteral">&quot;MULTIFIT&quot;</span>)
<a name="l00101"></a>00101          method_config_path  = master.config.get_as_string(<span class="stringliteral">&quot;METHOD_CONFIG_PATH&quot;</span>, <span class="stringliteral">&quot;MULTIFIT&quot;</span>)
<a name="l00102"></a>00102          fitting_config_path = master.config.get_as_string(<span class="stringliteral">&quot;FITTING_CONFIG_PATH&quot;</span>, <span class="stringliteral">&quot;MULTIFIT&quot;</span>)
<a name="l00103"></a>00103 
<a name="l00104"></a>00104          master.logger.log_info_p(<span class="stringliteral">&quot;\nBase gfit configuration:&quot;</span>)
<a name="l00105"></a>00105          master.logger.log_info_p(<span class="stringliteral">&quot;- Gfit main config : {0}&quot;</span>.format(gfit_config_path))
<a name="l00106"></a>00106          master.logger.log_info_p(<span class="stringliteral">&quot;- Fitting methods  : {0}&quot;</span>.format(method_config_path))
<a name="l00107"></a>00107          master.logger.log_info_p(<span class="stringliteral">&quot;- Galaxy models    : {0}&quot;</span>.format(model_config_path))
<a name="l00108"></a>00108          master.logger.log_info_p(<span class="stringliteral">&quot;- Custom fitting   : {0}&quot;</span>.format(fitting_config_path))
<a name="l00109"></a>00109 
<a name="l00110"></a>00110          <span class="comment"># --- Multifit</span>
<a name="l00111"></a>00111          mfit_model_module_path  = master.config.get_as_string(<span class="stringliteral">&quot;MODEL_MODULE_PATH&quot;</span>, <span class="stringliteral">&quot;MULTIFIT&quot;</span>)   
<a name="l00112"></a>00112          mfit_method_module_path = master.config.get_as_string(<span class="stringliteral">&quot;METHOD_MODULE_PATH&quot;</span>, <span class="stringliteral">&quot;MULTIFIT&quot;</span>)   
<a name="l00113"></a>00113 
<a name="l00114"></a>00114          master.logger.log_info_p(<span class="stringliteral">&quot;\nMultifit configuration directories:&quot;</span>)
<a name="l00115"></a>00115          master.logger.log_info_p(<span class="stringliteral">&quot;- Models : {0}&quot;</span>.format(mfit_model_module_path))
<a name="l00116"></a>00116          master.logger.log_info_p(<span class="stringliteral">&quot;- Methods: {0}\n&quot;</span>.format(mfit_method_module_path))
<a name="l00117"></a>00117 
<a name="l00118"></a>00118          <span class="comment"># --- Selected minimizer &amp; galaxy model</span>
<a name="l00119"></a>00119          galaxy_model = master.config.get_as_string(<span class="stringliteral">&quot;GALAXY_MODEL_NAME&quot;</span>, <span class="stringliteral">&quot;GALAXY_FITTING&quot;</span>)
<a name="l00120"></a>00120          fitting_method = master.config.get_as_string(<span class="stringliteral">&quot;GALAXY_FITTING_METHOD&quot;</span>, <span class="stringliteral">&quot;GALAXY_FITTING&quot;</span>)
<a name="l00121"></a>00121          master.logger.log_info_p(<span class="stringliteral">&quot;Selected galaxy model : {0}&quot;</span>.format(galaxy_model))
<a name="l00122"></a>00122          master.logger.log_info_p(<span class="stringliteral">&quot;Selected minimizer    : {0}&quot;</span>.format(fitting_method))
<a name="l00123"></a>00123 
<a name="l00124"></a>00124          <span class="comment"># --- Directories</span>
<a name="l00125"></a>00125          <span class="comment">#master.logger.log_info_p(&quot;Base input directory   : {0}&quot;.format(master.base_input_dir))</span>
<a name="l00126"></a>00126          master.logger.log_info_p(<span class="stringliteral">&quot;\nBase output directory: {0}&quot;</span>.format(master.base_output_dir))
<a name="l00127"></a>00127          master.logger.log_info_p(<span class="stringliteral">&quot;- Run output directory   : {0}&quot;</span>.format(master.run_output_dir))
<a name="l00128"></a>00128          master.logger.log_info_p(<span class="stringliteral">&quot;- log output directory   : {0}&quot;</span>.format(master.log_output_dir))
<a name="l00129"></a>00129          master.logger.log_info_p(<span class="stringliteral">&quot;- plot output directory  : {0}&quot;</span>.format(master.plot_output_dir))
<a name="l00130"></a>00130          master.logger.log_info_p(<span class="stringliteral">&quot;- stats output directory : {0}&quot;</span>.format(master.stat_output_dir))
<a name="l00131"></a>00131          master.logger.log_info_p(<span class="stringliteral">&quot;- error output directory : {0}\n&quot;</span>.format(master.error_output_dir))
<a name="l00132"></a>00132 
<a name="l00133"></a>00133          <span class="comment"># --- Datasets   </span>
<a name="l00134"></a>00134          <span class="keywordflow">try</span>:
<a name="l00135"></a>00135             src_dataset_dir = master.config.get_as_string(<span class="stringliteral">&quot;BASE_DIR&quot;</span>, <span class="stringliteral">&quot;PRIMARY_DATASET&quot;</span>)
<a name="l00136"></a>00136             gal_se_dataset_dir  = master.config.get_as_string(<span class="stringliteral">&quot;BASE_DIR&quot;</span>, 
<a name="l00137"></a>00137                                                               <span class="stringliteral">&quot;SEXTRACTOR_DATASET_GALAXY&quot;</span>)
<a name="l00138"></a>00138             star_se_dataset_dir = master.config.get_as_string(<span class="stringliteral">&quot;BASE_DIR&quot;</span>, 
<a name="l00139"></a>00139                                                               <span class="stringliteral">&quot;SEXTRACTOR_DATASET_PSF&quot;</span>)
<a name="l00140"></a>00140             psf_dataset_dir  = master.config.get_as_string(<span class="stringliteral">&quot;BASE_DIR&quot;</span>, <span class="stringliteral">&quot;PSF_DATASET&quot;</span>)
<a name="l00141"></a>00141 
<a name="l00142"></a>00142             master.logger.log_info_p(<span class="stringliteral">&quot;Primary dataset           : {0}&quot;</span>.format(src_dataset_dir))
<a name="l00143"></a>00143             master.logger.log_info_p(<span class="stringliteral">&quot;SExtractor galaxy dataset : {0}&quot;</span>.format(gal_se_dataset_dir))
<a name="l00144"></a>00144             master.logger.log_info_p(<span class="stringliteral">&quot;SExtractor psf dataset    : {0}&quot;</span>.format(star_se_dataset_dir))
<a name="l00145"></a>00145             master.logger.log_info_p(<span class="stringliteral">&quot;PSF dataset               : {0}\n&quot;</span>.format(psf_dataset_dir))
<a name="l00146"></a>00146          <span class="keywordflow">except</span> Exception <span class="keyword">as</span> detail:
<a name="l00147"></a>00147             master.logger.log_error_p(<span class="stringliteral">&quot;Error while getting dataset information: {0}\n&quot;</span>.format(detail)) 
<a name="l00148"></a>00148    
<a name="l00149"></a>00149    <span class="comment"># -----------------------------------------------------------------------------------------------</span>
<a name="l00150"></a><a class="code" href="classgfit_1_1gfit__helper_1_1GfitHelper.html#abd22ac745e2d3162493a5b232dcc3243">00150</a>    <span class="keyword">def </span><a class="code" href="classgfit_1_1gfit__helper_1_1GfitHelper.html#abd22ac745e2d3162493a5b232dcc3243">read_fits_image</a>(self, image_filepath, hdu=0, float_size=&quot;float32&quot;):
<a name="l00151"></a>00151 
<a name="l00152"></a>00152       <span class="comment"># --- Open catalog </span>
<a name="l00153"></a>00153       <span class="keywordflow">if</span> <span class="keywordflow">not</span> os.path.exists(image_filepath):
<a name="l00154"></a>00154          <span class="keywordflow">print</span> <span class="stringliteral">&#39;Error: catalog %s not found&#39;</span> %(catalog_filepath)
<a name="l00155"></a>00155          <span class="keywordflow">return</span> <span class="keyword">False</span>, <span class="keywordtype">None</span>, <span class="keywordtype">None</span>, {}
<a name="l00156"></a>00156 
<a name="l00157"></a>00157       fits_image = pyfits.open(image_filepath, mode=<span class="stringliteral">&#39;readonly&#39;</span>, memmap=<span class="keyword">True</span>)
<a name="l00158"></a>00158       image_data = fits_image[hdu].data.astype(float_size)
<a name="l00159"></a>00159       image_header = fits_image[hdu].header
<a name="l00160"></a>00160       fits_image.close()
<a name="l00161"></a>00161 
<a name="l00162"></a>00162       <span class="keywordflow">return</span> image_data, image_header
<a name="l00163"></a>00163 
<a name="l00164"></a>00164 
<a name="l00165"></a>00165 
<a name="l00166"></a>00166    <span class="comment"># -----------------------------------------------------------------------------------------------</span>
<a name="l00167"></a><a class="code" href="classgfit_1_1gfit__helper_1_1GfitHelper.html#aef52443e9363e436b4b359b5208c3e17">00167</a>    <span class="keyword">def </span><a class="code" href="classgfit_1_1gfit__helper_1_1GfitHelper.html#aef52443e9363e436b4b359b5208c3e17">get_stamp_center</a>(self, stamp_size):
<a name="l00168"></a>00168       <span class="stringliteral">&quot;&quot;&quot; ! @return the postage stamp geometrical center pixel no, indexed from zero &quot;&quot;&quot;</span>      
<a name="l00169"></a>00169       
<a name="l00170"></a>00170       <span class="keywordflow">if</span> stamp_size % 2 == 0:
<a name="l00171"></a>00171          <span class="comment"># Even size</span>
<a name="l00172"></a>00172          center_pixel = int(stamp_size / 2.0 - 1.0)   <span class="comment"># e.g. 48x48 -&gt; 23x23</span>
<a name="l00173"></a>00173       <span class="keywordflow">else</span>:
<a name="l00174"></a>00174          <span class="comment"># Odd size</span>
<a name="l00175"></a>00175          center_pixel = int(stamp_size/ 2.0)          <span class="comment"># e.g. 47x47 -&gt; 23x23</span>
<a name="l00176"></a>00176 
<a name="l00177"></a>00177       <span class="keywordflow">return</span> center_pixel
<a name="l00178"></a>00178 
<a name="l00179"></a>00179    <span class="comment"># -----------------------------------------------------------------------------------------------</span>
<a name="l00180"></a><a class="code" href="classgfit_1_1gfit__helper_1_1GfitHelper.html#a3393f5fa510a5b0bdbf342664ddb47fe">00180</a>    <span class="keyword">def </span><a class="code" href="classgfit_1_1gfit__helper_1_1GfitHelper.html#a3393f5fa510a5b0bdbf342664ddb47fe" title="Cut a postage stamp of a given size around a given centroid relative to the image.">cut_stamp_around_centroid</a>(self, stamp, stamp_size, (row, col)):
<a name="l00181"></a>00181       <span class="stringliteral">&quot;&quot;&quot;!  Cut a postage stamp of a given size around a given centroid relative to the image &quot;&quot;&quot;</span>
<a name="l00182"></a>00182       
<a name="l00183"></a>00183       half_stamp_size = stamp_size / 2.0
<a name="l00184"></a>00184       <span class="keywordflow">if</span> stamp_size % 2 == 0:     
<a name="l00185"></a>00185          <span class="comment"># --- Even stamp size</span>
<a name="l00186"></a>00186          <span class="comment">#print &quot;EVEN stamp size:&quot;, stamp_size, &quot;centroid:&quot;, (row, col), half_stamp_size, row-half_stamp_size</span>
<a name="l00187"></a>00187          <span class="keywordflow">return</span> stamp[(int)(row-half_stamp_size):int(row+half_stamp_size), 
<a name="l00188"></a>00188                       int(col-half_stamp_size):int(col+half_stamp_size)]
<a name="l00189"></a>00189       <span class="keywordflow">else</span>:
<a name="l00190"></a>00190          <span class="comment"># --- Odd stamp size</span>
<a name="l00191"></a>00191          <span class="comment">#print &quot;ODD stamp size:&quot;, stamp_size, &quot;centroid:&quot;, (row, col), half_stamp_size, row-half_stamp_size+0.5</span>
<a name="l00192"></a>00192          <span class="keywordflow">return</span> stamp[int(row-half_stamp_size+0.5):int(row+half_stamp_size+0.5), 
<a name="l00193"></a>00193                       int(col-half_stamp_size+0.5):int(col+half_stamp_size+0.5)]
<a name="l00194"></a>00194 
<a name="l00195"></a>00195 
<a name="l00196"></a>00196    <span class="comment"># -----------------------------------------------------------------------------------------------</span>
<a name="l00197"></a><a class="code" href="classgfit_1_1gfit__helper_1_1GfitHelper.html#a323fc7048c34475de8f5a3ab906fc032">00197</a>    <span class="keyword">def </span><a class="code" href="classgfit_1_1gfit__helper_1_1GfitHelper.html#a323fc7048c34475de8f5a3ab906fc032" title="Empy a square stamp, leaving only the border.">empty_stamp</a>(self, stamp, border_size=1):
<a name="l00198"></a>00198       <span class="stringliteral">&quot;&quot;&quot;! </span>
<a name="l00199"></a>00199 <span class="stringliteral">         Empy a square stamp, leaving only the border. The original stamp is untouched</span>
<a name="l00200"></a>00200 <span class="stringliteral">      &quot;&quot;&quot;</span>
<a name="l00201"></a>00201 
<a name="l00202"></a>00202       stamp = stamp.copy()
<a name="l00203"></a>00203       stamp[border_size:stamp.shape[0]-border_size, border_size:stamp.shape[0]-border_size] = 0.0
<a name="l00204"></a>00204       <span class="keywordflow">return</span> stamp
<a name="l00205"></a>00205 
<a name="l00206"></a>00206    <span class="comment"># -----------------------------------------------------------------------------------------------</span>
<a name="l00207"></a><a class="code" href="classgfit_1_1gfit__helper_1_1GfitHelper.html#afb420976dfaa9b597d7bbf6c9e5e1489">00207</a>    <span class="keyword">def </span><a class="code" href="classgfit_1_1gfit__helper_1_1GfitHelper.html#afb420976dfaa9b597d7bbf6c9e5e1489" title="Extract border from stamp.">get_stamp_border</a>(self, stamp):
<a name="l00208"></a>00208 
<a name="l00209"></a>00209       <span class="stringliteral">&quot;&quot;&quot;!</span>
<a name="l00210"></a>00210 <span class="stringliteral">         Extract border from stamp</span>
<a name="l00211"></a>00211 <span class="stringliteral">      &quot;&quot;&quot;</span>
<a name="l00212"></a>00212 
<a name="l00213"></a>00213       nn, mm = stamp.shape
<a name="l00214"></a>00214       a1 = stamp[0,:]
<a name="l00215"></a>00215       a2 = stamp[nn-1,:]
<a name="l00216"></a>00216       a3 = stamp[1:nn-1,0]
<a name="l00217"></a>00217       a4 = stamp[1:nn-1,mm-1]
<a name="l00218"></a>00218       border = numpy.concatenate((a1,a2))
<a name="l00219"></a>00219       border = numpy.concatenate((border,a3))
<a name="l00220"></a>00220       border = numpy.concatenate((border,a4))
<a name="l00221"></a>00221 
<a name="l00222"></a>00222       <span class="keywordflow">return</span> border
<a name="l00223"></a>00223 
<a name="l00224"></a>00224 <span class="comment">#   # -----------------------------------------------------------------------------------------------</span>
<a name="l00225"></a>00225 <span class="comment">#   def get_stamp_border(self, stamp, border_size=1):</span>
<a name="l00226"></a>00226 <span class="comment">#      &quot;&quot;&quot;!</span>
<a name="l00227"></a>00227 <span class="comment">#         Empy a square stamp, leaving only the border</span>
<a name="l00228"></a>00228 <span class="comment">#      &quot;&quot;&quot;</span>
<a name="l00229"></a>00229 <span class="comment">#      e_stamp = self.empty_stamp(stamp, border_size)</span>
<a name="l00230"></a>00230 <span class="comment">#      return numpy.extract(numpy.not_equal(e_stamp, 0.0), e_stamp)</span>
<a name="l00231"></a>00231 
<a name="l00232"></a>00232    <span class="comment"># -----------------------------------------------------------------------------------------------</span>
<a name="l00233"></a><a class="code" href="classgfit_1_1gfit__helper_1_1GfitHelper.html#ac041b2e67b137648fe5f62b8cff00b0a">00233</a>    <span class="keyword">def </span><a class="code" href="classgfit_1_1gfit__helper_1_1GfitHelper.html#ac041b2e67b137648fe5f62b8cff00b0a" title="Get stamp background median noise evaluated from its border.">compute_stamp_sigma_back_noise</a>(self, stamp):
<a name="l00234"></a>00234       <span class="stringliteral">&quot;&quot;&quot;!</span>
<a name="l00235"></a>00235 <span class="stringliteral">         Get stamp background median noise evaluated from its border</span>
<a name="l00236"></a>00236 <span class="stringliteral">      &quot;&quot;&quot;</span>
<a name="l00237"></a>00237       border = self.<a class="code" href="classgfit_1_1gfit__helper_1_1GfitHelper.html#afb420976dfaa9b597d7bbf6c9e5e1489" title="Extract border from stamp.">get_stamp_border</a>(stamp)
<a name="l00238"></a>00238       <span class="keywordflow">return</span> math.sqrt(numpy.mean(border**2))
<a name="l00239"></a>00239 <span class="comment">#      return (numpy.sum((stamp_border - numpy.median(stamp_border.flat))**2) / len(stamp_border.flat))**0.5</span>
<a name="l00240"></a>00240 
<a name="l00241"></a>00241    <span class="comment"># -----------------------------------------------------------------------------------------------</span>
<a name="l00242"></a><a class="code" href="classgfit_1_1gfit__helper_1_1GfitHelper.html#a63a8b369f66b6719fc79b55d2d8561ab">00242</a>    <span class="keyword">def </span><a class="code" href="classgfit_1_1gfit__helper_1_1GfitHelper.html#a63a8b369f66b6719fc79b55d2d8561ab" title="Compute the SNR of a postage stamp image.">compute_stamp_SNR</a>(self, stamp):
<a name="l00243"></a>00243       <span class="stringliteral">&quot;&quot;&quot;! Compute the SNR of a postage stamp image &quot;&quot;&quot;</span>
<a name="l00244"></a>00244       <span class="keywordflow">return</span> math.sqrt(numpy.sum(stamp**2)) / scipy.std(stamp)
<a name="l00245"></a>00245 
<a name="l00246"></a>00246    <span class="comment"># -----------------------------------------------------------------------------------------------</span>
<a name="l00247"></a><a class="code" href="classgfit_1_1gfit__helper_1_1GfitHelper.html#a2936552b2f0fabf5564dffb9c7a69d13">00247</a>    <span class="keyword">def </span><a class="code" href="classgfit_1_1gfit__helper_1_1GfitHelper.html#a2936552b2f0fabf5564dffb9c7a69d13" title="Estimate the signal in a postage stamp image.">compute_stamp_signal</a>(self, stamp):
<a name="l00248"></a>00248       <span class="stringliteral">&quot;&quot;&quot;! Estimate the signal in a postage stamp image &quot;&quot;&quot;</span>
<a name="l00249"></a>00249       <span class="keywordflow">return</span> numpy.sum(stamp**2) / numpy.sum(stamp)
<a name="l00250"></a>00250 
<a name="l00251"></a>00251    <span class="comment"># -----------------------------------------------------------------------------------------------</span>
<a name="l00252"></a><a class="code" href="classgfit_1_1gfit__helper_1_1GfitHelper.html#a132c7cd180c57bff5a689f39a7b0b8f4">00252</a>    <span class="keyword">def </span><a class="code" href="classgfit_1_1gfit__helper_1_1GfitHelper.html#a132c7cd180c57bff5a689f39a7b0b8f4" title="Estimate the noise in a postage stamp image.">compute_stamp_noise</a>(self, stamp):
<a name="l00253"></a>00253       <span class="stringliteral">&quot;&quot;&quot;! Estimate the noise in a postage stamp image &quot;&quot;&quot;</span>
<a name="l00254"></a>00254       <span class="keywordflow">return</span> scipy.std(stamp) * math.sqrt(numpy.sum(stamp**2)) / numpy.sum(stamp)
<a name="l00255"></a>00255 
<a name="l00256"></a>00256    <span class="comment"># -----------------------------------------------------------------------------------------------</span>
<a name="l00257"></a><a class="code" href="classgfit_1_1gfit__helper_1_1GfitHelper.html#abbade51cb5e31e38165f503a60c37e9d">00257</a>    <span class="keyword">def </span><a class="code" href="classgfit_1_1gfit__helper_1_1GfitHelper.html#abbade51cb5e31e38165f503a60c37e9d" title="Get stamp median sky backround evaluated from the stamp border.">compute_stamp_sky_background</a>(self, stamp):
<a name="l00258"></a>00258       <span class="stringliteral">&quot;&quot;&quot;!</span>
<a name="l00259"></a>00259 <span class="stringliteral">         Get stamp median sky backround evaluated from the stamp border</span>
<a name="l00260"></a>00260 <span class="stringliteral">      &quot;&quot;&quot;</span>   
<a name="l00261"></a>00261 
<a name="l00262"></a>00262       <span class="comment">#return numpy.median(get_stamp_border(stamp).flat)</span>
<a name="l00263"></a>00263       <span class="keywordflow">return</span> numpy.mean(numpy.ravel(self.<a class="code" href="classgfit_1_1gfit__helper_1_1GfitHelper.html#afb420976dfaa9b597d7bbf6c9e5e1489" title="Extract border from stamp.">get_stamp_border</a>(stamp)))
<a name="l00264"></a>00264 
<a name="l00265"></a>00265 
<a name="l00266"></a><a class="code" href="classgfit_1_1gfit__helper_1_1GfitHelper.html#ae1f07f2a4aef9aded36cd47483089ae5">00266</a>    <span class="keyword">def </span><a class="code" href="classgfit_1_1gfit__helper_1_1GfitHelper.html#ae1f07f2a4aef9aded36cd47483089ae5">estimate_sigma_noise</a>(self, image):
<a name="l00267"></a>00267       <span class="stringliteral">&quot;&quot;&quot;</span>
<a name="l00268"></a>00268 <span class="stringliteral">      Estimate noise sigma from image border </span>
<a name="l00269"></a>00269 <span class="stringliteral">      &quot;&quot;&quot;</span>
<a name="l00270"></a>00270       nn, mm = image.shape
<a name="l00271"></a>00271       a1 = image[0,:]
<a name="l00272"></a>00272       a2 = image[nn-1,:]
<a name="l00273"></a>00273       a3 = image[1:nn-1,0]
<a name="l00274"></a>00274       a4 = image[1:nn-1,mm-1]
<a name="l00275"></a>00275       a1 = np.concatenate((a1,a2))
<a name="l00276"></a>00276       a1 = np.concatenate((a1,a3))
<a name="l00277"></a>00277       a1 = np.concatenate((a1,a4))
<a name="l00278"></a>00278       a4 = (a1**2).mean()
<a name="l00279"></a>00279       <span class="keywordflow">return</span> math.sqrt(a4)
<a name="l00280"></a>00280 
<a name="l00281"></a>00281 
<a name="l00282"></a>00282 
<a name="l00283"></a>00283 <span class="comment">#   # -----------------------------------------------------------------------------------------------</span>
<a name="l00284"></a>00284 <span class="comment">#   def extract_stamp_around_centroid_even(self, xc, yc, half, image):</span>
<a name="l00285"></a>00285 <span class="comment">#      &quot;&quot;&quot;! </span>
<a name="l00286"></a>00286 <span class="comment">#         Cut out a square stamp around the specified centroid (@c xc, @c yc).</span>
<a name="l00287"></a>00287 <span class="comment">#         @param xc x coordinate of object centroid in postage stamp </span>
<a name="l00288"></a>00288 <span class="comment">#         @param yc y coordinate of object centroid in postage stamp</span>
<a name="l00289"></a>00289 <span class="comment">#         @param half half of the postage stamp size (of a side)</span>
<a name="l00290"></a>00290 <span class="comment">#         @param image the field image from where the postage stamp has to be cut out</span>
<a name="l00291"></a>00291 
<a name="l00292"></a>00292 <span class="comment">#         @note stamp size is supposed to be a even number of pixels.</span>
<a name="l00293"></a>00293 <span class="comment">#      &quot;&quot;&quot;</span>
<a name="l00294"></a>00294 <span class="comment">#      return image[xc-half+1:xc+half+1, yc-half+1:yc+half+1]</span>
<a name="l00295"></a>00295 
<a name="l00296"></a>00296 <span class="comment">#   # -----------------------------------------------------------------------------------------------</span>
<a name="l00297"></a>00297 <span class="comment">#   def extract_stamp_around_centroid_odd(self, xc, yc, half, image):</span>
<a name="l00298"></a>00298 <span class="comment">#      &quot;&quot;&quot;! </span>
<a name="l00299"></a>00299 <span class="comment">#         Cut out a square stamp around the specified centroid (@c xc, @c yc).</span>
<a name="l00300"></a>00300 <span class="comment">#         @param xc x coordinate of object centroid in postage stamp </span>
<a name="l00301"></a>00301 <span class="comment">#         @param yc y coordinate of object centroid in postage stamp</span>
<a name="l00302"></a>00302 <span class="comment">#         @param half half of the postage stamp size (of a side)</span>
<a name="l00303"></a>00303 <span class="comment">#         @param image the field image from where the postage stamp has to be cut out</span>
<a name="l00304"></a>00304 
<a name="l00305"></a>00305 <span class="comment">#         @note stamp size is supposed to be a even number of pixels.</span>
<a name="l00306"></a>00306 <span class="comment">#      &quot;&quot;&quot;</span>
<a name="l00307"></a>00307 <span class="comment">#      return image[xc-half+1:xc+half+1, yc-half+1:yc+half+1]</span>
<a name="l00308"></a>00308 
<a name="l00309"></a>00309 
<a name="l00310"></a>00310 <span class="comment">#    # -----------------------------------------------------------------------------------------------</span>
<a name="l00311"></a>00311 <span class="comment">#    def extract_stamps(self, image_data, nb_stamps, stamp_size, worker.result_output_dir, subdir):  </span>
<a name="l00312"></a>00312 
<a name="l00313"></a>00313 <span class="comment">#   def _extract_stamps(self, image_filepath, img_no, epoch, image_file_type, </span>
<a name="l00314"></a>00314 <span class="comment">#                             stamp_size, output_dir, float_type=32, center_star=False):</span>
<a name="l00315"></a>00315 <span class="comment">#      </span>
<a name="l00316"></a>00316 <span class="comment">#      image_data = pyfits.getdata(image_filepath).astype(float_type)</span>
<a name="l00317"></a>00317 <span class="comment">#      (image_width, image_height) = image_data.shape</span>
<a name="l00318"></a>00318 <span class="comment">#      file_main, file_ext = os.path.splitext(image_file_type) </span>
<a name="l00319"></a>00319 <span class="comment">#      stamp_filename_pattern = &quot;{0}_stamp_{1:03d}-{2:1d}_{3}_{4}.fits&quot;</span>
<a name="l00320"></a>00320 <span class="comment">#      ref_x_pixel = ref_y_pixel = (stamp_size-1)/2.0</span>
<a name="l00321"></a>00321 <span class="comment"># </span>
<a name="l00322"></a>00322 <span class="comment">#      for x in xrange(0, image_width, stamp_size):</span>
<a name="l00323"></a>00323 <span class="comment">#         for y in xrange(0, image_height, stamp_size):</span>
<a name="l00324"></a>00324 <span class="comment">#            stamp = image_data[y:y+stamp_size, x:x+stamp_size].astype(float_type) # (row, col) np.</span>
<a name="l00325"></a>00325 <span class="comment">#            if center_star:</span>
<a name="l00326"></a>00326 <span class="comment">#               (yc, xc) = scipy.ndimage.center_of_mass(stamp)</span>
<a name="l00327"></a>00327 <span class="comment">#               corr = (ref_y_pixel - yc, ref_x_pixel - xc)</span>
<a name="l00328"></a>00328 
<a name="l00329"></a>00329 <span class="comment">#               # TEMP </span>
<a name="l00330"></a>00330 <span class="comment">#               corr = (ref_y_pixel - yc, ref_x_pixel - xc)</span>
<a name="l00331"></a>00331 
<a name="l00332"></a>00332 <span class="comment">#               stamp = scipy.ndimage.interpolation.shift(stamp, corr)</span>
<a name="l00333"></a>00333 <span class="comment">#               (nyc, nxc) = scipy.ndimage.center_of_mass(stamp)</span>
<a name="l00334"></a>00334 <span class="comment">#               #print (x,y), (ref_x_pixel, ref_y_pixel), (xc, yc), &quot;=&gt;&quot;, (nxc, nyc), &quot;corr:&quot;, corr</span>
<a name="l00335"></a>00335 
<a name="l00336"></a>00336 <span class="comment">#            stamp_filename = stamp_filename_pattern.format(file_main, img_no, epoch, x, y)</span>
<a name="l00337"></a>00337 <span class="comment">#            self.write_as_fits(stamp, os.path.join(output_dir, stamp_filename))</span>
<a name="l00338"></a>00338 
<a name="l00339"></a>00339    <span class="comment"># -----------------------------------------------------------------------------------------------</span>
<a name="l00340"></a><a class="code" href="classgfit_1_1gfit__helper_1_1GfitHelper.html#ad94ca953dd859288a6cb29642825e100">00340</a>    <span class="keyword">def </span><a class="code" href="classgfit_1_1gfit__helper_1_1GfitHelper.html#ad94ca953dd859288a6cb29642825e100" title="Write a two-dimensional data numpy array as a .fits file to some given path.">write_as_fits</a>(self, data, output_filepath, header=None):
<a name="l00341"></a>00341       <span class="stringliteral">&quot;&quot;&quot;! </span>
<a name="l00342"></a>00342 <span class="stringliteral">         Write a two-dimensional data numpy array as a .fits file to some given path</span>
<a name="l00343"></a>00343 <span class="stringliteral">         @param data data to write</span>
<a name="l00344"></a>00344 <span class="stringliteral">         @param output_filepath full path of the -FITS file</span>
<a name="l00345"></a>00345 <span class="stringliteral">         @param header optional FITS header data </span>
<a name="l00346"></a>00346 <span class="stringliteral">      &quot;&quot;&quot;</span>
<a name="l00347"></a>00347 
<a name="l00348"></a>00348       <span class="keywordflow">if</span> os.path.exists(output_filepath):
<a name="l00349"></a>00349          os.remove(output_filepath)
<a name="l00350"></a>00350 
<a name="l00351"></a>00351       <span class="keywordflow">if</span> data <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span> <span class="keywordflow">and</span> type(data) == numpy.ndarray:
<a name="l00352"></a>00352          pyfits.writeto(output_filepath, data, header=header) 
<a name="l00353"></a>00353 
<a name="l00354"></a>00354    <span class="comment"># -----------------------------------------------------------------------------------------------</span>
<a name="l00355"></a>00355    <span class="keyword">def </span>_plot_stamps(self, plotter, image_filepath, img_no, epoch, 
<a name="l00356"></a>00356                                    image_file_type, stamp_size, output_dir):
<a name="l00357"></a>00357       
<a name="l00358"></a>00358       image_data = pyfits.getdata(image_filepath).astype(<span class="stringliteral">&quot;float32&quot;</span>)
<a name="l00359"></a>00359       (image_width, image_height) = image_data.shape
<a name="l00360"></a>00360       file_main, file_ext = os.path.splitext(image_file_type) 
<a name="l00361"></a>00361       stamp_filename_pattern = <span class="stringliteral">&quot;{0}_stamp_{1:03d}-{2:1d}_{3}_{4}.png&quot;</span>
<a name="l00362"></a>00362       stamp_filename_pattern_3D = <span class="stringliteral">&quot;{0}_stamp_3D_{1:03d}-{2:1d}_{3}_{4}.png&quot;</span>
<a name="l00363"></a>00363       plot_filename_pattern = <span class="stringliteral">&quot;{0} PSF {1:03d}-{2:1d} at {3}_{4} (log scale)&quot;</span>
<a name="l00364"></a>00364       plot_filename_pattern_3D = <span class="stringliteral">&quot;{0} PSF 3D {1:03d}-{2:1d} at {3}_{4} (log scale)&quot;</span>
<a name="l00365"></a>00365       <span class="keywordflow">for</span> x <span class="keywordflow">in</span> xrange(0, image_width, stamp_size):
<a name="l00366"></a>00366          <span class="keywordflow">for</span> y <span class="keywordflow">in</span> xrange(0, image_height, stamp_size):
<a name="l00367"></a>00367             stamp = image_data[y:y+stamp_size, x:x+stamp_size] <span class="comment"># (row, col) numpy format</span>
<a name="l00368"></a>00368             min_pix_value = numpy.min(stamp)
<a name="l00369"></a>00369             stamp += 2*math.fabs(min_pix_value) <span class="comment"># stamp values are slghtly inexact</span>
<a name="l00370"></a>00370             stamp_filename = stamp_filename_pattern.format(file_main, img_no, epoch, x, y)
<a name="l00371"></a>00371             plot_title = plot_filename_pattern.format(file_main, img_no, epoch, x, y)
<a name="l00372"></a>00372             
<a name="l00373"></a>00373             plotter.plot_stamp(numpy.log10(stamp), plot_title=plot_title, 
<a name="l00374"></a>00374                                       cmap=<span class="stringliteral">&quot;jet&quot;</span>, color_bar=<span class="keyword">True</span>,
<a name="l00375"></a>00375                                       output_dir=output_dir, output_file=stamp_filename, 
<a name="l00376"></a>00376                                       show=<span class="keyword">False</span>, logger=<span class="keywordtype">None</span>)
<a name="l00377"></a>00377 
<a name="l00378"></a>00378             stamp_filename = stamp_filename_pattern_3D.format(file_main, img_no, epoch, x, y)
<a name="l00379"></a>00379             plot_title = plot_filename_pattern_3D.format(file_main, img_no, epoch, x, y)
<a name="l00380"></a>00380 
<a name="l00381"></a>00381             plotter.plot_stamp_3D(numpy.log10(stamp), plot_title=plot_title, 
<a name="l00382"></a>00382                                       cmap=<span class="stringliteral">&quot;jet&quot;</span>, rstride=2, cstride=2,
<a name="l00383"></a>00383                                       output_dir=output_dir, output_file=stamp_filename, 
<a name="l00384"></a>00384                                       show=<span class="keyword">False</span>, logger=<span class="keywordtype">None</span>)
<a name="l00385"></a>00385 
<a name="l00386"></a>00386 <span class="comment">#   # -----------------------------------------------------------------------------------------------</span>
<a name="l00387"></a>00387 <span class="comment">#   def get_nb_objects(self, image_filepath, stamp_size):</span>
<a name="l00388"></a>00388 <span class="comment">#      &quot;&quot;&quot;! Find the actual number of objects (i.e. postage stamps) in the image &quot;&quot;&quot;</span>
<a name="l00389"></a>00389 <span class="comment">#      return int(len(pyfits.getdata(image_filepath)) / stamp_size)**2</span>
<a name="l00390"></a>00390    
<a name="l00391"></a>00391    <span class="comment"># -----------------------------------------------------------------------------------------------</span>
<a name="l00392"></a><a class="code" href="classgfit_1_1gfit__helper_1_1GfitHelper.html#a0bf08e2c5be940ca59f8185eb730f498">00392</a>    <span class="keyword">def </span><a class="code" href="classgfit_1_1gfit__helper_1_1GfitHelper.html#a0bf08e2c5be940ca59f8185eb730f498" title="Find the actual number of objects (i.e.">get_nb_objects</a>(self, image_filepath, stamp_size):
<a name="l00393"></a>00393       <span class="stringliteral">&quot;&quot;&quot;! Find the actual number of objects (i.e. postage stamps) in the image &quot;&quot;&quot;</span>
<a name="l00394"></a>00394 
<a name="l00395"></a>00395       header = pyfits.getheader(image_filepath)
<a name="l00396"></a>00396       nb_pixels = header.get(<span class="stringliteral">&quot;NAXIS1&quot;</span>, 0) * header.get(<span class="stringliteral">&quot;NAXIS2&quot;</span>, 0)
<a name="l00397"></a>00397       <span class="keywordflow">return</span> int(nb_pixels / stamp_size**2)   
<a name="l00398"></a>00398 
<a name="l00399"></a>00399    <span class="comment"># -----------------------------------------------------------------------------------------------</span>
<a name="l00400"></a><a class="code" href="classgfit_1_1gfit__helper_1_1GfitHelper.html#affdd43c7c39399a99466e7ffa5a185b8">00400</a>    <span class="keyword">def </span><a class="code" href="classgfit_1_1gfit__helper_1_1GfitHelper.html#affdd43c7c39399a99466e7ffa5a185b8">remove_failed_fits_from_result_dico</a>(self, result_dico, master):
<a name="l00401"></a>00401 
<a name="l00402"></a>00402       failed_marking_value = master.config.get_as_float(<span class="stringliteral">&quot;FAILED_ELLIPTICITY_VALUE&quot;</span>, 
<a name="l00403"></a>00403                                                         <span class="stringliteral">&quot;SHAPE_MEASUREMENT&quot;</span>)
<a name="l00404"></a>00404 
<a name="l00405"></a>00405       <span class="keywordflow">if</span> failed_marking_value <span class="keywordflow">in</span> result_dico[<span class="stringliteral">&quot;e1&quot;</span>] <span class="keywordflow">or</span> failed_marking_value <span class="keywordflow">in</span> result_dico[<span class="stringliteral">&quot;e2&quot;</span>]:
<a name="l00406"></a>00406 
<a name="l00407"></a>00407          good_indice = numpy.logical_and(numpy.asarray(result_dico[<span class="stringliteral">&quot;e1&quot;</span>]) != failed_marking_value,
<a name="l00408"></a>00408                                          numpy.asarray(result_dico[<span class="stringliteral">&quot;e2&quot;</span>]) != failed_marking_value)  
<a name="l00409"></a>00409 
<a name="l00410"></a>00410          <span class="keywordflow">for</span> var <span class="keywordflow">in</span> result_dico.keys():
<a name="l00411"></a>00411             var_array = numpy.asarray(result_dico[var])   
<a name="l00412"></a>00412             result_dico[var]= list(var_array[good_indice])
<a name="l00413"></a>00413 
<a name="l00414"></a>00414       <span class="keywordflow">return</span> result_dico   
<a name="l00415"></a>00415                
<a name="l00416"></a>00416    <span class="comment"># -----------------------------------------------------------------------------------------------</span>
<a name="l00417"></a><a class="code" href="classgfit_1_1gfit__helper_1_1GfitHelper.html#abc4cd52c49bd62f58046f00d433859d8">00417</a>    <span class="keyword">def </span><a class="code" href="classgfit_1_1gfit__helper_1_1GfitHelper.html#abc4cd52c49bd62f58046f00d433859d8">remove_nans_from_result_dico</a>(self, result_dico, master):
<a name="l00418"></a>00418 
<a name="l00419"></a>00419 
<a name="l00420"></a>00420       <span class="keywordflow">if</span> <span class="stringliteral">&quot;sum_norm_residuals&quot;</span> <span class="keywordflow">in</span> result_dico:
<a name="l00421"></a>00421          good_indice = numpy.logical_not(numpy.isnan(result_dico[<span class="stringliteral">&quot;sum_norm_residuals&quot;</span>]))
<a name="l00422"></a>00422 
<a name="l00423"></a>00423          <span class="keywordflow">for</span> var <span class="keywordflow">in</span> result_dico.keys():
<a name="l00424"></a>00424             var_array = numpy.asarray(result_dico[var])   
<a name="l00425"></a>00425             result_dico[var]= list(var_array[good_indice])
<a name="l00426"></a>00426 
<a name="l00427"></a>00427       <span class="keywordflow">return</span> result_dico   
<a name="l00428"></a>00428 
<a name="l00429"></a>00429 
<a name="l00430"></a>00430    <span class="comment"># -----------------------------------------------------------------------------------------------</span>
<a name="l00431"></a><a class="code" href="classgfit_1_1gfit__helper_1_1GfitHelper.html#a311c5fa2ef831c513adb8ddae037c5d5">00431</a>    <span class="keyword">def </span><a class="code" href="classgfit_1_1gfit__helper_1_1GfitHelper.html#a311c5fa2ef831c513adb8ddae037c5d5" title="Save a dictionary to disk as a catalog file.">save_from_list_dico</a>(self, data_dico, output_directory, output_filename, col_list = [], 
<a name="l00432"></a>00432                                  key_index_map={}, key_fmt_map={}, default_fmt=<span class="stringliteral">&quot;%.18e&quot;</span>):
<a name="l00433"></a>00433       <span class="stringliteral">&quot;&quot;&quot;! </span>
<a name="l00434"></a>00434 <span class="stringliteral">         Save a dictionary to disk as a catalog file. It is assumed a list of values is attached to</span>
<a name="l00435"></a>00435 <span class="stringliteral">         each first-level key in the dictionary (a &quot;list&quot; dictionary)</span>
<a name="l00436"></a>00436 <span class="stringliteral">         @param data_dico dictionary with the data</span>
<a name="l00437"></a>00437 <span class="stringliteral">         @param output_directory directory where to create the file</span>
<a name="l00438"></a>00438 <span class="stringliteral">         @param output_filename name of the file to create</span>
<a name="l00439"></a>00439 <span class="stringliteral">         @param col_list list of column names. If empty, take all the keys of the dictionary </span>
<a name="l00440"></a>00440 <span class="stringliteral">         @param key_index_map if not empty, contains a map with the preferred order for some keys</span>
<a name="l00441"></a>00441 <span class="stringliteral">         @param key_fmt_map if not empty, contains the preferred output format of some key values</span>
<a name="l00442"></a>00442 <span class="stringliteral">         @param default_fmt default format if not explicitly specified</span>
<a name="l00443"></a>00443 <span class="stringliteral">      &quot;&quot;&quot;</span>
<a name="l00444"></a>00444 
<a name="l00445"></a>00445       output_catalog = <span class="keywordtype">None</span>    <span class="comment"># output catalog</span>
<a name="l00446"></a>00446 
<a name="l00447"></a>00447       <span class="keywordflow">try</span>:
<a name="l00448"></a>00448 
<a name="l00449"></a>00449          <span class="comment">#print data_dico</span>
<a name="l00450"></a>00450 
<a name="l00451"></a>00451          <span class="comment"># --- Create output file</span>
<a name="l00452"></a>00452          output_filepath = os.path.join(output_directory, output_filename)
<a name="l00453"></a>00453 
<a name="l00454"></a>00454          <span class="comment"># --- Build the list of columns in the required order</span>
<a name="l00455"></a>00455          cat_col_list = []
<a name="l00456"></a>00456          cat_col_fmt = []
<a name="l00457"></a>00457          cat_col_comments = <span class="stringliteral">&quot;&quot;</span>
<a name="l00458"></a>00458 
<a name="l00459"></a>00459          <span class="keywordflow">if</span> len(col_list) == 0:
<a name="l00460"></a>00460             col_names = data_dico.keys()
<a name="l00461"></a>00461          <span class="keywordflow">else</span>:
<a name="l00462"></a>00462             col_names = col_list
<a name="l00463"></a>00463 
<a name="l00464"></a>00464          <span class="comment"># --- Sort column names according to their index</span>
<a name="l00465"></a>00465          <span class="keywordflow">if</span> len(key_index_map) &gt; 0:
<a name="l00466"></a>00466             sorted_index_tuples = sorted(key_index_map.items(), key=itemgetter(1, 0))
<a name="l00467"></a>00467             sorted_col_names = [ sorted_index_tuples[i][0] <span class="keywordflow">for</span> (k, i) <span class="keywordflow">in</span> sorted_index_tuples ]
<a name="l00468"></a>00468             left_col_names = [c <span class="keywordflow">for</span> c <span class="keywordflow">in</span> col_names <span class="keywordflow">if</span> <span class="keywordflow">not</span> c <span class="keywordflow">in</span> sorted_col_names]
<a name="l00469"></a>00469             col_names = sorted_col_names
<a name="l00470"></a>00470             col_names.extend(left_col_names)
<a name="l00471"></a>00471 
<a name="l00472"></a>00472          <span class="comment"># --- Check the column names are indeed in the dictionary</span>
<a name="l00473"></a>00473          col_names_to_remove = []
<a name="l00474"></a>00474          <span class="keywordflow">for</span> col_name <span class="keywordflow">in</span> col_names:
<a name="l00475"></a>00475             <span class="keywordflow">if</span> <span class="keywordflow">not</span> col_name <span class="keywordflow">in</span> data_dico:
<a name="l00476"></a>00476                <span class="comment">#self.print_warning( &quot;column: {0} not found in the dictionary&quot;.format(col_name) )</span>
<a name="l00477"></a>00477                col_names_to_remove.append(col_name)
<a name="l00478"></a>00478 
<a name="l00479"></a>00479          <span class="keywordflow">for</span> col_name <span class="keywordflow">in</span> col_names_to_remove:
<a name="l00480"></a>00480             <span class="comment">#self.print_warning( &quot;Removing column: {0}&quot;.format(col_name) )</span>
<a name="l00481"></a>00481             col_names.remove(col_name)
<a name="l00482"></a>00482 
<a name="l00483"></a>00483          <span class="keywordflow">for</span> col_name <span class="keywordflow">in</span> col_names:
<a name="l00484"></a>00484             col_no = col_names.index(col_name)
<a name="l00485"></a>00485             <span class="keywordflow">if</span> col_name <span class="keywordflow">in</span> key_index_map:
<a name="l00486"></a>00486                cat_col_list.insert(key_index_map[col_name], col_name)
<a name="l00487"></a>00487                <span class="keywordflow">if</span> col_name <span class="keywordflow">in</span> key_fmt_map:
<a name="l00488"></a>00488                   cat_col_fmt.insert(key_index_map[col_name], key_fmt_map[col_name])
<a name="l00489"></a>00489                <span class="keywordflow">else</span>:
<a name="l00490"></a>00490                   cat_col_fmt.insert(key_index_map[col_name], default_fmt)
<a name="l00491"></a>00491             <span class="keywordflow">else</span>:
<a name="l00492"></a>00492                cat_col_list.append(col_name)
<a name="l00493"></a>00493                cat_col_fmt.append(default_fmt)
<a name="l00494"></a>00494 
<a name="l00495"></a>00495          <span class="comment"># --- Insert the columns in the catalog</span>
<a name="l00496"></a>00496          col_data_list = []   
<a name="l00497"></a>00497          <span class="keywordflow">for</span> col_name <span class="keywordflow">in</span> cat_col_list:
<a name="l00498"></a>00498             cat_col_comments += col_name + <span class="stringliteral">&quot; &quot;</span> 
<a name="l00499"></a>00499             col_data_list.append(numpy.asarray([]))
<a name="l00500"></a>00500 
<a name="l00501"></a>00501          <span class="keywordflow">for</span> col_name <span class="keywordflow">in</span> cat_col_list:
<a name="l00502"></a>00502             col_no = cat_col_list.index(col_name)
<a name="l00503"></a>00503 
<a name="l00504"></a>00504             <span class="comment">#print col_name, len(data_dico[col_name])</span>
<a name="l00505"></a>00505             col_data_list[col_no] = numpy.concatenate(  
<a name="l00506"></a>00506                                                     (col_data_list[col_no], data_dico[col_name] ) ) 
<a name="l00507"></a>00507 
<a name="l00508"></a>00508          data_matrix = numpy.asmatrix(col_data_list).transpose().squeeze()
<a name="l00509"></a>00509 
<a name="l00510"></a>00510          numpy.savetxt(output_filepath, data_matrix, fmt=cat_col_fmt, header=cat_col_comments)
<a name="l00511"></a>00511 
<a name="l00512"></a>00512       <span class="keywordflow">except</span> Exception <span class="keyword">as</span> detail:
<a name="l00513"></a>00513          self.print_error(<span class="stringliteral">&quot;could not create catalog from dictionary ({0})&quot;</span>.format(detail))
<a name="l00514"></a>00514    
<a name="l00515"></a>00515 
<a name="l00516"></a>00516 <span class="comment">#   # -----------------------------------------------------------------------------------------------</span>
<a name="l00517"></a>00517 <span class="comment">#   def RMSD(self, stamp):</span>
<a name="l00518"></a>00518 <span class="comment">#      return numpy.sqrt()</span>
<a name="l00519"></a>00519 
<a name="l00520"></a>00520    <span class="comment"># -----------------------------------------------------------------------------------------------</span>
<a name="l00521"></a><a class="code" href="classgfit_1_1gfit__helper_1_1GfitHelper.html#a87882e32bdd58341c0bfd5619bf0ff81">00521</a>    <span class="keyword">def </span><a class="code" href="classgfit_1_1gfit__helper_1_1GfitHelper.html#a87882e32bdd58341c0bfd5619bf0ff81">RMSD</a>(self, stamp):
<a name="l00522"></a>00522       <span class="keywordflow">return</span> numpy.sqrt(numpy.mean(stamp))  
<a name="l00523"></a>00523 
<a name="l00524"></a>00524    <span class="comment"># -----------------------------------------------------------------------------------------------</span>
<a name="l00525"></a><a class="code" href="classgfit_1_1gfit__helper_1_1GfitHelper.html#a6f4cc968bcbfcc080e13369219ceb1a7">00525</a>    <span class="keyword">def </span><a class="code" href="classgfit_1_1gfit__helper_1_1GfitHelper.html#a6f4cc968bcbfcc080e13369219ceb1a7">record_data_items</a>(self, data_dico, qvars, qvals):
<a name="l00526"></a>00526 
<a name="l00527"></a>00527       qoper_tuples = [(<span class="stringliteral">&quot;sum&quot;</span>, numpy.sum), (<span class="stringliteral">&quot;min&quot;</span>, numpy.min),\
<a name="l00528"></a>00528                       (<span class="stringliteral">&quot;max&quot;</span>, numpy.max)] 
<a name="l00529"></a>00529 <span class="comment">#      qoper_tuples = [(&quot;sum&quot;, numpy.sum), (&quot;min&quot;, numpy.min),\</span>
<a name="l00530"></a>00530 <span class="comment">#                      (&quot;max&quot;, numpy.max), (&quot;mean&quot;, numpy.mean), (&quot;rmsd&quot;, self.RMSD)] </span>
<a name="l00531"></a>00531 
<a name="l00532"></a>00532       <span class="keywordflow">for</span> (qlabel, qoper) <span class="keywordflow">in</span> qoper_tuples:
<a name="l00533"></a>00533          <span class="keywordflow">for</span> (qvar, qval) <span class="keywordflow">in</span> zip(qvars, qvals):
<a name="l00534"></a>00534             full_var = qlabel+<span class="stringliteral">&quot;_&quot;</span>+qvar
<a name="l00535"></a>00535             <span class="keywordflow">if</span> <span class="keywordflow">not</span> full_var <span class="keywordflow">in</span> data_dico:
<a name="l00536"></a>00536                data_dico[full_var] = []
<a name="l00537"></a>00537             data_dico[full_var].append(qoper(qval))
<a name="l00538"></a>00538 
<a name="l00539"></a>00539 
<a name="l00540"></a>00540 <span class="comment"># --------------------------------------------------------------------------------------------------</span>
<a name="l00541"></a><a class="code" href="classgfit_1_1gfit__helper_1_1OrderedDict.html">00541</a> <span class="keyword">class </span><a class="code" href="classgfit_1_1gfit__helper_1_1OrderedDict.html">OrderedDict</a>(<a class="code" href="classdict.html">dict</a>):
<a name="l00542"></a>00542     <span class="stringliteral">&#39;Dictionary that remembers insertion order&#39;</span>
<a name="l00543"></a>00543     <span class="comment"># An inherited dict maps keys to values.</span>
<a name="l00544"></a>00544     <span class="comment"># The inherited dict provides __getitem__, __len__, __contains__, and get.</span>
<a name="l00545"></a>00545     <span class="comment"># The remaining methods are order-aware.</span>
<a name="l00546"></a>00546     <span class="comment"># Big-O running times for all methods are the same as for regular dictionaries.</span>
<a name="l00547"></a>00547 
<a name="l00548"></a>00548     <span class="comment"># The internal self.__map dictionary maps keys to links in a doubly linked list.</span>
<a name="l00549"></a>00549     <span class="comment"># The circular doubly linked list starts and ends with a sentinel element.</span>
<a name="l00550"></a>00550     <span class="comment"># The sentinel element never gets deleted (this simplifies the algorithm).</span>
<a name="l00551"></a>00551     <span class="comment"># Each link is stored as a list of length three:  [PREV, NEXT, KEY].</span>
<a name="l00552"></a>00552 
<a name="l00553"></a><a class="code" href="classgfit_1_1gfit__helper_1_1OrderedDict.html#afc436286373ae8e108ab14b60131fceb">00553</a>     <span class="keyword">def </span><a class="code" href="classgfit_1_1gfit__helper_1_1OrderedDict.html#afc436286373ae8e108ab14b60131fceb">__init__</a>(self, *args, **kwds):
<a name="l00554"></a>00554         <span class="stringliteral">&#39;&#39;&#39;Initialize an ordered dictionary.  Signature is the same as for</span>
<a name="l00555"></a>00555 <span class="stringliteral">        regular dictionaries, but keyword arguments are not recommended</span>
<a name="l00556"></a>00556 <span class="stringliteral">        because their insertion order is arbitrary.</span>
<a name="l00557"></a>00557 <span class="stringliteral"></span>
<a name="l00558"></a>00558 <span class="stringliteral">        &#39;&#39;&#39;</span>
<a name="l00559"></a>00559         <span class="keywordflow">if</span> len(args) &gt; 1:
<a name="l00560"></a>00560             <span class="keywordflow">raise</span> TypeError(<span class="stringliteral">&#39;expected at most 1 arguments, got %d&#39;</span> % len(args))
<a name="l00561"></a>00561         <span class="keywordflow">try</span>:
<a name="l00562"></a>00562             self.<a class="code" href="classgfit_1_1gfit__helper_1_1OrderedDict.html#ace059bf63492d218c927902d22695df8">__root</a>
<a name="l00563"></a>00563         <span class="keywordflow">except</span> AttributeError:
<a name="l00564"></a>00564             self.<a class="code" href="classgfit_1_1gfit__helper_1_1OrderedDict.html#ace059bf63492d218c927902d22695df8">__root</a> = root = []                     <span class="comment"># sentinel node</span>
<a name="l00565"></a>00565             root[:] = [root, root, <span class="keywordtype">None</span>]
<a name="l00566"></a>00566             self.<a class="code" href="classgfit_1_1gfit__helper_1_1OrderedDict.html#a45b2853a5b64a7a8bf2491196bc6ca8f">__map</a> = {}
<a name="l00567"></a>00567         self.<a class="code" href="classgfit_1_1gfit__helper_1_1OrderedDict.html#a6adacc833ef31ea4e808f6b33a717f22">__update</a>(*args, **kwds)
<a name="l00568"></a>00568 
<a name="l00569"></a><a class="code" href="classgfit_1_1gfit__helper_1_1OrderedDict.html#ace1e689f0925636bf3af5242f961b5e5">00569</a>     <span class="keyword">def </span><a class="code" href="classgfit_1_1gfit__helper_1_1OrderedDict.html#ace1e689f0925636bf3af5242f961b5e5">__setitem__</a>(self, key, value, dict_setitem=dict.__setitem__):
<a name="l00570"></a>00570         <span class="stringliteral">&#39;od.__setitem__(i, y) &lt;==&gt; od[i]=y&#39;</span>
<a name="l00571"></a>00571         <span class="comment"># Setting a new item creates a new link which goes at the end of the linked</span>
<a name="l00572"></a>00572         <span class="comment"># list, and the inherited dictionary is updated with the new key/value pair.</span>
<a name="l00573"></a>00573         <span class="keywordflow">if</span> key <span class="keywordflow">not</span> <span class="keywordflow">in</span> self:
<a name="l00574"></a>00574             root = self.<a class="code" href="classgfit_1_1gfit__helper_1_1OrderedDict.html#ace059bf63492d218c927902d22695df8">__root</a>
<a name="l00575"></a>00575             last = root[0]
<a name="l00576"></a>00576             last[1] = root[0] = self.<a class="code" href="classgfit_1_1gfit__helper_1_1OrderedDict.html#a45b2853a5b64a7a8bf2491196bc6ca8f">__map</a>[key] = [last, root, key]
<a name="l00577"></a>00577         dict_setitem(self, key, value)
<a name="l00578"></a>00578 
<a name="l00579"></a><a class="code" href="classgfit_1_1gfit__helper_1_1OrderedDict.html#a19a9b545a1b9df094c3d059005f9b42d">00579</a>     <span class="keyword">def </span><a class="code" href="classgfit_1_1gfit__helper_1_1OrderedDict.html#a19a9b545a1b9df094c3d059005f9b42d">__delitem__</a>(self, key, dict_delitem=dict.__delitem__):
<a name="l00580"></a>00580         <span class="stringliteral">&#39;od.__delitem__(y) &lt;==&gt; del od[y]&#39;</span>
<a name="l00581"></a>00581         <span class="comment"># Deleting an existing item uses self.__map to find the link which is</span>
<a name="l00582"></a>00582         <span class="comment"># then removed by updating the links in the predecessor and successor nodes.</span>
<a name="l00583"></a>00583         dict_delitem(self, key)
<a name="l00584"></a>00584         link_prev, link_next, key = self.<a class="code" href="classgfit_1_1gfit__helper_1_1OrderedDict.html#a45b2853a5b64a7a8bf2491196bc6ca8f">__map</a>.pop(key)
<a name="l00585"></a>00585         link_prev[1] = link_next
<a name="l00586"></a>00586         link_next[0] = link_prev
<a name="l00587"></a>00587 
<a name="l00588"></a><a class="code" href="classgfit_1_1gfit__helper_1_1OrderedDict.html#a2089ebdc14e4951c9b18181c084ccbbf">00588</a>     <span class="keyword">def </span><a class="code" href="classgfit_1_1gfit__helper_1_1OrderedDict.html#a2089ebdc14e4951c9b18181c084ccbbf">__iter__</a>(self):
<a name="l00589"></a>00589         <span class="stringliteral">&#39;od.__iter__() &lt;==&gt; iter(od)&#39;</span>
<a name="l00590"></a>00590         root = self.<a class="code" href="classgfit_1_1gfit__helper_1_1OrderedDict.html#ace059bf63492d218c927902d22695df8">__root</a>
<a name="l00591"></a>00591         curr = root[1]
<a name="l00592"></a>00592         <span class="keywordflow">while</span> curr <span class="keywordflow">is</span> <span class="keywordflow">not</span> root:
<a name="l00593"></a>00593             <span class="keywordflow">yield</span> curr[2]
<a name="l00594"></a>00594             curr = curr[1]
<a name="l00595"></a>00595 
<a name="l00596"></a><a class="code" href="classgfit_1_1gfit__helper_1_1OrderedDict.html#ae166e857ed332c1a8000a52f44aca1d0">00596</a>     <span class="keyword">def </span><a class="code" href="classgfit_1_1gfit__helper_1_1OrderedDict.html#ae166e857ed332c1a8000a52f44aca1d0">__reversed__</a>(self):
<a name="l00597"></a>00597         <span class="stringliteral">&#39;od.__reversed__() &lt;==&gt; reversed(od)&#39;</span>
<a name="l00598"></a>00598         root = self.<a class="code" href="classgfit_1_1gfit__helper_1_1OrderedDict.html#ace059bf63492d218c927902d22695df8">__root</a>
<a name="l00599"></a>00599         curr = root[0]
<a name="l00600"></a>00600         <span class="keywordflow">while</span> curr <span class="keywordflow">is</span> <span class="keywordflow">not</span> root:
<a name="l00601"></a>00601             <span class="keywordflow">yield</span> curr[2]
<a name="l00602"></a>00602             curr = curr[0]
<a name="l00603"></a>00603 
<a name="l00604"></a><a class="code" href="classgfit_1_1gfit__helper_1_1OrderedDict.html#aa907428ee729ef80ebab770b7332a367">00604</a>     <span class="keyword">def </span><a class="code" href="classgfit_1_1gfit__helper_1_1OrderedDict.html#aa907428ee729ef80ebab770b7332a367">clear</a>(self):
<a name="l00605"></a>00605         <span class="stringliteral">&#39;od.clear() -&gt; None.  Remove all items from od.&#39;</span>
<a name="l00606"></a>00606         <span class="keywordflow">try</span>:
<a name="l00607"></a>00607             <span class="keywordflow">for</span> node <span class="keywordflow">in</span> self.<a class="code" href="classgfit_1_1gfit__helper_1_1OrderedDict.html#a45b2853a5b64a7a8bf2491196bc6ca8f">__map</a>.itervalues():
<a name="l00608"></a>00608                 del node[:]
<a name="l00609"></a>00609             root = self.<a class="code" href="classgfit_1_1gfit__helper_1_1OrderedDict.html#ace059bf63492d218c927902d22695df8">__root</a>
<a name="l00610"></a>00610             root[:] = [root, root, <span class="keywordtype">None</span>]
<a name="l00611"></a>00611             self.<a class="code" href="classgfit_1_1gfit__helper_1_1OrderedDict.html#a45b2853a5b64a7a8bf2491196bc6ca8f">__map</a>.clear()
<a name="l00612"></a>00612         <span class="keywordflow">except</span> AttributeError:
<a name="l00613"></a>00613             <span class="keywordflow">pass</span>
<a name="l00614"></a>00614         dict.clear(self)
<a name="l00615"></a>00615 
<a name="l00616"></a><a class="code" href="classgfit_1_1gfit__helper_1_1OrderedDict.html#af0c5ecdb3089e567f4e39104885caa50">00616</a>     <span class="keyword">def </span><a class="code" href="classgfit_1_1gfit__helper_1_1OrderedDict.html#af0c5ecdb3089e567f4e39104885caa50">popitem</a>(self, last=True):
<a name="l00617"></a>00617         <span class="stringliteral">&#39;&#39;&#39;od.popitem() -&gt; (k, v), return and remove a (key, value) pair.</span>
<a name="l00618"></a>00618 <span class="stringliteral">        Pairs are returned in LIFO order if last is true or FIFO order if false.</span>
<a name="l00619"></a>00619 <span class="stringliteral"></span>
<a name="l00620"></a>00620 <span class="stringliteral">        &#39;&#39;&#39;</span>
<a name="l00621"></a>00621         <span class="keywordflow">if</span> <span class="keywordflow">not</span> self:
<a name="l00622"></a>00622             <span class="keywordflow">raise</span> KeyError(<span class="stringliteral">&#39;dictionary is empty&#39;</span>)
<a name="l00623"></a>00623         root = self.<a class="code" href="classgfit_1_1gfit__helper_1_1OrderedDict.html#ace059bf63492d218c927902d22695df8">__root</a>
<a name="l00624"></a>00624         <span class="keywordflow">if</span> last:
<a name="l00625"></a>00625             link = root[0]
<a name="l00626"></a>00626             link_prev = link[0]
<a name="l00627"></a>00627             link_prev[1] = root
<a name="l00628"></a>00628             root[0] = link_prev
<a name="l00629"></a>00629         <span class="keywordflow">else</span>:
<a name="l00630"></a>00630             link = root[1]
<a name="l00631"></a>00631             link_next = link[1]
<a name="l00632"></a>00632             root[1] = link_next
<a name="l00633"></a>00633             link_next[0] = root
<a name="l00634"></a>00634         key = link[2]
<a name="l00635"></a>00635         del self.<a class="code" href="classgfit_1_1gfit__helper_1_1OrderedDict.html#a45b2853a5b64a7a8bf2491196bc6ca8f">__map</a>[key]
<a name="l00636"></a>00636         value = dict.pop(self, key)
<a name="l00637"></a>00637         <span class="keywordflow">return</span> key, value
<a name="l00638"></a>00638 
<a name="l00639"></a>00639     <span class="comment"># -- the following methods do not depend on the internal structure --</span>
<a name="l00640"></a>00640 
<a name="l00641"></a><a class="code" href="classgfit_1_1gfit__helper_1_1OrderedDict.html#a0e57845ff42d0f11f06aee53646ea983">00641</a>     <span class="keyword">def </span><a class="code" href="classgfit_1_1gfit__helper_1_1OrderedDict.html#a0e57845ff42d0f11f06aee53646ea983">keys</a>(self):
<a name="l00642"></a>00642         <span class="stringliteral">&#39;od.keys() -&gt; list of keys in od&#39;</span>
<a name="l00643"></a>00643         <span class="keywordflow">return</span> list(self)
<a name="l00644"></a>00644 
<a name="l00645"></a><a class="code" href="classgfit_1_1gfit__helper_1_1OrderedDict.html#ac0a7f5a1c9be15cf310f43a84f56c687">00645</a>     <span class="keyword">def </span><a class="code" href="classgfit_1_1gfit__helper_1_1OrderedDict.html#ac0a7f5a1c9be15cf310f43a84f56c687">values</a>(self):
<a name="l00646"></a>00646         <span class="stringliteral">&#39;od.values() -&gt; list of values in od&#39;</span>
<a name="l00647"></a>00647         <span class="keywordflow">return</span> [self[key] <span class="keywordflow">for</span> key <span class="keywordflow">in</span> self]
<a name="l00648"></a>00648 
<a name="l00649"></a><a class="code" href="classgfit_1_1gfit__helper_1_1OrderedDict.html#a65c6efd75deda8822937cf0173031f57">00649</a>     <span class="keyword">def </span><a class="code" href="classgfit_1_1gfit__helper_1_1OrderedDict.html#a65c6efd75deda8822937cf0173031f57">items</a>(self):
<a name="l00650"></a>00650         <span class="stringliteral">&#39;od.items() -&gt; list of (key, value) pairs in od&#39;</span>
<a name="l00651"></a>00651         <span class="keywordflow">return</span> [(key, self[key]) <span class="keywordflow">for</span> key <span class="keywordflow">in</span> self]
<a name="l00652"></a>00652 
<a name="l00653"></a><a class="code" href="classgfit_1_1gfit__helper_1_1OrderedDict.html#a3ad2c4e4023c72d4cbbabf7c452981b3">00653</a>     <span class="keyword">def </span><a class="code" href="classgfit_1_1gfit__helper_1_1OrderedDict.html#a3ad2c4e4023c72d4cbbabf7c452981b3">iterkeys</a>(self):
<a name="l00654"></a>00654         <span class="stringliteral">&#39;od.iterkeys() -&gt; an iterator over the keys in od&#39;</span>
<a name="l00655"></a>00655         <span class="keywordflow">return</span> iter(self)
<a name="l00656"></a>00656 
<a name="l00657"></a><a class="code" href="classgfit_1_1gfit__helper_1_1OrderedDict.html#a341fd19f977b6e05987ce7f1af3857ad">00657</a>     <span class="keyword">def </span><a class="code" href="classgfit_1_1gfit__helper_1_1OrderedDict.html#a341fd19f977b6e05987ce7f1af3857ad">itervalues</a>(self):
<a name="l00658"></a>00658         <span class="stringliteral">&#39;od.itervalues -&gt; an iterator over the values in od&#39;</span>
<a name="l00659"></a>00659         <span class="keywordflow">for</span> k <span class="keywordflow">in</span> self:
<a name="l00660"></a>00660             <span class="keywordflow">yield</span> self[k]
<a name="l00661"></a>00661 
<a name="l00662"></a><a class="code" href="classgfit_1_1gfit__helper_1_1OrderedDict.html#aca347d0135f43a021b34423fa6775bc6">00662</a>     <span class="keyword">def </span><a class="code" href="classgfit_1_1gfit__helper_1_1OrderedDict.html#aca347d0135f43a021b34423fa6775bc6">iteritems</a>(self):
<a name="l00663"></a>00663         <span class="stringliteral">&#39;od.iteritems -&gt; an iterator over the (key, value) items in od&#39;</span>
<a name="l00664"></a>00664         <span class="keywordflow">for</span> k <span class="keywordflow">in</span> self:
<a name="l00665"></a>00665             <span class="keywordflow">yield</span> (k, self[k])
<a name="l00666"></a>00666 
<a name="l00667"></a><a class="code" href="classgfit_1_1gfit__helper_1_1OrderedDict.html#a8d6e4ad3fbb6f4a37daf7073c2ff3e2b">00667</a>     <span class="keyword">def </span><a class="code" href="classgfit_1_1gfit__helper_1_1OrderedDict.html#a8d6e4ad3fbb6f4a37daf7073c2ff3e2b">update</a>(*args, **kwds):
<a name="l00668"></a>00668         <span class="stringliteral">&#39;&#39;&#39;od.update(E, **F) -&gt; None.  Update od from dict/iterable E and F.</span>
<a name="l00669"></a>00669 <span class="stringliteral"></span>
<a name="l00670"></a>00670 <span class="stringliteral">        If E is a dict instance, does:           for k in E: od[k] = E[k]</span>
<a name="l00671"></a>00671 <span class="stringliteral">        If E has a .keys() method, does:         for k in E.keys(): od[k] = E[k]</span>
<a name="l00672"></a>00672 <span class="stringliteral">        Or if E is an iterable of items, does:   for k, v in E: od[k] = v</span>
<a name="l00673"></a>00673 <span class="stringliteral">        In either case, this is followed by:     for k, v in F.items(): od[k] = v</span>
<a name="l00674"></a>00674 <span class="stringliteral"></span>
<a name="l00675"></a>00675 <span class="stringliteral">        &#39;&#39;&#39;</span>
<a name="l00676"></a>00676         <span class="keywordflow">if</span> len(args) &gt; 2:
<a name="l00677"></a>00677             <span class="keywordflow">raise</span> TypeError(<span class="stringliteral">&#39;update() takes at most 2 positional &#39;</span>
<a name="l00678"></a>00678                             <span class="stringliteral">&#39;arguments (%d given)&#39;</span> % (len(args),))
<a name="l00679"></a>00679         <span class="keywordflow">elif</span> <span class="keywordflow">not</span> args:
<a name="l00680"></a>00680             <span class="keywordflow">raise</span> TypeError(<span class="stringliteral">&#39;update() takes at least 1 argument (0 given)&#39;</span>)
<a name="l00681"></a>00681         self = args[0]
<a name="l00682"></a>00682         <span class="comment"># Make progressively weaker assumptions about &quot;other&quot;</span>
<a name="l00683"></a>00683         other = ()
<a name="l00684"></a>00684         <span class="keywordflow">if</span> len(args) == 2:
<a name="l00685"></a>00685             other = args[1]
<a name="l00686"></a>00686         <span class="keywordflow">if</span> isinstance(other, dict):
<a name="l00687"></a>00687             <span class="keywordflow">for</span> key <span class="keywordflow">in</span> other:
<a name="l00688"></a>00688                 self[key] = other[key]
<a name="l00689"></a>00689         <span class="keywordflow">elif</span> hasattr(other, <span class="stringliteral">&#39;keys&#39;</span>):
<a name="l00690"></a>00690             <span class="keywordflow">for</span> key <span class="keywordflow">in</span> other.keys():
<a name="l00691"></a>00691                 self[key] = other[key]
<a name="l00692"></a>00692         <span class="keywordflow">else</span>:
<a name="l00693"></a>00693             <span class="keywordflow">for</span> key, value <span class="keywordflow">in</span> other:
<a name="l00694"></a>00694                 self[key] = value
<a name="l00695"></a>00695         <span class="keywordflow">for</span> key, value <span class="keywordflow">in</span> kwds.items():
<a name="l00696"></a>00696             self[key] = value
<a name="l00697"></a>00697 
<a name="l00698"></a>00698     __update = update  <span class="comment"># let subclasses override update without breaking __init__</span>
<a name="l00699"></a>00699 
<a name="l00700"></a>00700     __marker = object()
<a name="l00701"></a>00701 
<a name="l00702"></a><a class="code" href="classgfit_1_1gfit__helper_1_1OrderedDict.html#a2ae71586a218048e563d0fbe424b52da">00702</a>     <span class="keyword">def </span><a class="code" href="classgfit_1_1gfit__helper_1_1OrderedDict.html#a2ae71586a218048e563d0fbe424b52da">pop</a>(self, key, default=__marker):
<a name="l00703"></a>00703         <span class="stringliteral">&#39;&#39;&#39;od.pop(k[,d]) -&gt; v, remove specified key and return the corresponding value.</span>
<a name="l00704"></a>00704 <span class="stringliteral">        If key is not found, d is returned if given, otherwise KeyError is raised.</span>
<a name="l00705"></a>00705 <span class="stringliteral"></span>
<a name="l00706"></a>00706 <span class="stringliteral">        &#39;&#39;&#39;</span>
<a name="l00707"></a>00707         <span class="keywordflow">if</span> key <span class="keywordflow">in</span> self:
<a name="l00708"></a>00708             result = self[key]
<a name="l00709"></a>00709             del self[key]
<a name="l00710"></a>00710             <span class="keywordflow">return</span> result
<a name="l00711"></a>00711         <span class="keywordflow">if</span> default <span class="keywordflow">is</span> self.<a class="code" href="classgfit_1_1gfit__helper_1_1OrderedDict.html#a01eb2104bc0a3c498bf971ed46c7133a">__marker</a>:
<a name="l00712"></a>00712             <span class="keywordflow">raise</span> KeyError(key)
<a name="l00713"></a>00713         <span class="keywordflow">return</span> default
<a name="l00714"></a>00714 
<a name="l00715"></a><a class="code" href="classgfit_1_1gfit__helper_1_1OrderedDict.html#a49ea960feab47542ffa9dc08fc559ead">00715</a>     <span class="keyword">def </span><a class="code" href="classgfit_1_1gfit__helper_1_1OrderedDict.html#a49ea960feab47542ffa9dc08fc559ead">setdefault</a>(self, key, default=None):
<a name="l00716"></a>00716         <span class="stringliteral">&#39;od.setdefault(k[,d]) -&gt; od.get(k,d), also set od[k]=d if k not in od&#39;</span>
<a name="l00717"></a>00717         <span class="keywordflow">if</span> key <span class="keywordflow">in</span> self:
<a name="l00718"></a>00718             <span class="keywordflow">return</span> self[key]
<a name="l00719"></a>00719         self[key] = default
<a name="l00720"></a>00720         <span class="keywordflow">return</span> default
<a name="l00721"></a>00721 
<a name="l00722"></a><a class="code" href="classgfit_1_1gfit__helper_1_1OrderedDict.html#ae593608ced5bc1dd0f32b906d43a9a27">00722</a>     <span class="keyword">def </span><a class="code" href="classgfit_1_1gfit__helper_1_1OrderedDict.html#ae593608ced5bc1dd0f32b906d43a9a27">__repr__</a>(self, _repr_running={}):
<a name="l00723"></a>00723         <span class="stringliteral">&#39;od.__repr__() &lt;==&gt; repr(od)&#39;</span>
<a name="l00724"></a>00724         call_key = id(self), _get_ident()
<a name="l00725"></a>00725         <span class="keywordflow">if</span> call_key <span class="keywordflow">in</span> _repr_running:
<a name="l00726"></a>00726             <span class="keywordflow">return</span> <span class="stringliteral">&#39;...&#39;</span>
<a name="l00727"></a>00727         _repr_running[call_key] = 1
<a name="l00728"></a>00728         <span class="keywordflow">try</span>:
<a name="l00729"></a>00729             <span class="keywordflow">if</span> <span class="keywordflow">not</span> self:
<a name="l00730"></a>00730                 <span class="keywordflow">return</span> <span class="stringliteral">&#39;%s()&#39;</span> % (self.__class__.__name__,)
<a name="l00731"></a>00731             <span class="keywordflow">return</span> <span class="stringliteral">&#39;%s(%r)&#39;</span> % (self.__class__.__name__, self.<a class="code" href="classgfit_1_1gfit__helper_1_1OrderedDict.html#a65c6efd75deda8822937cf0173031f57">items</a>())
<a name="l00732"></a>00732         <span class="keywordflow">finally</span>:
<a name="l00733"></a>00733             del _repr_running[call_key]
<a name="l00734"></a>00734 
<a name="l00735"></a><a class="code" href="classgfit_1_1gfit__helper_1_1OrderedDict.html#a074d213a24669d9822a4c7b4e307d0b3">00735</a>     <span class="keyword">def </span><a class="code" href="classgfit_1_1gfit__helper_1_1OrderedDict.html#a074d213a24669d9822a4c7b4e307d0b3">__reduce__</a>(self):
<a name="l00736"></a>00736         <span class="stringliteral">&#39;Return state information for pickling&#39;</span>
<a name="l00737"></a>00737         items = [[k, self[k]] <span class="keywordflow">for</span> k <span class="keywordflow">in</span> self]
<a name="l00738"></a>00738         inst_dict = vars(self).copy()
<a name="l00739"></a>00739         <span class="keywordflow">for</span> k <span class="keywordflow">in</span> vars(OrderedDict()):
<a name="l00740"></a>00740             inst_dict.pop(k, <span class="keywordtype">None</span>)
<a name="l00741"></a>00741         <span class="keywordflow">if</span> inst_dict:
<a name="l00742"></a>00742             <span class="keywordflow">return</span> (self.__class__, (items,), inst_dict)
<a name="l00743"></a>00743         <span class="keywordflow">return</span> self.__class__, (items,)
<a name="l00744"></a>00744 
<a name="l00745"></a><a class="code" href="classgfit_1_1gfit__helper_1_1OrderedDict.html#a3d7384596b8d689e42d00cf8dadabe4d">00745</a>     <span class="keyword">def </span><a class="code" href="classgfit_1_1gfit__helper_1_1OrderedDict.html#a3d7384596b8d689e42d00cf8dadabe4d">copy</a>(self):
<a name="l00746"></a>00746         <span class="stringliteral">&#39;od.copy() -&gt; a shallow copy of od&#39;</span>
<a name="l00747"></a>00747         <span class="keywordflow">return</span> self.__class__(self)
<a name="l00748"></a>00748 
<a name="l00749"></a>00749     @classmethod
<a name="l00750"></a><a class="code" href="classgfit_1_1gfit__helper_1_1OrderedDict.html#a3e905cd80933ce0a8ccd29ad00fa3863">00750</a>     <span class="keyword">def </span><a class="code" href="classgfit_1_1gfit__helper_1_1OrderedDict.html#a3e905cd80933ce0a8ccd29ad00fa3863">fromkeys</a>(cls, iterable, value=None):
<a name="l00751"></a>00751         <span class="stringliteral">&#39;&#39;&#39;OD.fromkeys(S[, v]) -&gt; New ordered dictionary with keys from S</span>
<a name="l00752"></a>00752 <span class="stringliteral">        and values equal to v (which defaults to None).</span>
<a name="l00753"></a>00753 <span class="stringliteral"></span>
<a name="l00754"></a>00754 <span class="stringliteral">        &#39;&#39;&#39;</span>
<a name="l00755"></a>00755         d = cls()
<a name="l00756"></a>00756         <span class="keywordflow">for</span> key <span class="keywordflow">in</span> iterable:
<a name="l00757"></a>00757             d[key] = value
<a name="l00758"></a>00758         <span class="keywordflow">return</span> d
<a name="l00759"></a>00759 
<a name="l00760"></a><a class="code" href="classgfit_1_1gfit__helper_1_1OrderedDict.html#a0279185b62017e8bebf8cef68b1caf7c">00760</a>     <span class="keyword">def </span><a class="code" href="classgfit_1_1gfit__helper_1_1OrderedDict.html#a0279185b62017e8bebf8cef68b1caf7c">__eq__</a>(self, other):
<a name="l00761"></a>00761         <span class="stringliteral">&#39;&#39;&#39;od.__eq__(y) &lt;==&gt; od==y.  Comparison to another OD is order-sensitive</span>
<a name="l00762"></a>00762 <span class="stringliteral">        while comparison to a regular mapping is order-insensitive.</span>
<a name="l00763"></a>00763 <span class="stringliteral"></span>
<a name="l00764"></a>00764 <span class="stringliteral">        &#39;&#39;&#39;</span>
<a name="l00765"></a>00765         <span class="keywordflow">if</span> isinstance(other, OrderedDict):
<a name="l00766"></a>00766             <span class="keywordflow">return</span> len(self)==len(other) <span class="keywordflow">and</span> self.<a class="code" href="classgfit_1_1gfit__helper_1_1OrderedDict.html#a65c6efd75deda8822937cf0173031f57">items</a>() == other.items()
<a name="l00767"></a>00767         <span class="keywordflow">return</span> dict.__eq__(self, other)
<a name="l00768"></a>00768 
<a name="l00769"></a><a class="code" href="classgfit_1_1gfit__helper_1_1OrderedDict.html#ad75da1ae443a255551dd91248d97398b">00769</a>     <span class="keyword">def </span><a class="code" href="classgfit_1_1gfit__helper_1_1OrderedDict.html#ad75da1ae443a255551dd91248d97398b">__ne__</a>(self, other):
<a name="l00770"></a>00770         <span class="keywordflow">return</span> <span class="keywordflow">not</span> self == other
<a name="l00771"></a>00771 
<a name="l00772"></a>00772     <span class="comment"># -- the following methods are only used in Python 2.7 --</span>
<a name="l00773"></a>00773 
<a name="l00774"></a><a class="code" href="classgfit_1_1gfit__helper_1_1OrderedDict.html#ac548131399a816f94337c76e4a295736">00774</a>     <span class="keyword">def </span><a class="code" href="classgfit_1_1gfit__helper_1_1OrderedDict.html#ac548131399a816f94337c76e4a295736">viewkeys</a>(self):
<a name="l00775"></a>00775         <span class="stringliteral">&quot;od.viewkeys() -&gt; a set-like object providing a view on od&#39;s keys&quot;</span>
<a name="l00776"></a>00776         <span class="keywordflow">return</span> KeysView(self)
<a name="l00777"></a>00777 
<a name="l00778"></a><a class="code" href="classgfit_1_1gfit__helper_1_1OrderedDict.html#aaeadd9b76babb973ecfe23904fef4df2">00778</a>     <span class="keyword">def </span><a class="code" href="classgfit_1_1gfit__helper_1_1OrderedDict.html#aaeadd9b76babb973ecfe23904fef4df2">viewvalues</a>(self):
<a name="l00779"></a>00779         <span class="stringliteral">&quot;od.viewvalues() -&gt; an object providing a view on od&#39;s values&quot;</span>
<a name="l00780"></a>00780         <span class="keywordflow">return</span> ValuesView(self)
<a name="l00781"></a>00781 
<a name="l00782"></a><a class="code" href="classgfit_1_1gfit__helper_1_1OrderedDict.html#a4591d3e42b77454c554222228b976c46">00782</a>     <span class="keyword">def </span><a class="code" href="classgfit_1_1gfit__helper_1_1OrderedDict.html#a4591d3e42b77454c554222228b976c46">viewitems</a>(self):
<a name="l00783"></a>00783         <span class="stringliteral">&quot;od.viewitems() -&gt; a set-like object providing a view on od&#39;s items&quot;</span>
<a name="l00784"></a>00784         <span class="keywordflow">return</span> ItemsView(self)
<a name="l00785"></a>00785 
<a name="l00786"></a>00786 <span class="comment"># -- EOF gfit_helper.py</span>
<a name="l00787"></a>00787 
</pre></div></div>
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="gfit__helper_8py.html">gfit_helper.py</a>      </li>
      <li class="footer">Generated on Tue Apr 21 2015 14:26:30 for gfit by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.3 </li>
    </ul>
  </div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>


</body>
</html>
